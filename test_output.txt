PHPUnit 10.5.58 by Sebastian Bergmann and contributors.

Runtime:       PHP 8.3.15
Configuration: D:\laragon\www\simplerest\phpunit.xml

........F--| SQL ======================>
SELECT   SUM(cost) as total_cost FROM `products`  WHERE (size = ?) AND deleted_at IS NULL GROUP BY belongs_to HAVING SUM(cost) > ? LIMIT ?, ?

--| BINDINGS ======================>
Array
(
    [0] => 1L
    [1] => 500
    [2] => 1
    [3] => 3
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING (SUM(cost) > ?) OR  (cost >= ? AND  size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 500
    [1] => 100
    [2] => 1L
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING cost >= ?  OR ((SUM(cost) > ?) AND  size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 500
    [2] => 1L
)

R--| SQL ======================>
SELECT * FROM `products`  WHERE deleted_at IS NULL ORDER BY name ASC

--| BINDINGS ======================>
Array
(
)

--| SQL ======================>
SELECT * FROM `products`  WHERE deleted_at IS NULL ORDER BY id DESC

--| BINDINGS ======================>
Array
(
)

--| SQL ======================>
SELECT * FROM `products`  WHERE deleted_at IS NULL ORDER BY id DESC

--| BINDINGS ======================>
Array
(
)

R--| SQL ======================>
SELECT  id,cost,size,description,belongs_to FROM `products`  WHERE (NOT ((cost > ? AND id < ?) OR  (cost <= ? AND description IS NOT ?)) AND  belongs_to > ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 50
    [2] => 100
    [3] => 
    [4] => 150
)

--| SQL ======================>
SELECT * FROM `products`  WHERE (belongs_to > ?  AND  NOT (name = ?  OR ((cost <= ? AND description IS NOT ?))) AND  size >= ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 150
    [1] => a$
    [2] => 100
    [3] => 
    [4] => 1L
)

--| SQL ======================>
SELECT * FROM `products`  WHERE (belongs_to > ?  AND  NOT ((cost <= ? AND description IS NOT ?)  OR (name REGEXP ?)) AND  size >= ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 150
    [1] => 100
    [2] => 
    [3] => a$
    [4] => 1L
)

--| SQL ======================>
SELECT * FROM `products`  WHERE (belongs_to > ?  AND  NOT ((name REGEXP ?)  OR ((cost <= ? AND description IS NOT ?))) AND  size >= ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 150
    [1] => a$
    [2] => 100
    [3] => 
    [4] => 1L
)

R--| SQL ======================>
SELECT  id,name,description,belongs_to FROM `products`  WHERE belongs_to = ? AND  cost >= ? UNION  SELECT  id,name,description,belongs_to FROM `products`  WHERE belongs_to = ? ORDER BY id ASC

--| BINDINGS ======================>
Array
(
    [0] => 4
    [1] => 200
)

R--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ? OR  cost >= ? OR  size = ? ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ? OR  (cost >= ? AND size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ?  OR (cost >= ? AND  size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

R--| SQL ======================>
SELECT  id,name,cost,size,description,belongs_to FROM `products`  WHERE (cost > ? AND id <= ?)  AND (active = ?  OR (name LIKE ?)) AND  belongs_to > ?

--| BINDINGS ======================>
Array
(
    [0] => 50
    [1] => 190
    [2] => 1
    [3] => %a%
    [4] => 1
)

R--| SQL ======================>
SELECT   name,COUNT(*) as c FROM `products`  GROUP BY name HAVING c > ?

--| BINDINGS ======================>
Array
(
    [0] => 3
)

--| SQL ======================>
SELECT   name,COUNT(name) as c FROM `products`  WHERE deleted_at IS NULL GROUP BY name HAVING c >= ?

--| BINDINGS ======================>
Array
(
    [0] => 3
)

--| SQL ======================>
SELECT  cost,size FROM `products`  WHERE deleted_at IS NULL GROUP BY cost,size HAVING cost = ?

--| BINDINGS ======================>
Array
(
    [0] => 100
)

--| SQL ======================>
SELECT  cost,size FROM `products`  GROUP BY cost,size HAVING cost = ?

--| BINDINGS ======================>
Array
(
    [0] => 100
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ? AND  (cost >= ? OR size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

R--| SQL ======================>
SELECT  id,name,size,cost,belongs_to FROM `products`  WHERE belongs_to IN (SELECT  id FROM `users`  WHERE (password IS NULL) AND deleted_at IS NULL)

--| BINDINGS ======================>
Array
(
)

--| SQL ======================>
SELECT  id,name,size,cost,belongs_to FROM `products`  WHERE (belongs_to IN (SELECT  id FROM `users`  WHERE (confirmed_email = 1) AND  password < ?)) AND  size = ?

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 1L
)

--| SQL ======================>
SELECT  id,name,size,cost,belongs_to FROM `products`  WHERE (belongs_to IN (SELECT   users.id FROM `users` INNER JOIN user_roles ON users.id=user_roles.user_id   WHERE (confirmed_email = 1) AND  password < ? AND  role_id = ?)) AND  size = ? ORDER BY id DESC

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 2
    [2] => 1L
)

R..                                               19 / 19 (100%)

Time: 00:00.188, Memory: 14.00 MB

There was 1 failure:

1) Boctulus\Simplerest\tests\ModelTest::test_get
Failed asserting that two strings are equal.
--- Expected
+++ Actual
@@ @@
-'SELECT DISTINCT size FROM products WHERE deleted_at IS NULL'
+'SELECT DISTINCT cost,size FROM products WHERE deleted_at IS NULL'

D:\laragon\www\simplerest\app\Core\Traits\UnitTestCaseSQLTrait.php:78
D:\laragon\www\simplerest\tests\ModelTest.php:54

--

There were 8 risky tests:

1) Boctulus\Simplerest\tests\ModelTest::test_havingRaw
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT   SUM(cost) as total_cost FROM `products`  WHERE (size = ?) AND deleted_at IS NULL GROUP BY belongs_to HAVING SUM(cost) > ? LIMIT ?, ?

--| BINDINGS ======================>
Array
(
    [0] => 1L
    [1] => 500
    [2] => 1
    [3] => 3
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING (SUM(cost) > ?) OR  (cost >= ? AND  size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 500
    [1] => 100
    [2] => 1L
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING cost >= ?  OR ((SUM(cost) > ?) AND  size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 500
    [2] => 1L
)

D:\laragon\www\simplerest\tests\ModelTest.php:628

2) Boctulus\Simplerest\tests\ModelTest::test_when
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT * FROM `products`  WHERE deleted_at IS NULL ORDER BY name ASC

--| BINDINGS ======================>
Array
(
)

--| SQL ======================>
SELECT * FROM `products`  WHERE deleted_at IS NULL ORDER BY id DESC

--| BINDINGS ======================>
Array
(
)

--| SQL ======================>
SELECT * FROM `products`  WHERE deleted_at IS NULL ORDER BY id DESC

--| BINDINGS ======================>
Array
(
)

D:\laragon\www\simplerest\tests\ModelTest.php:953

3) Boctulus\Simplerest\tests\ModelTest::test_groups
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT  id,cost,size,description,belongs_to FROM `products`  WHERE (NOT ((cost > ? AND id < ?) OR  (cost <= ? AND description IS NOT ?)) AND  belongs_to > ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 50
    [2] => 100
    [3] => 
    [4] => 150
)

--| SQL ======================>
SELECT * FROM `products`  WHERE (belongs_to > ?  AND  NOT (name = ?  OR ((cost <= ? AND description IS NOT ?))) AND  size >= ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 150
    [1] => a$
    [2] => 100
    [3] => 
    [4] => 1L
)

--| SQL ======================>
SELECT * FROM `products`  WHERE (belongs_to > ?  AND  NOT ((cost <= ? AND description IS NOT ?)  OR (name REGEXP ?)) AND  size >= ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 150
    [1] => 100
    [2] => 
    [3] => a$
    [4] => 1L
)

--| SQL ======================>
SELECT * FROM `products`  WHERE (belongs_to > ?  AND  NOT ((name REGEXP ?)  OR ((cost <= ? AND description IS NOT ?))) AND  size >= ?) AND deleted_at IS NULL

--| BINDINGS ======================>
Array
(
    [0] => 150
    [1] => a$
    [2] => 100
    [3] => 
    [4] => 1L
)

D:\laragon\www\simplerest\tests\ModelTest.php:1016

4) Boctulus\Simplerest\tests\ModelTest::test_union
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT  id,name,description,belongs_to FROM `products`  WHERE belongs_to = ? AND  cost >= ? UNION  SELECT  id,name,description,belongs_to FROM `products`  WHERE belongs_to = ? ORDER BY id ASC

--| BINDINGS ======================>
Array
(
    [0] => 4
    [1] => 200
)

D:\laragon\www\simplerest\tests\ModelTest.php:875

5) Boctulus\Simplerest\tests\ModelTest::test_orHaving
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ? OR  cost >= ? OR  size = ? ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ? OR  (cost >= ? AND size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ?  OR (cost >= ? AND  size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

D:\laragon\www\simplerest\tests\ModelTest.php:585

6) Boctulus\Simplerest\tests\ModelTest::test_or_whereraw
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT  id,name,cost,size,description,belongs_to FROM `products`  WHERE (cost > ? AND id <= ?)  AND (active = ?  OR (name LIKE ?)) AND  belongs_to > ?

--| BINDINGS ======================>
Array
(
    [0] => 50
    [1] => 190
    [2] => 1
    [3] => %a%
    [4] => 1
)

D:\laragon\www\simplerest\tests\ModelTest.php:763

7) Boctulus\Simplerest\tests\ModelTest::test_having
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT   name,COUNT(*) as c FROM `products`  GROUP BY name HAVING c > ?

--| BINDINGS ======================>
Array
(
    [0] => 3
)

--| SQL ======================>
SELECT   name,COUNT(name) as c FROM `products`  WHERE deleted_at IS NULL GROUP BY name HAVING c >= ?

--| BINDINGS ======================>
Array
(
    [0] => 3
)

--| SQL ======================>
SELECT  cost,size FROM `products`  WHERE deleted_at IS NULL GROUP BY cost,size HAVING cost = ?

--| BINDINGS ======================>
Array
(
    [0] => 100
)

--| SQL ======================>
SELECT  cost,size FROM `products`  GROUP BY cost,size HAVING cost = ?

--| BINDINGS ======================>
Array
(
    [0] => 100
)

--| SQL ======================>
SELECT  cost,size,belongs_to FROM `products`  GROUP BY cost,size,belongs_to HAVING belongs_to = ? AND  (cost >= ? OR size = ?) ORDER BY size DESC

--| BINDINGS ======================>
Array
(
    [0] => 90
    [1] => 100
    [2] => 1L
)

D:\laragon\www\simplerest\tests\ModelTest.php:530

8) Boctulus\Simplerest\tests\ModelTest::test_subqueries
Test code or tested code printed unexpected output: --| SQL ======================>
SELECT  id,name,size,cost,belongs_to FROM `products`  WHERE belongs_to IN (SELECT  id FROM `users`  WHERE (password IS NULL) AND deleted_at IS NULL)

--| BINDINGS ======================>
Array
(
)

--| SQL ======================>
SELECT  id,name,size,cost,belongs_to FROM `products`  WHERE (belongs_to IN (SELECT  id FROM `users`  WHERE (confirmed_email = 1) AND  password < ?)) AND  size = ?

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 1L
)

--| SQL ======================>
SELECT  id,name,size,cost,belongs_to FROM `products`  WHERE (belongs_to IN (SELECT   users.id FROM `users` INNER JOIN user_roles ON users.id=user_roles.user_id   WHERE (confirmed_email = 1) AND  password < ? AND  role_id = ?)) AND  size = ? ORDER BY id DESC

--| BINDINGS ======================>
Array
(
    [0] => 100
    [1] => 2
    [2] => 1L
)

D:\laragon\www\simplerest\tests\ModelTest.php:787

FAILURES!
Tests: 19, Assertions: 54, Failures: 1, Risky: 8.
