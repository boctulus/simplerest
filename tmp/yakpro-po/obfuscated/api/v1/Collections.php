<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.13  |
    |              on 2022-01-15 18:30:56              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace simplerest\core\api\v1; use simplerest\controllers\MyApiController; use simplerest\core\libs\Factory; use simplerest\core\Acl; use simplerest\core\libs\Strings; use simplerest\core\libs\DB; use simplerest\libs\Debug; use simplerest\core\libs\Validator; use simplerest\core\exceptions\InvalidValidationException; use simplerest\core\libs\Url; class Collections extends MyApiController { protected $forbidden_tables = array("\146\157\154\144\145\x72\137\x6f\164\x68\145\162\137\160\x65\162\x6d\x69\x73\163\x69\157\156\x73", "\146\157\x6c\144\x65\162\x5f\x70\x65\x72\155\x69\x73\163\x69\x6f\x6e\163", "\x66\x6f\154\x64\145\x72\163", "\x72\157\x6c\145\163", "\165\x73\x65\162\x5f\162\157\154\145\x73", "\163\160\137\x70\145\162\x6d\x69\163\163\151\x6f\x6e\163", "\x75\163\145\162\x5f\163\160\137\x70\x65\162\155\151\x73\163\x69\157\x6e\x73", "\x75\163\145\x72\x5f\164\x62\137\160\x65\162\155\151\x73\x73\151\x6f\x6e\x73"); function __construct() { goto aRN7m; j0Jwo: parent::__construct(); goto cUEai; kyGUq: $this->callable = ["\147\x65\x74", "\x70\157\163\x74", "\x70\165\x74", "\160\141\164\143\x68", "\144\x65\154\x65\164\145"]; goto XT4A7; XT4A7: $this->is_listable = true; goto DnhgI; DnhgI: $this->is_retrievable = true; goto l6P35; aRN7m: $this->forbidden_tables[] = $this->users_table; goto JMm3s; JMm3s: if (!(Factory::request()->authMethod() !== NULL)) { goto g6LWL; } goto kyGUq; l6P35: g6LWL: goto j0Jwo; cUEai: } function post() { goto xD2HL; fonKL: if (!empty($wYHZM["\145\x6e\164\151\164\x79"])) { goto HqLMH; } goto LL6cl; xD2HL: $wYHZM = Factory::request()->getBody(false); goto bobTc; BrfCu: if (!in_array(strtolower($AM8Vk), $this->forbidden_tables)) { goto OOQdh; } goto G0v5r; bobTc: if (!empty($wYHZM)) { goto hnsAs; } goto KyxpQ; KyxpQ: Factory::response()->sendError("\111\x6e\166\x61\x6c\151\x64\x20\x4a\x53\x4f\x4e", 400); goto DZ5Zu; u7Guf: HqLMH: goto EeFXQ; xvDQL: $kttuW = $wYHZM["\x72\145\146\163"]; goto BrfCu; LL6cl: Factory::response()->sendError("\x50\141\162\x61\x6d\145\x74\x65\x72\x20\x65\156\x74\151\164\x79\40\x69\x73\x20\x72\x65\161\165\151\162\x65\x64", 400); goto u7Guf; LBmX9: OOQdh: goto kqUcb; t9uBY: Factory::response()->sendError("\x50\141\x72\141\155\145\164\145\162\40\162\x65\x66\163\40\151\163\x20\x72\145\x71\x75\151\x72\x65\x64", 400); goto PJM66; H4G6H: $AM8Vk = $wYHZM["\145\156\164\151\x74\171"]; goto xvDQL; PJM66: u5y8X: goto H4G6H; kqUcb: try { goto yKIqI; rpdIc: if ($GabDK !== false) { goto obaYO; } goto w71N7; xBZf8: Factory::response()->send(["\x69\144" => $GabDK], 201); goto RR9uW; xTe8Q: $cKGUU = ucfirst($AM8Vk) . "\115\157\x64\145\154"; goto sGUAr; PmyEU: Factory::response()->sendError("\105\156\x74\x69\x74\171\40{$AM8Vk}\40\144\157\145\163\156\47\164\40\145\x78\151\x73\x74", 400); goto Vk2DU; w71N7: Factory::response()->sendError("\105\x72\x72\x6f\162\x3a\40\143\x72\145\141\x74\151\x6f\x6e\x20\x6f\146\x20\x63\x6f\x6c\154\145\143\164\x69\x6f\x6e\40\x66\141\151\x6c\163\41"); goto jwslY; RR9uW: G1LTr: goto sM9CX; yEv64: $fRsHx = "\134\163\x69\x6d\x70\x6c\145\162\x65\163\x74\134\143\x6f\156\164\162\157\x6c\x6c\x65\162\163\x5c\x61\160\x69\134" . ucfirst($AM8Vk); goto n98qo; wUf4o: $fNEzs = "\x73\151\155\x70\154\x65\162\x65\x73\164\x5c\x6d\157\x64\x65\154\163\134" . $cKGUU; goto yEv64; yKIqI: $AM8Vk = Strings::snakeToCamel($AM8Vk); goto xTe8Q; sGUAr: $hQcdU = strtolower($AM8Vk); goto wUf4o; ik7hz: obaYO: goto xBZf8; dZDJV: $GabDK = DB::table("\143\157\154\x6c\x65\143\164\x69\157\156\163")->create(["\145\x6e\164\x69\164\171" => $hQcdU, "\x72\145\x66\163" => json_encode($kttuW), "\x62\x65\154\157\x6e\147\163\137\x74\x6f" => Acl::getCurrentUid()]); goto rpdIc; n98qo: if (class_exists($fNEzs)) { goto yhRSX; } goto PmyEU; jwslY: goto G1LTr; goto ik7hz; Vk2DU: yhRSX: goto dZDJV; sM9CX: } catch (\Exception $aU1Pp) { Factory::response()->sendError($aU1Pp->getMessage()); } goto QUVky; G0v5r: Factory::response()->sendError("\106\157\162\142\151\x64\144\x65\x6e", 403, "\x54\141\142\x6c\145\40\47" . $AM8Vk . "\x27\x20\151\x73\40\x6e\x6f\x74\40\141\x76\141\151\x6c\x61\142\x6c\x65\x20\x66\157\x72\x20\143\x6f\x6c\154\x65\143\x74\x69\157\x6e\163"); goto LBmX9; DZ5Zu: hnsAs: goto fonKL; EeFXQ: if (!empty($wYHZM["\x72\x65\x66\163"])) { goto u5y8X; } goto t9uBY; QUVky: } protected function modify($GabDK = NULL, bool $Oynf2 = false) { goto BV78X; T0rAU: b4Efo: goto mhWq2; BV78X: if (!($GabDK == null)) { goto b4Efo; } goto UfAwL; mXBzr: Factory::response()->sendError("\x49\x6e\166\x61\x6c\151\144\40\112\x53\x4f\x4e", 400); goto rED31; rED31: APOvS: goto O6cdd; O6cdd: try { goto Nd91N; i81Vb: Factory::response()->sendError("\x45\x6e\x74\x69\x74\x79\x20{$AM8Vk}\x20\x64\157\x65\x73\156\x27\164\40\145\170\x69\x73\164", 400); goto q8zPb; sp4Bx: naZrW: goto hQt4z; yTFYB: if ($tlgrd) { goto naZrW; } goto sGVzn; sGVzn: if ($ScGji->inSchema([$ScGji->belongsTo()])) { goto y3qRT; } goto uS77b; S6x06: goto bBcOs; goto OM9Wz; nnKZr: $wYHZM["\165\x70\144\141\164\x65\x64\x5f\142\x79"] = Acl::getCurrentUid(); goto JQzE4; rG6x3: $Zs7OL = 0; goto VXU53; GQj7N: bBcOs: goto wz85x; OuVRB: Factory::response()->sendError("\x43\157\x6c\145\143\164\151\x6f\156\x20\x6e\157\x74\x20\x66\157\x75\x6e\x64", 404); goto S6x06; GXPgp: unset($wYHZM["\162\x65\x66\x73"]); goto jXUcu; oLyuj: Factory::response()->code(404)->sendError("\103\x6f\154\x6c\145\143\x74\151\157\x6e\x20\146\x6f\x72\40\151\x64\x3d{$GabDK}\x20\x64\157\x65\163\x6e\47\164\x20\145\170\x69\163\x74"); goto q_ht5; OM9Wz: pErOm: goto JLeqx; N7hsC: $fNEzs = "\163\x69\155\160\154\145\x72\145\163\164\x5c\x6d\x6f\144\x65\154\x73\x5c" . $cKGUU; goto FA4q6; FA4q6: $fRsHx = "\134\x73\x69\x6d\160\x6c\145\x72\x65\x73\164\134\x63\157\156\164\x72\x6f\x6c\x6c\145\x72\163\134\x61\x70\151\x5c" . ucfirst($AM8Vk); goto IyaLG; yq4UB: if ($tMe4v) { goto kvpLh; } goto oLyuj; rIwnu: $cKGUU = ucfirst($AM8Vk) . "\115\157\x64\145\154"; goto T2a08; TmPbd: if (!$ScGji->inSchema(["\x75\160\x64\x61\x74\145\144\137\142\171"])) { goto KcSRk; } goto nnKZr; uS77b: Factory::response()->sendError(_("\x43\157\154\x6c\x65\x63\x74\151\x6f\x6e\163\x20\x61\162\145\x20\156\x6f\x74\x20\141\166\x61\x69\154\141\142\154\145\x20\x74\157\40\x74\150\x69\163\40\162\145\163\x6f\x75\162\143\145")); goto hMKtU; y0z4w: $AM8Vk = Strings::snakeToCamel($tMe4v["\145\x6e\x74\x69\164\171"]); goto rIwnu; jfKDR: if (!($gn70B !== true)) { goto I79SA; } goto Il9yl; d0ZzQ: I4F42: goto RBnJV; VXU53: DB::transaction(function () use($ScGji, $kttuW, &$Zs7OL, $wYHZM, $GabDK) { $Zs7OL = $ScGji->whereIn("\151\x64", $kttuW)->update($wYHZM); DB::table("\x63\x6f\154\x6c\x65\x63\x74\151\x6f\156\x73")->where(["\x69\x64" => $GabDK])->delete(); }); goto GOk1s; c5S2I: if (!(!$tlgrd && $tMe4v["\x62\x65\154\157\156\x67\x73\x5f\x74\x6f"] != Acl::getCurrentUid())) { goto FXJV1; } goto hKLZd; wz85x: eMK5O: goto im2px; HaxhM: goto eMK5O; goto d0ZzQ; qreSM: $tMe4v = DB::table("\143\x6f\x6c\x6c\145\x63\164\151\157\x6e\163")->where(["\151\144", $GabDK])->first(); goto yq4UB; Nd91N: if (!empty($wYHZM["\x72\x65\x6d\157\166\145"]) && strtolower($wYHZM["\x72\145\155\x6f\166\x65"]) == "\164\162\165\x65") { goto I4F42; } goto qreSM; RBnJV: if (DB::table("\143\x6f\x6c\154\x65\143\164\151\157\156\x73")->where(["\151\x64", $GabDK])->delete()) { goto pErOm; } goto OuVRB; sOPPr: FXJV1: goto y0z4w; Il9yl: Factory::response()->sendError(_("\104\141\x74\141\x20\x76\x61\154\151\x64\x61\x74\151\157\x6e\40\145\x72\162\x6f\162"), 400, $gn70B); goto Clqdx; ln42L: $ScGji = new $fNEzs(true); goto GXPgp; hQt4z: $gn70B = (new Validator())->setRequired($Oynf2)->validate($ScGji->getRules(), $wYHZM); goto jfKDR; ocRby: $tlgrd = Factory::acl()->hasSpecialPermission("\x77\162\x69\164\145\137\141\x6c\x6c\x5f\143\x6f\154\x6c\145\x63\x74\x69\x6f\x6e\163"); goto c5S2I; uEgcb: d53MG: goto yTFYB; q_ht5: kvpLh: goto ocRby; Mt4VU: $ScGji->where([$ScGji->belongsTo() => Acl::getCurrentUid()]); goto sp4Bx; jXUcu: foreach ($wYHZM as $gK9hD => $s11DD) { goto v9C2T; wL6Ye: $wYHZM[$gK9hD] = NULL; goto PKkwH; T5BV5: GP83P: goto vABEZ; PKkwH: bx4Mx: goto T5BV5; v9C2T: if (!(strtoupper($s11DD) == "\x4e\x55\x4c\x4c" && $ScGji->isNullable($gK9hD))) { goto bx4Mx; } goto wL6Ye; vABEZ: } goto uEgcb; GOk1s: Factory::response()->send(["\141\146\146\x65\143\x74\145\x64\x5f\x72\157\167\x73" => $Zs7OL]); goto HaxhM; JQzE4: KcSRk: goto wG6gN; hMKtU: y3qRT: goto Mt4VU; hKLZd: Factory::response()->sendError("\x46\x6f\162\x62\x69\x64\x64\145\x6e", 403, "\x59\157\x75\40\x61\x72\x65\x20\156\x6f\x74\x20\x74\150\145\40\x6f\x77\156\145\162"); goto sOPPr; wG6gN: $kttuW = json_decode($tMe4v["\162\145\x66\x73"]); goto rG6x3; JLeqx: Factory::response()->sendOK(); goto GQj7N; T2a08: $hQcdU = strtolower($AM8Vk); goto N7hsC; Clqdx: I79SA: goto TmPbd; q8zPb: pnYI7: goto ln42L; IyaLG: if (class_exists($fNEzs)) { goto pnYI7; } goto i81Vb; im2px: } catch (\Exception $aU1Pp) { Factory::response()->sendError("\x45\x72\x72\x6f\x72\40\x64\165\x72\151\x6e\x67\40\x75\x70\144\141\164\x65\x20\x66\157\x72\x20\x63\157\x6c\145\143\x74\151\157\x6e\x20{$GabDK}\40\x77\x69\x74\x68\x20\155\x65\163\163\141\x67\x65\72\x20{$aU1Pp->getMessage()}"); } goto AQ6TC; mhWq2: $wYHZM = Factory::request()->getBody(false); goto rTvuR; UfAwL: Factory::response()->code(400)->sendError("\x4d\x69\163\x73\151\156\147\40\151\x64"); goto T0rAU; rTvuR: if (!empty($wYHZM)) { goto APOvS; } goto mXBzr; AQ6TC: } function delete($GabDK = NULL) { goto p2hJo; z61wL: $wYHZM = Factory::request()->getBody(); goto wjrmq; p2hJo: if (!($GabDK == NULL)) { goto sE2Ns; } goto fLwEV; fLwEV: Factory::response()->sendError("\x4c\141\143\x6b\163\x20\151\x64\40\x66\157\x72\x20\103\157\154\x6c\145\143\x74\151\157\x6e\x20\151\x6e\40\162\x65\161\x75\145\x73\x74", 400); goto XAA5_; wjrmq: try { goto ozzau; i4Dml: if (!(!$tlgrd && $tMe4v["\142\145\154\x6f\x6e\147\x73\x5f\164\x6f"] != Acl::getCurrentUid())) { goto FMAPm; } goto gxRV2; iFa2E: $cKGUU = ucfirst($AM8Vk) . "\x4d\157\x64\145\154"; goto UpOj3; Va4UH: ltevJ: goto DEbYK; SC6t5: $fRsHx = "\x5c\x73\x69\155\x70\154\145\x72\x65\x73\x74\x5c\143\157\156\164\x72\x6f\x6c\x6c\145\162\x73\x5c\141\x70\151\134" . ucfirst($AM8Vk); goto mpPjY; y35jN: if ($tlgrd) { goto A2thb; } goto HuYhD; K4bTz: $kttuW = json_decode($tMe4v["\162\x65\146\x73"]); goto b9Kib; KrOgQ: DB::transaction(function () use($ScGji, $fRsHx, $kttuW, $GabDK, &$Zs7OL) { $Zs7OL = $ScGji->whereIn("\151\x64", $kttuW)->delete(); DB::table("\143\x6f\154\x6c\x65\143\x74\151\157\x6e\163")->where(["\x69\144" => $GabDK])->delete(); }); goto pZaQC; wlzJZ: Factory::response()->code(404)->sendError("\x43\x6f\154\154\x65\143\x74\151\157\x6e\x20\146\x6f\x72\x20\151\x64\x3d{$GabDK}\40\x64\157\145\x73\156\x27\x74\x20\145\170\x69\163\164"); goto rYc4T; DEbYK: $ScGji = new $fNEzs(true); goto y35jN; pZaQC: Factory::response()->send(["\141\146\146\145\x63\164\145\x64\x5f\162\x6f\167\x73" => $Zs7OL]); goto JJxPA; bCJt2: if ($tMe4v) { goto r6e43; } goto wlzJZ; b9Kib: $Zs7OL = 0; goto KrOgQ; lsuin: Factory::response()->sendError("\x45\x6e\164\151\x74\171\40{$AM8Vk}\40\144\157\145\163\x6e\x27\164\40\x65\x78\151\x73\164", 400); goto Va4UH; gxRV2: Factory::response()->sendError("\x46\157\x72\x62\x69\144\144\x65\156", 403, "\131\x6f\165\x20\141\x72\x65\x20\x6e\157\x74\x20\164\150\145\40\157\x77\x6e\x65\162"); goto ItRvS; AjVJY: $tlgrd = Factory::acl()->hasSpecialPermission("\x77\162\151\164\x65\x5f\141\x6c\154\137\x63\x6f\x6c\x6c\145\143\x74\151\157\x6e\x73"); goto i4Dml; dhafi: $fNEzs = "\x73\x69\x6d\x70\154\x65\162\145\x73\164\x5c\x6d\157\x64\x65\154\163\x5c" . $cKGUU; goto SC6t5; ozzau: $tMe4v = DB::table("\x63\157\154\154\x65\143\x74\x69\x6f\x6e\163")->where(["\x69\x64", $GabDK])->first(); goto bCJt2; UpOj3: $hQcdU = strtolower($AM8Vk); goto dhafi; mpPjY: if (class_exists($fNEzs)) { goto ltevJ; } goto lsuin; D9A2H: A2thb: goto K4bTz; HuYhD: $ScGji->where(["\142\x65\x6c\x6f\156\147\x73\137\164\x6f" => Acl::getCurrentUid()]); goto D9A2H; DL433: $AM8Vk = Strings::snakeToCamel($tMe4v["\145\156\x74\151\164\171"]); goto iFa2E; rYc4T: r6e43: goto AjVJY; ItRvS: FMAPm: goto DL433; JJxPA: } catch (\Exception $aU1Pp) { Factory::response()->sendError("\x45\x72\162\x6f\x72\40\x64\165\162\151\x6e\x67\x20\104\105\x4c\x45\124\105\40\146\x6f\162\40\143\x6f\x6c\154\x65\x63\x74\151\157\156\40{$GabDK}\x20\167\x69\164\x68\x20\155\145\x73\163\141\x67\145\72\x20{$aU1Pp->getMessage()}"); } goto zF54K; XAA5_: sE2Ns: goto z61wL; zF54K: } }
