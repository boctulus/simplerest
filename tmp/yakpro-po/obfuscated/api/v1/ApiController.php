<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.13  |
    |              on 2022-01-16 16:01:53              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace simplerest\core\api\v1; use PDO; use simplerest\core\libs\DB; use simplerest\core\libs\Url; use simplerest\libs\Debug; use simplerest\core\libs\Arrays; use simplerest\core\libs\Factory; use simplerest\core\libs\Strings; use simplerest\core\libs\Time; use simplerest\core\Acl; use simplerest\core\libs\Validator; use simplerest\core\interfaces\IApi; use simplerest\core\interfaces\IAuth; use simplerest\core\FoldersAclExtension; use simplerest\core\exceptions\SqlException; use simplerest\core\api\v1\ResourceController; use simplerest\core\exceptions\InvalidValidationException; use simplerest\core\interfaces\ISubResources; abstract class ApiController extends ResourceController implements IApi, ISubResources { public $model_name; public $table_name; protected static $folder_field; protected static $soft_delete = true; protected static $connect_to = []; protected $is_listable; protected $is_retrievable; protected $callable = []; protected $config; protected $impersonated_by; protected $conn; protected $instance; protected $tenantid; protected $id; protected $folder; protected $show_deleted; protected $ask_for_deleted; function __construct($FfQwU = null) { goto ICXr8; ZdRnz: $this->conn = DB::getConnection($this->tenantid); goto Ch8ff; SEfoQ: if ($this->table_name != null) { goto skACl; } goto sHW1y; iiYd6: SrD1r: goto IWue0; xYWVb: skACl: goto zEDnO; LThGx: zzE77: goto nRzS6; CbYSO: goto zzE77; goto xYWVb; TJcpr: QEtcd: goto t6R9C; WhXpl: $AVXYR->sendError("\x41\160\x69\103\x6f\156\x74\162\x6f\154\x6c\145\x72\x20\x77\151\164\x68\x20\x75\x6e\x64\x65\146\151\156\x65\x64\40\x4d\x6f\x64\145\154", 500); goto CbYSO; H_Ul9: $this->tenantid = Factory::request()->getTenantId(); goto B6INi; a0Ji1: $this->impersonated_by = $this->auth->impersonated_by ?? null; goto I0XbJ; IWue0: $this->table_name = Strings::camelToSnake(Strings::rTrim("\x4d\157\144\145\154", $this->model_name)); goto zE_Gp; Ch8ff: tepWd: goto q6_0J; sHW1y: if (preg_match("\x2f\x28\x5b\x41\55\x5a\x5d\133\x61\55\x7a\x30\55\x39\137\x5d\52\133\x41\x2d\x5a\135\x2a\133\x61\55\x7a\60\x2d\71\137\x5d\x2a\133\101\55\x5a\x5d\x2a\x5b\x61\x2d\172\x30\x2d\x39\137\135\x2a\133\101\55\132\x5d\x2a\x5b\141\55\x7a\60\x2d\71\x5f\x5d\x2a\x29\x2f", get_called_class(), $dZvnO)) { goto QEtcd; } goto WhXpl; zEDnO: $this->model_name = implode(array_map("\165\143\x66\151\x72\x73\164", explode("\137", $this->table_name))) . "\115\157\144\x65\154"; goto HyuF3; NjJUL: NXOOZ: goto ibErq; nRzS6: goto veDFG; goto iiYd6; ibErq: GeYvO: goto a0Ji1; t6R9C: $this->model_name = $dZvnO[1] . "\x4d\x6f\144\x65\154"; goto QSBEn; I0XbJ: $this->callable = array_merge($this->callable, ["\x68\x65\141\144", "\x6f\160\x74\x69\157\x6e\x73"]); goto g_4Ne; QSBEn: $this->table_name = Strings::camelToSnake($dZvnO[1]); goto LThGx; Y_W0h: B8FrZ: goto NjJUL; qMoYY: $AVXYR = response()->encoded(); goto H_Ul9; m9_Hf: dy7No: goto rb5FG; RJkvP: switch ($_SERVER["\122\x45\x51\x55\x45\123\x54\x5f\115\x45\124\x48\117\x44"]) { case "\x47\x45\124": goto HKxcb; Mptvm: goto dy7No; goto FpQrQ; bpsSX: $this->is_retrievable = true; goto BBaGT; m7B3q: $this->addCallable("\x67\x65\x74"); goto ehQIh; l13pd: $this->is_retrievable = true; goto gnucn; epbNI: $this->is_listable = true; goto bpsSX; XnIgJ: if (!($this->acl->hasResourcePermission("\x73\x68\x6f\x77", $this->table_name) || $this->acl->hasResourcePermission("\163\x68\157\x77\x5f\141\154\x6c", $this->table_name))) { goto HaoaI; } goto iEbVI; iEbVI: $this->addCallable("\147\145\x74"); goto l13pd; VwtMJ: c6Ve9: goto xRg9i; HKxcb: if ($this->acl->hasSpecialPermission("\x72\x65\x61\x64\x5f\141\x6c\154")) { goto c6Ve9; } goto XnIgJ; xRg9i: $this->addCallable("\147\x65\x74"); goto epbNI; BBaGT: MHVV7: goto Mptvm; NfTnd: if (!($this->acl->hasResourcePermission("\x6c\x69\x73\164", $this->table_name) || $this->acl->hasResourcePermission("\154\x69\163\x74\x5f\x61\154\x6c", $this->table_name))) { goto jsQr9; } goto m7B3q; jkm6w: jsQr9: goto At4I0; At4I0: goto MHVV7; goto VwtMJ; ehQIh: $this->is_listable = true; goto jkm6w; gnucn: HaoaI: goto NfTnd; FpQrQ: case "\x50\117\x53\124": goto R0pcx; R0pcx: if ($this->acl->hasSpecialPermission("\167\x72\x69\x74\145\137\x61\154\x6c")) { goto S12cC; } goto Z31tq; o2VJQ: S12cC: goto u8sW7; IBIYC: $this->addCallable("\x70\157\x73\164"); goto DitbQ; ITGJd: yg84A: goto hKwAn; k5otG: goto yg84A; goto o2VJQ; u8sW7: $this->addCallable("\x70\157\163\164"); goto ITGJd; DitbQ: r09pH: goto k5otG; Z31tq: if (!$this->acl->hasResourcePermission("\143\x72\x65\141\x74\145", $this->table_name)) { goto r09pH; } goto IBIYC; hKwAn: goto dy7No; goto fDLv0; fDLv0: case "\120\x55\124": goto qa5rQ; X4VhO: $this->addCallable("\160\165\164"); goto UR2ig; GzA67: goto dy7No; goto gez8V; bcz5U: $this->addCallable("\x70\x75\x74"); goto YkUKR; S439O: goto sVkSF; goto Un10X; eR1rH: if (!$this->acl->hasResourcePermission("\165\x70\144\141\164\145", $this->table_name)) { goto mWjJ1; } goto bcz5U; YkUKR: mWjJ1: goto S439O; UR2ig: sVkSF: goto GzA67; qa5rQ: if ($this->acl->hasSpecialPermission("\167\x72\x69\x74\x65\137\x61\x6c\x6c")) { goto ZCXgD; } goto eR1rH; Un10X: ZCXgD: goto X4VhO; gez8V: case "\120\101\x54\x43\x48": goto fQXwf; fQXwf: if ($this->acl->hasSpecialPermission("\167\162\151\x74\145\137\x61\x6c\154")) { goto R6J62; } goto Bu5zR; xBUkY: z0_xK: goto oawu_; Bu5zR: if (!$this->acl->hasResourcePermission("\165\x70\144\x61\x74\x65", $this->table_name)) { goto DgOc6; } goto gKeSq; NbP9C: R6J62: goto L1LDS; qAbqr: DgOc6: goto fyQ2V; gKeSq: $this->addCallable("\160\x61\x74\x63\150"); goto qAbqr; fyQ2V: goto z0_xK; goto NbP9C; oawu_: goto dy7No; goto qklxc; L1LDS: $this->addCallable("\160\141\164\143\150"); goto xBUkY; qklxc: case "\104\x45\x4c\x45\124\105": goto RL5Qv; crm8C: f6HyD: goto bI5Py; RL5Qv: if ($this->acl->hasSpecialPermission("\167\162\x69\164\145\x5f\x61\154\x6c")) { goto W7wRs; } goto JXhPc; dut8B: W7wRs: goto bAIYn; qJDD4: $this->addCallable("\144\145\154\145\164\145"); goto n_t9C; bAIYn: $this->addCallable("\144\145\154\145\x74\145"); goto crm8C; bI5Py: goto dy7No; goto fxQdm; zBb3S: goto f6HyD; goto dut8B; n_t9C: QxCf4: goto zBb3S; JXhPc: if (!$this->acl->hasResourcePermission("\144\145\154\145\x74\145", $this->table_name)) { goto QxCf4; } goto qJDD4; fxQdm: } goto BFTwT; qQyLS: if (!($vlMu8 !== NULL)) { goto GeYvO; } goto yZFkk; q6_0J: if ($this->model_name != null) { goto SrD1r; } goto SEfoQ; zE_Gp: veDFG: goto RJkvP; ICXr8: parent::__construct($FfQwU); goto qMoYY; yZFkk: switch ($_SERVER["\122\x45\121\x55\x45\x53\124\x5f\x4d\105\124\110\117\x44"]) { case "\107\x45\x54": goto iTwg7; iTwg7: if ($this->acl->hasResourcePermission("\154\x69\163\x74\137\141\x6c\154", $this->table_name)) { goto Ps9vy; } goto yETiB; xZ9qp: QL3YA: goto c2AYe; fBGeo: if (!($this->is_listable || $this->is_retrievable)) { goto wgDwY; } goto Hs5hD; kZkf5: if ($this->acl->hasResourcePermission("\x73\150\157\x77\137\141\154\154", $this->table_name)) { goto QL3YA; } goto rSHIj; Hs5hD: $this->addCallable("\147\x65\x74"); goto Ez7u7; oxPUM: goto apsOV; goto xZ9qp; qgihy: goto xpQZ5; goto HN8WJ; rSHIj: $this->is_retrievable = ($vlMu8 & 8 and 1) || ($vlMu8 & 32 and 1); goto oxPUM; Ez7u7: wgDwY: goto b_aGA; HN8WJ: Ps9vy: goto q_dkh; Fwvjs: apsOV: goto fBGeo; c2AYe: $this->is_retrievable = true; goto Fwvjs; Fcfr5: xpQZ5: goto kZkf5; q_dkh: $this->is_listable = true; goto Fcfr5; yETiB: $this->is_listable = ($vlMu8 & 16 and 1) || ($vlMu8 & 64 and 1); goto qgihy; b_aGA: goto NXOOZ; goto UedBT; UedBT: case "\120\117\123\124": goto NuaKC; yXNUW: UCdAz: goto Buc80; KDXyV: $this->addCallable("\x67\145\164"); goto yXNUW; Buc80: goto NXOOZ; goto uCJda; NuaKC: if (!($vlMu8 & 4 and 1)) { goto UCdAz; } goto KDXyV; uCJda: case "\x50\x55\x54": goto KvOkO; Qvl84: KbIgp: goto hq7b2; cmE2v: $this->addCallable("\160\x75\164"); goto Qvl84; KvOkO: if (!($vlMu8 & 2 and 1)) { goto KbIgp; } goto cmE2v; hq7b2: goto NXOOZ; goto wCElw; wCElw: case "\x50\101\x54\x43\110": goto dcYcM; EFXCq: $this->addCallable("\160\x75\164\143\x68"); goto H4tVL; dcYcM: if (!($vlMu8 & 2 and 1)) { goto xc2kF; } goto EFXCq; H4tVL: xc2kF: goto zPZiv; zPZiv: goto NXOOZ; goto gAWVm; gAWVm: case "\x44\105\114\105\x54\x45": goto lwPdP; lwPdP: if (!($vlMu8 & 1 and 1)) { goto iPrwR; } goto Hu9qr; SKyMw: goto NXOOZ; goto hLzw2; Hu9qr: $this->addCallable("\x64\x65\154\x65\164\x65"); goto rrgS3; rrgS3: iPrwR: goto SKyMw; hLzw2: } goto Y_W0h; HyuF3: goto zzE77; goto TJcpr; B6INi: if (!($this->tenantid !== null)) { goto tepWd; } goto ZdRnz; rb5FG: $vlMu8 = $this->acl->getTbPermissions($this->table_name, false); goto qQyLS; BFTwT: Np_hF: goto m9_Hf; g_4Ne: } function head(int $irQOM = null) { goto UK_A5; UK_A5: if (!method_exists($this, "\147\x65\x74")) { goto f7IGu; } goto oykdR; u8UtQ: f7IGu: goto XWANm; Pb7C7: ob_end_clean(); goto u8UtQ; RzVy_: $this->get($irQOM); goto Pb7C7; oykdR: ob_start(); goto RzVy_; XWANm: } function options() { } protected function getModelInstance($pLLvh = "\101\x53\123\x4f\x43", bool $HWfje = false) { goto KXwyR; aXYyH: return $gkQac; goto dZj7a; j2qaU: $gkQac = (new $EMK0l(true))->setFetchMode($pLLvh); goto RJDSd; RJDSd: DB::setModelInstance($gkQac); goto ociir; ociir: return $gkQac; goto t7Zr0; dZj7a: xdVfM: goto un43b; un43b: $EMK0l = get_model_namespace() . $this->model_name; goto j2qaU; KXwyR: static $gkQac; goto aDx5E; aDx5E: if (!($HWfje && !empty($gkQac))) { goto xdVfM; } goto aXYyH; t7Zr0: } static function getConnectable() { return static::$connect_to; } function get($irQOM = null) { goto UuA6B; nBlV8: try { goto iGegj; NlVzN: oifW9: goto uRSgV; BlXW3: $MGZFx = $this->instance->getIdName(); goto a9vuP; P9XJ1: $this->folder_access = $this->acl->hasSpecialPermission("\x72\x65\x61\144\x5f\141\154\x6c\137\146\x6f\154\x64\145\x72\x73") || $EUXjh[0]["\142\x65\x6c\157\156\x67\163\137\x74\157"] == Acl::getCurrentUid() || FoldersAclExtension::hasFolderPermission($this->folder, "\162"); goto fG8qN; vpmGU: nZzrY: goto hYJ_z; wgyXo: M3zDE: goto g8mdA; zo07U: $n8rUx = strtolower($X3LYN[1]); goto b_BY9; BIB5t: if (!isset($_GET["\x74\x65\156\141\x6e\x74\x69\144"])) { goto thbv0; } goto NktDG; QqbwH: if (!($N8jOy != NULL)) { goto wQ0Lo; } goto b5zuD; pN04k: if (empty($this->folder)) { goto vFben; } goto iRjW9; xF1VP: $AVXYR = $AVXYR[0]; goto Jf1R2; D9cpc: $YXb9D = $this->instance->inSchema([$this->instance->belongsTo()]); goto sMsod; kJ6Gd: DPs50: goto xUdM7; PQ4yJ: foreach ($X2gdm as $BzNeD => $A_YQZ) { goto s3npx; pFv_v: $N3TCw = $A_YQZ[1]; goto z6mQx; LF_Bx: unset($X2gdm[$BzNeD]); goto rN9wr; lF0jt: a3rGE: goto pEmfF; s3npx: if (!is_array($A_YQZ)) { goto v0NEo; } goto ddpdv; pEmfF: dcuBN: goto pFv_v; Bf5ZC: if (is_array($A_YQZ[1])) { goto pphYR; } goto Vh4b0; oHLPY: $IKou_ = explode("\54", $N3TCw); goto iTkp9; Z7VPG: foreach ($IKou_ as $lqbCf) { $LpsSF[$G0ldA][] = $lqbCf; j5yld: } goto jls12; jAJc_: v0NEo: goto lRhdk; iTkp9: $X2gdm[$BzNeD] = [$G0ldA, $IKou_]; goto Z7VPG; ddpdv: $G0ldA = $A_YQZ[0]; goto Bf5ZC; jls12: L6e1Z: goto PFYxz; cmA2z: MDiRt: goto GO2PR; z6mQx: if (!(strpos($N3TCw, "\54") !== false)) { goto F2pHR; } goto oHLPY; lRhdk: mYsfO: goto FV6h1; PFYxz: F2pHR: goto C2XmD; ktd0k: if (!($A_YQZ[1] == "\156\x75\x6c\154\41")) { goto a3rGE; } goto LF_Bx; QCwBm: foreach ($A_YQZ[1] as $VuuG4 => $N3TCw) { goto pMhHZ; EFkIl: mj3it: goto QL9h9; pMhHZ: switch ($VuuG4) { case "\x63\157\156\x74\x61\x69\156\163": goto ih2xZ; Bovx1: $W4yVg[] = $G0ldA; goto lZE1V; fMHza: goto LXaqZ; goto Sinwc; lZE1V: $LpsSF[$G0ldA][] = $N3TCw; goto fMHza; ih2xZ: $X2gdm[$BzNeD] = [$G0ldA, "\x25" . $N3TCw . "\45", "\x6c\x69\153\x65"]; goto Bovx1; Sinwc: case "\x6e\157\164\103\157\156\x74\x61\x69\156\x73": goto d0bDG; d0bDG: $X2gdm[$BzNeD] = [$G0ldA, "\45" . $N3TCw . "\45", "\x6e\x6f\x74\40\154\151\153\x65"]; goto XVKtZ; NJMtB: goto LXaqZ; goto INsdf; XVKtZ: $W4yVg[] = $G0ldA; goto QCaSq; QCaSq: $LpsSF[$G0ldA][] = $N3TCw; goto NJMtB; INsdf: case "\163\164\141\x72\x74\163\127\151\x74\150": goto aErYp; yjghe: $W4yVg[] = $G0ldA; goto mdMq8; aErYp: $X2gdm[$BzNeD] = [$G0ldA, $N3TCw . "\45", "\154\151\x6b\145"]; goto yjghe; mdMq8: $LpsSF[$G0ldA][] = $N3TCw; goto KEHDQ; KEHDQ: goto LXaqZ; goto FSQkF; FSQkF: case "\156\157\164\123\164\x61\162\x74\163\x57\151\164\x68": goto uM8bg; uM8bg: $X2gdm[$BzNeD] = [$G0ldA, $N3TCw . "\45", "\x6e\157\164\x20\x6c\x69\153\145"]; goto aJ100; GKtgz: $LpsSF[$G0ldA][] = $N3TCw; goto hb3TM; hb3TM: goto LXaqZ; goto kfxbl; aJ100: $W4yVg[] = $G0ldA; goto GKtgz; kfxbl: case "\x65\x6e\x64\x73\x57\x69\164\150": goto ZxWld; GC5In: $W4yVg[] = $G0ldA; goto H5Ajx; H5Ajx: $LpsSF[$G0ldA][] = $N3TCw; goto xeCih; ZxWld: $X2gdm[$BzNeD] = [$G0ldA, "\45" . $N3TCw, "\x6c\151\153\x65"]; goto GC5In; xeCih: goto LXaqZ; goto h5mRg; h5mRg: case "\156\157\164\x45\x6e\x64\163\127\x69\164\150": goto isDxs; xD_o4: goto LXaqZ; goto QFAJf; bkgeb: $LpsSF[$G0ldA][] = $N3TCw; goto xD_o4; qGxOE: $W4yVg[] = $G0ldA; goto bkgeb; isDxs: $X2gdm[$BzNeD] = [$G0ldA, "\45" . $N3TCw, "\x6e\157\164\40\154\151\x6b\145"]; goto qGxOE; QFAJf: case "\x69\156": goto ATbhP; DgX4G: $X2gdm[$BzNeD] = [$G0ldA, $IKou_, "\x49\116"]; goto Ql89Z; b62v2: RQTFz: goto X7LlU; X7LlU: lpG1D: goto tQJry; tQJry: goto LXaqZ; goto XtXmm; frHuG: $IKou_ = explode("\x2c", $N3TCw); goto DgX4G; Ql89Z: foreach ($IKou_ as $lqbCf) { $LpsSF[$G0ldA][] = $lqbCf; Tcft1: } goto b62v2; ATbhP: if (!(strpos($N3TCw, "\54") !== false)) { goto lpG1D; } goto frHuG; XtXmm: case "\156\x6f\164\111\156": goto sR5p7; yre_L: goto LXaqZ; goto NomwF; tfw7f: cwojj: goto ntyF4; sR5p7: if (!(strpos($N3TCw, "\54") !== false)) { goto PZtTV; } goto EMQ3Q; pz6r3: $X2gdm[$BzNeD] = [$G0ldA, $IKou_, "\x4e\x4f\124\x20\x49\116"]; goto EVASn; EVASn: foreach ($IKou_ as $lqbCf) { $LpsSF[$G0ldA][] = $lqbCf; YkuEm: } goto tfw7f; EMQ3Q: $IKou_ = explode("\54", $N3TCw); goto pz6r3; ntyF4: PZtTV: goto yre_L; NomwF: case "\142\145\x74\167\145\x65\156": goto mTmyq; aaFGq: $LpsSF[$G0ldA][] = $Dxw72; goto fZvjF; d1RjR: $wU7IW = max($IKou_[0], $IKou_[1]); goto iosjG; hzB1F: $IKou_ = explode("\54", $N3TCw); goto Mg8jm; Mg8jm: unset($X2gdm[$BzNeD]); goto Fu9yc; HOaKl: goto LXaqZ; goto d1zhf; iosjG: $X2gdm[] = [$G0ldA, $Dxw72, "\76\75"]; goto IgKt9; IgKt9: $X2gdm[] = [$G0ldA, $wU7IW, "\74\75"]; goto aaFGq; fZvjF: $LpsSF[$G0ldA][] = $wU7IW; goto ZU8RA; Fu9yc: $Dxw72 = min($IKou_[0], $IKou_[1]); goto d1RjR; mTmyq: if (!(substr_count($N3TCw, "\x2c") == 1)) { goto T2U36; } goto hzB1F; ZU8RA: T2U36: goto HOaKl; d1zhf: case "\156\157\164\x42\145\164\167\x65\x65\156": throw new \Exception("\117\x70\145\x72\x61\164\157\162\40\x6e\x6f\x74\102\x65\x74\x77\145\145\x6e\40\151\163\x20\156\157\x74\40\151\155\x70\154\x65\x6d\145\156\x74\145\144"); goto LXaqZ; default: goto Q3Mgr; uOucL: qg7Pz: goto lp2UR; Q3Mgr: $hEqsW = false; goto gwRO4; lp2UR: goto LXaqZ; goto dXa9y; P7UHN: imn_4: goto MZY2Z; MZY2Z: if ($hEqsW) { goto qg7Pz; } goto AfluJ; AfluJ: Factory::response()->sendError("\x55\156\x6b\156\x6f\x77\156\x20\157\x70\x65\x72\141\164\157\x72\40\47{$VuuG4}\x27", 400); goto uOucL; gwRO4: foreach ($P9UYo as $WV8xQ => $j8PT9) { goto p5Dr8; UHV1X: XP8YF: goto oQ45s; VIPSu: $LpsSF[$G0ldA][] = $N3TCw; goto ldjYi; p5Dr8: if (!($VuuG4 == $j8PT9)) { goto QjsOU; } goto AcxQh; AcxQh: $VuuG4 = $g5NY0[$WV8xQ]; goto yjKOK; yjKOK: unset($X2gdm[$BzNeD]); goto eioLL; eioLL: $X2gdm[] = [$G0ldA, $N3TCw, $VuuG4]; goto VIPSu; NdYKY: QjsOU: goto UHV1X; ldjYi: $hEqsW = true; goto Ysvcf; Ysvcf: goto imn_4; goto NdYKY; oQ45s: } goto P7UHN; dXa9y: } goto BT6BU; emaIN: LXaqZ: goto EFkIl; BT6BU: y67xJ: goto emaIN; QL9h9: } goto cmA2z; Vh4b0: if (!(count($A_YQZ) == 2)) { goto dcuBN; } goto ktd0k; aUh01: pphYR: goto QCwBm; rN9wr: $X2gdm[$BzNeD] = [$A_YQZ[0], NULL, "\111\123"]; goto lF0jt; GO2PR: XNJe0: goto jAJc_; C2XmD: goto XNJe0; goto aUh01; FV6h1: } goto Yxx9m; HQxjd: if (preg_match("\x2f\50\133\141\55\x7a\x5d\x2b\51\50\x5b\x3e\x3c\x3d\x5d\53\51\50\133\60\55\71\134\56\x5d\53\51\x2f\151", $Tl4OV, $X3LYN)) { goto GDrh9; } goto OJgMf; oNzyk: KwAl0: goto Iecd5; XEHVi: $Io7qZ = $this->instance->{$n8rUx}($OEhPe, $lD0MQ); goto dAgYv; qsGYM: k_lZ5: goto uGKFH; J5AWY: vFben: goto GBoON; dndCh: goto BN3vF; goto BHzUr; RHDyB: $Y3C3F = Arrays::shift($X2gdm, "\x70\x72\x65\x74\164\171"); goto kpljp; Yxx9m: pE5gR: goto ANW9O; ohR_F: foreach ($lQbwj as $JZV7U) { $this->instance->join($JZV7U); VdlHN: } goto OOjcG; CEo29: $EUXjh = $lSE6r->where(["\151\144" => $this->folder])->get(); goto CTTHr; fHl7n: $this->instance->hide($cg5Qc); goto DKrFE; Uuxoi: if (isset($n8rUx)) { goto VTrq1; } goto s8G2M; OJgMf: goto OGKsA; goto XrxgJ; Y512m: $ixD44 = function (&$pCBhz) { goto d82YC; d82YC: if ($pCBhz == NULL) { goto NpsKG; } goto dCKf6; sAQwL: $pCBhz = min($pCBhz, $this->config["\x70\141\147\x69\156\x61\x74\x6f\x72"]["\x6d\141\170\137\154\151\155\x69\164"]); goto B1XoY; njFO7: goto SrQCY; goto ObUW2; zE1Xr: goto uxTcf; goto wg_q7; B5FQn: $pCBhz = $this->config["\160\x61\147\151\156\141\x74\157\x72"]["\155\141\170\137\x6c\x69\x6d\x69\x74"]; goto njFO7; B1XoY: SrQCY: goto zE1Xr; wg_q7: NpsKG: goto I7Fpl; I7Fpl: $pCBhz = min($this->config["\x70\x61\x67\x69\156\141\164\x6f\162"]["\155\141\x78\x5f\x6c\151\155\x69\164"], $this->config["\160\x61\147\x69\156\x61\x74\x6f\162"]["\x64\x65\x66\x61\165\x6c\164\137\154\x69\x6d\x69\164"]); goto tfBED; dCKf6: if ($pCBhz != 0) { goto FpbzT; } goto B5FQn; ObUW2: FpbzT: goto sAQwL; tfBED: uxTcf: goto VJStX; VJStX: }; goto E2GWZ; R9xDK: $Y3C3F = !empty($Y3C3F) && !in_array($Y3C3F, ["\146\141\154\163\145", 0, "\157\x66\146"]); goto fyvuA; ETJ9S: DVRnT: goto JkocT; TT5Yk: if (!$YXb9D) { goto XDWBw; } goto aJX8W; srafb: foreach ((array) $VrTMG as $juoqd) { goto ir4wN; ir4wN: if (in_array($juoqd, $gKBYB)) { goto TEAYc; } goto NUIwF; O6nG1: XLOqT: goto VSkWu; QrHcI: TEAYc: goto O6nG1; NUIwF: Factory::response()->sendError("\125\x6e\x6b\156\x6f\167\x6e\40\x66\x69\145\x6c\x64\40\47{$juoqd}\47", 400); goto QrHcI; VSkWu: } goto Vsd0L; PZCKz: if (!($FOkBh !== true)) { goto YNFc0; } goto mfVI4; BpEHq: if (!($irQOM === null)) { goto RlGqc; } goto iumWN; Mt6GK: if (isset($Le2hv["\x70\141\147\x65\123\151\x7a\x65"])) { goto ts5qG; } goto ONnV8; ZoUkw: Factory::response()->sendError("\x46\157\x72\142\151\144\x64\145\156", 403, "\131\x6f\x75\40\x64\x6f\x6e\x27\164\x20\x68\141\x76\x65\40\160\x65\162\155\151\x73\x73\151\x6f\156\x20\x66\157\x72\x20\164\x68\145\40\146\x6f\x6c\x64\145\x72\x20{$this->folder}"); goto nGCjd; CP4FC: goto gTyFa; goto u72CL; eubPG: ts5qG: goto z1xOY; fyvuA: $Le2hv = Factory::request()->getQuery(); goto Nc8RY; WWmOD: $gKBYB = $this->instance->getAttr(); goto srafb; fQGGG: Xj2BI: goto JmqPk; iRjW9: if (!empty(static::$folder_field)) { goto rxpgp; } goto cB3kj; MW8Q_: $X2gdm[] = [$this->instance->belongsTo(), Acl::getCurrentUid()]; goto qsGYM; ZhZRA: zjk0g: goto G0KR2; rm1Kf: $zNg5J = http_protocol() . "\72\57\x2f" . $_SERVER["\110\x54\124\120\x5f\x48\x4f\x53\x54"] . $gJ7Xp . "\57" . $CjFy3 . "\x2f" . $this->table_name . "\77" . ($Le2hv = str_replace(["\x25\x35\102", "\45\x35\104", "\45\62\103"], ["\x5b", "\135", "\54"], http_build_query($Le2hv))); goto B6voI; gx_XF: $this->onGettingAfterCheck($irQOM); goto sGYku; qsWt5: OGKsA: goto QqbwH; gKJ1k: if (!($wxBeA != NULL)) { goto CexlR; } goto Un0qB; U9GFD: $knsY8 = 1; goto Fnl0P; yIOS8: HnKrl: goto ask8J; SV__G: GDrh9: goto etSD1; P36YH: $this->onGotFolder($irQOM, $K5ZNT, $this->folder); goto tMKZN; XJpSp: $bLvYH = Arrays::shift($X2gdm, "\160\x61\x67\145\123\151\172\x65"); goto LYnWX; b5zuD: $this->instance->orderBy($N8jOy); goto oUbJc; Iq_og: jIr6t: goto cm7e0; M01XY: if ($knsY8 != NULL || $bLvYH != NULL) { goto HIaO9; } goto WdAP_; v1_jC: $ixD44($pCBhz); goto COREn; FYYX9: $AVXYR = [$this->table_name => $Io7qZ]; goto cVh6K; z9QkR: goto B7c77; goto Iq_og; kLOty: $u7f0m = $bLvYH * ($knsY8 - 1); goto xzIIm; kwl8B: rxpgp: goto SjPzq; g5BR4: $AVXYR = Factory::response()->setPretty($Y3C3F); goto Db0eY; etSD1: $HyiQm = $X3LYN[1]; goto CbNv5; oLoCo: $bLvYH = (int) $bLvYH; goto ElKa1; uZFSy: CexlR: goto wWvBw; Avcnf: goto OGKsA; goto SV__G; L183h: goto yFcLk; goto m16In; gytnp: $PMGJD = ["\164\157\164\x61\154" => $K5ZNT, "\143\x6f\165\156\164" => count($Io7qZ), "\143\x75\x72\162\145\x6e\164\x50\x61\x67\x65" => $knsY8, "\164\157\164\141\154\120\x61\x67\x65\163" => $RWGDw, "\160\141\x67\145\x53\151\x7a\x65" => $bLvYH, "\x6e\x65\x78\x74\x55\162\x6c" => $zNg5J]; goto YmrHp; rse7P: $this->onGettingFolderBeforeCheck($irQOM, $this->folder); goto lBtnc; dAgYv: yFcLk: goto g5BR4; mSecM: if (!$this->config["\151\x6e\143\x6c\165\x64\145\137\145\156\x69\164\171\137\x6e\x61\155\x65"]) { goto Y2zEi; } goto FYYX9; rOt9O: $P9UYo = ["\x65\x71", "\x67\164", "\x67\164\145\161", "\x6c\x74\145\x71", "\154\x74", "\x6e\145\161"]; goto GmrF1; Iv6AK: $X2gdm[] = [$this->instance->belongsTo(), NULL, "\111\123"]; goto BMV6f; Ll_fr: goto LvnH_; goto lULTo; LSPsQ: $X2gdm[] = [$this->instance->belongsTo(), $EUXjh[0][$this->instance->belongsTo()]]; goto wyMqQ; p3MlR: B7c77: goto L183h; JIHUf: $JN32S = $X3LYN[4]; goto q7zVK; aJX8W: if (!(!$this->acl->hasSpecialPermission("\x72\x65\x61\x64\137\141\154\154") && !$this->acl->hasResourcePermission("\154\x69\163\x74\x5f\141\x6c\x6c", $this->table_name))) { goto ogIqg; } goto JOocF; VutTc: Factory::response()->sendError("\106\x6f\162\142\151\144\144\145\x6e", 403, "\146\x6f\154\144\145\x72\137\146\x69\x65\154\x64\x20\151\x73\40\165\156\144\145\146\151\x6e\x65\144"); goto fQGGG; f0Hxr: YDeZO: goto whP0W; lQNP6: UaCUZ: goto WkX6M; aNKTI: jmrsz: goto WtY3G; qYDTV: response()->send($AVXYR); goto wYjN1; Eprc0: $Io7qZ = $this->instance->get(); goto z9QkR; neGC3: if (!$this->folder) { goto WWPiV; } goto P36YH; WkX6M: $W4yVg = []; goto hUqyF; WdAP_: $pCBhz = Arrays::shift($X2gdm, "\x6c\x69\x6d\151\x74"); goto Tevpo; Db0eY: $K5ZNT = null; goto Uuxoi; NKvLv: foreach ($X2gdm as $riNgW => $ah5bu) { goto NHGFE; DNtVQ: IhGRo: goto oPXi2; AzbBn: if (!(empty(static::$connect_to) || !in_array($Bioy8, static::$connect_to))) { goto XSh5_; } goto u9IaN; h3ltW: XSh5_: goto E8_38; wtN_C: if (in_array($hPCcr, $Rn2bO)) { goto IhGRo; } goto qFgXq; NKAjy: $hPCcr = $X3LYN[2]; goto AzbBn; kvbe_: $X2gdm[$riNgW][0] = "\137\x5f{$Bioy8}\137\x5f\56{$hPCcr}"; goto kxEiw; u9IaN: response()->sendError("\x45\156\x74\151\164\171\40\47{$Bioy8}\x27\x20\151\163\x20\156\157\164\40\141\166\141\x69\x6c\x61\x62\x6c\x65\40\x61\x73\x20\163\x75\142\x72\x65\163\157\x75\162\143\145", 400); goto h3ltW; gqFiz: if (in_array($lSE6r, $gKBYB)) { goto nzM68; } goto qgoY_; dZ0Dp: response()->sendError("\125\x6e\153\x6e\x6f\167\x6e\40\146\x69\x65\x6c\x64\x20\x27{$ah5bu[0]}\47", 400); goto B3ruq; E8_38: $r_RA0 = get_schema($Bioy8); goto mBnKg; Chf_K: nzM68: goto PurLN; VCFq4: $lQbwj[] = "{$Bioy8}\40\141\x73\40\x5f\137{$Bioy8}\x5f\x5f"; goto kvbe_; mBnKg: $Rn2bO = array_keys($r_RA0["\x61\164\x74\162\x5f\164\x79\x70\x65\163"]); goto wtN_C; qFgXq: response()->sendError("\105\156\164\x69\x74\x79\x20\x27{$Bioy8}\x27\40\x64\x6f\145\163\40\x6e\157\x74\x20\150\x61\x76\145\40\141\40\146\151\145\154\144\40\x6e\x61\x6d\x65\144\x20\x27{$hPCcr}\47", 400); goto DNtVQ; B3ruq: goto bePcr; goto IuOa8; H8sP6: $Bioy8 = $X3LYN[1]; goto NKAjy; kxEiw: bePcr: goto Chf_K; oPXi2: $this->instance->qualify(); goto VCFq4; IuOa8: z9zYj: goto H8sP6; NHGFE: $lSE6r = $ah5bu[0]; goto gqFiz; qgoY_: if (preg_match("\57\50\133\x61\55\172\x30\55\x39\137\55\135\x2b\51\x5c\x2e\50\x5b\x61\55\x7a\60\x2d\71\x5f\55\135\53\x29\57\151", $lSE6r, $X3LYN)) { goto z9zYj; } goto dZ0Dp; PurLN: c3ebp: goto KAdd5; KAdd5: } goto vpmGU; LS3xC: gvP08: goto ZhZRA; iumWN: $FOkBh = (new Validator())->setRequired(false)->ignoreFields($W4yVg)->validate($this->instance->getRules(), $LpsSF); goto PZCKz; grbgQ: if (empty($VrTMG)) { goto wAbr1; } goto DOWNc; MhYIH: if (isset($n8rUx)) { goto KenUm; } goto Mq1DI; igH4F: if (!(!$this->acl->hasSpecialPermission("\x72\x65\x61\x64\x5f\x61\154\154") && !$this->acl->hasResourcePermission("\163\150\x6f\167\137\141\x6c\x6c", $this->table_name))) { goto IThtO; } goto Iv6AK; nGCjd: c5hUV: goto gAioV; LkEJg: $this->webhook("\154\151\163\164", $Io7qZ); goto mSecM; Fnl0P: qnoyQ: goto q05q9; Un0qB: $wxBeA = explode("\x2c", $wxBeA); goto yyHZH; JkocT: if (!isset($Le2hv["\160\x61\x67\x65"])) { goto Wz2be; } goto bBJnh; b4wH9: XDWBw: goto wgyXo; FIlfj: Factory::response()->send($AVXYR); goto UmKvz; vhfaV: $Io7qZ = $this->getSubResources($this->table_name, static::$connect_to, $this->instance, $this->tenantid); goto p3MlR; fYfba: $X2gdm = Arrays::nonassoc($X2gdm); goto rOt9O; is8IF: ogIqg: goto b4wH9; v6vUI: EHr6m: goto Y3_E2; ztx3s: VTrq1: goto neGC3; Xo2Sn: $AVXYR = $Io7qZ[0]; goto AneMu; jWIOg: if (!empty($VYXrE) || !empty($QfSF2)) { goto TVcwk; } goto Xo2Sn; P18mh: Qm8bn: goto vhfaV; tA57A: wAbr1: goto MhYIH; fVgRO: $this->onGot($irQOM, 1); goto HBXY9; XrxgJ: Y4dWI: goto kXsdH; CbNv5: $ocet9 = $X3LYN[2]; goto CvF70; eBFPW: $X2gdm[$this->instance->createdBy()] = Acl::getCurrentUid(); goto bEc4u; Kerer: if (preg_match("\x2f\x5b\141\x2d\x7a\135\53\134\x28\133\x61\x2d\172\134\x2a\x5d\x2b\x5c\51\x20\x61\x73\x20\50\133\141\55\x7a\135\x2b\x29\57\151", $duYEh, $X3LYN)) { goto zUZPx; } goto huX8p; WlagN: if (!$YXb9D) { goto EHr6m; } goto igH4F; VGX4u: Factory::response()->sendError("\106\157\x6c\144\x65\x72\x20\x6e\x6f\164\40\x66\x6f\x75\x6e\144", 404); goto e1Hha; wYjN1: goto A2q2a; goto MYrv5; WtY3G: $X2gdm[] = [static::$folder_field, NULL, "\x49\x53"]; goto FvHf9; ask8J: if ($knsY8 + 1 <= $RWGDw) { goto NLrb4; } goto A1F1y; WTH3l: if (!($pCBhz != NULL)) { goto FcPGN; } goto NWu5S; ZOShz: if (!($knsY8 == NULL)) { goto qnoyQ; } goto U9GFD; Y3_E2: TrHSC: goto hSfdg; cB3kj: Factory::response()->sendError("\106\157\x72\x62\x69\x64\144\x65\156", 403, "\47\146\x6f\x6c\x64\x65\162\x5f\146\x69\145\x6c\144\x27\x20\151\x73\x20\165\156\144\x65\146\151\156\145\x64"); goto kwl8B; y9Qz1: if (!($bLvYH != null)) { goto qGL11; } goto oLoCo; g8_wi: if (!empty(static::$folder_field)) { goto Xj2BI; } goto VutTc; YmrHp: $AVXYR->setPaginator($PMGJD); goto ztx3s; b_BY9: $OEhPe = $X3LYN[2]; goto Kerer; huX8p: $lD0MQ = NULL; goto CP4FC; CvF70: $JN32S = $X3LYN[3]; goto QpxbT; SjPzq: $X2gdm[] = [static::$folder_field, $EUXjh[0]["\156\x61\x6d\x65"]]; goto gDpj7; KMXIc: T9QjF: goto hyvrp; bTveZ: JdwyC: goto R9xDK; BMV6f: IThtO: goto v6vUI; gDpj7: $X2gdm[] = [$this->instance->belongsTo(), $EUXjh[0][$this->instance->belongsTo()]]; goto Z4y1E; QpxbT: $this->instance->having([$HyiQm, $JN32S, $ocet9]); goto qsWt5; hAoTL: if (!isset($Le2hv["\154\x69\155\151\164"])) { goto DVRnT; } goto EfJZG; sKP1y: Wz2be: goto Mt6GK; DOWNc: $this->instance->select($VrTMG); goto tA57A; tMKZN: WWPiV: goto gVIsR; pjjKC: A2q2a: goto zwPHQ; GmrF1: $g5NY0 = ["\x3d", "\76", "\76\x3d", "\x3c\75", "\74", "\41\x3d"]; goto PQ4yJ; u72CL: zUZPx: goto jarH9; oO13L: $cg5Qc = $cg5Qc != NULL ? explode("\54", $cg5Qc) : NULL; goto MDx1S; JmqPk: $X2gdm[] = [static::$folder_field, $EUXjh[0]["\x6e\141\x6d\x65"]]; goto LSPsQ; XVasw: $this->onGettingAfterCheck2($irQOM); goto fYfba; ra01M: FX2s3: goto GPZYO; Djiyq: FcPGN: goto nVq6w; LYnWX: if (!($knsY8 != null)) { goto FHKZ1; } goto hSZzF; hyvrp: nfFPP: goto BpEHq; MDx1S: foreach ((array) $cg5Qc as $juoqd) { goto qvzRV; qvzRV: if (in_array($juoqd, $gKBYB)) { goto J5w7y; } goto QadgF; iBnaV: J5w7y: goto CFAVC; CFAVC: BzEdY: goto ZFWwr; QadgF: Factory::response()->sendError("\x55\x6e\153\x6e\x6f\x77\x6e\40\x66\x69\145\154\144\40\x27{$juoqd}\47\x20\151\x6e\x20\145\x78\x63\154\x75\144\145", 400); goto iBnaV; ZFWwr: } goto lQNP6; ORhuq: if (empty($Io7qZ)) { goto G4vkd; } goto fVgRO; YSAGU: xCJm0: goto aVLMf; w7d_S: naLwh: goto pjjKC; FvHf9: LvnH_: goto LS3xC; COREn: $bLvYH = $pCBhz; goto dndCh; zxJo6: $Le2hv["\x5f\x72\x65\154\x61\x74\145\x64"] = $_GET["\x5f\162\145\154\141\164\145\144"]; goto kJ6Gd; ElKa1: qGL11: goto M01XY; yyHZH: $this->instance->groupBy($wxBeA); goto uZFSy; CJm9i: $X2gdm[] = [$this->instance->belongsTo(), Acl::getCurrentUid()]; goto KMXIc; NHxlr: $this->onGettingFolderAfterCheck($irQOM, $this->folder); goto bTveZ; OOjcG: NDuiX: goto JhFCo; mfVI4: throw new InvalidValidationException(json_encode($FOkBh)); goto kOBvC; m16In: KenUm: goto XEHVi; DGnb2: $Le2hv["\x70\141\x67\x65"] = $knsY8 + 1; goto BIB5t; CTTHr: if (!(count($EUXjh) == 0 || $EUXjh[0]["\164\142"] != $this->table_name)) { goto h1d61; } goto VGX4u; kUR60: $X2gdm[$this->instance->belongsTo()] = Acl::getCurrentUid(); goto vkr3p; E2GWZ: $knsY8 = Arrays::shift($X2gdm, "\x70\141\x67\x65"); goto XJpSp; bBJnh: unset($Le2hv["\160\141\147\145"]); goto sKP1y; g8mdA: $lQbwj = []; goto NKvLv; lBtnc: $lSE6r = DB::table("\146\x6f\154\x64\145\x72\x73")->assoc(); goto CEo29; JhFCo: BEcgA: goto pN04k; bEc4u: FCnIc: goto wT23z; ECkcl: $LpsSF = []; goto gx_XF; Z6mMX: S0euW: goto ooSB5; A1F1y: $zNg5J = "\156\165\x6c\x6c"; goto SMS2W; gGscM: if (empty($this->folder)) { goto JdwyC; } goto NHxlr; q7zVK: $this->instance->having(["{$S4HTK}\50{$tEKiw}\51", $JN32S, $ocet9]); goto Avcnf; R2BK3: $MGZFx = $this->instance->getSchema()["\151\x64\137\156\141\155\x65"]; goto t0Vnp; vdI12: $X2gdm[] = ["\147\165\x65\x73\164\x5f\x61\143\x63\145\163\x73", 1]; goto L5GiB; c2IP8: $N8jOy = Arrays::shift($X2gdm, "\x6f\162\x64\145\162\x42\x79"); goto XVasw; dXvtP: $VrTMG = Arrays::shift($X2gdm, "\x66\151\x65\x6c\x64\163"); goto g3vqv; SMS2W: goto QsK1n; goto R5wUU; PAauU: $ixD44($bLvYH); goto ZOShz; Vc7hm: RlGqc: goto gGscM; aVLMf: fGXis: goto D9cpc; R5wUU: NLrb4: goto DGnb2; e1Hha: h1d61: goto P9XJ1; NktDG: $Le2hv["\164\x65\x6e\141\x6e\164\x69\144"] = $_GET["\x74\x65\x6e\x61\x6e\x74\151\x64"]; goto wboz4; oUbJc: wQ0Lo: goto WTH3l; cm7e0: if (!(!empty($QfSF2) && !empty($QfSF2[0]))) { goto Qm8bn; } goto lofbC; kpljp: foreach ($X2gdm as $BzNeD => $A_YQZ) { goto mxjWn; l2W5a: UokqD: goto wDvgm; mxjWn: if (!($A_YQZ == "\116\x55\x4c\x4c" || $A_YQZ == "\156\x75\x6c\x6c")) { goto UokqD; } goto FKaj_; wDvgm: RoTIZ: goto TFA5R; FKaj_: $X2gdm[$BzNeD] = NULL; goto l2W5a; TFA5R: } goto Z6mMX; znrHP: if ($irQOM != null) { goto dmoeP; } goto ucvEa; cUFeh: $Tl4OV = Arrays::shift($X2gdm, "\x68\141\166\151\156\147"); goto Y512m; pUrPZ: if (!isset($_GET["\x5f\162\145\154\x61\164\145\144"])) { goto DPs50; } goto zxJo6; wboz4: thbv0: goto pUrPZ; ONnV8: $Le2hv["\160\x61\147\x65\123\151\172\145"] = $bLvYH; goto eubPG; xUdM7: $gJ7Xp = $this->config["\x52\105\115\117\x56\105\x5f\x41\x50\x49\x5f\123\114\x55\107"] ? '' : "\57\x61\160\x69"; goto rm1Kf; wWvBw: if (preg_match("\57\x28\133\141\x2d\x7a\x5d\x2b\51\x5c\x28\50\133\141\x2d\x7a\134\52\135\53\51\x5c\x29\50\133\76\74\x3d\135\x2b\51\50\133\60\x2d\x39\x5c\56\135\53\x29\57\x69", $Tl4OV, $X3LYN)) { goto Y4dWI; } goto HQxjd; s8G2M: $K5ZNT = (int) DB::table($this->table_name)->column()->when(!empty($lQbwj), function ($QLFhn) use($lQbwj) { goto JTJZI; JTJZI: $QLFhn->qualify(); goto Ug91B; Ug91B: foreach ($lQbwj as $JZV7U) { $QLFhn->join($JZV7U); CYUS2: } goto fZTJu; fZTJu: TBvNX: goto ntPMm; ntPMm: })->where($X2gdm)->count(); goto KBDDi; t0Vnp: if (($VYXrE || !empty($QfSF2[0])) && (empty($VrTMG) || in_array($MGZFx, $VrTMG))) { goto jIr6t; } goto Eprc0; uRSgV: $this->instance->where($X2gdm); goto gKJ1k; z1xOY: if (!preg_match("\x2f\50\x6d\x69\x6e\174\x6d\x61\x78\x7c\x73\165\155\174\x61\x76\x67\174\143\x6f\165\x6e\164\51\134\x28\x28\x5b\x61\x2d\172\x5c\x2a\x5d\x2b\x29\x5c\51\50\40\141\x73\40\133\141\x2d\172\135\53\x29\77\57\151", $duYEh, $X3LYN)) { goto oifW9; } goto zo07U; wQdMk: foreach ($Jh10l as $lSE6r) { goto rt6GL; a8wT4: $RRERX = explode("\x2c", $X2gdm[$lSE6r]); goto sad3o; rt6GL: if (!isset($X2gdm[$lSE6r])) { goto H5hlz; } goto goGdp; taCLq: VDrxm: goto tmfoH; fSQui: cPXvA: goto KojcA; MJJm6: rxgOB: goto ZDG00; FvZA1: $X2gdm[$lSE6r] = Acl::getCurrentUid(); goto jJMmn; PKTVn: hRQBM: goto iBdrg; jJMmn: goto jJzV8; goto MJJm6; ZDG00: foreach ($X2gdm[$lSE6r] as $VuuG4 => $teuUE) { goto t2b7Z; hqTgF: jfw9G: goto N5uzh; AXWVD: jeDHG: goto BUJGQ; t2b7Z: if ($teuUE == "\155\145") { goto n9vUs; } goto y2lK2; dhp0g: goto wjoA0; goto aM2bm; aM2bm: n9vUs: goto Drc2i; LkAbb: foreach ($RRERX as $LIYNT => $R2M4J) { goto h4RSj; ilk59: YzOsL: goto z3z2u; z3z2u: wbNns: goto xXRkr; N05uv: $RRERX[$LIYNT] = Acl::getCurrentUid(); goto ilk59; h4RSj: if (!($R2M4J == "\x6d\x65")) { goto YzOsL; } goto N05uv; xXRkr: } goto hqTgF; y2lK2: $RRERX = explode("\x2c", $teuUE); goto t9G3d; N5uzh: o5BDa: goto xaUWO; Drc2i: $X2gdm[$lSE6r][$VuuG4] = Acl::getCurrentUid(); goto U0dwt; t9G3d: if (!(count($RRERX) > 1)) { goto o5BDa; } goto LkAbb; xaUWO: $X2gdm[$lSE6r][$VuuG4] = implode("\54", $RRERX); goto dhp0g; U0dwt: wjoA0: goto AXWVD; BUJGQ: } goto PKTVn; iBdrg: jJzV8: goto f1cGZ; XNi4n: goto jJzV8; goto CqNwv; sad3o: if (!(count($RRERX) > 1)) { goto jokOX; } goto VvpjI; goGdp: if ($X2gdm[$lSE6r] == "\x6d\x65") { goto t757M; } goto EfhS7; EfhS7: if (is_array($X2gdm[$lSE6r])) { goto rxgOB; } goto a8wT4; VvpjI: foreach ($RRERX as $LIYNT => $teuUE) { goto zbNxi; UmcBL: RZcXj: goto Z_cA_; oeQTp: MqAHO: goto UmcBL; zbNxi: if (!($teuUE == "\x6d\145")) { goto MqAHO; } goto pgcNV; pgcNV: $RRERX[$LIYNT] = Acl::getCurrentUid(); goto oeQTp; Z_cA_: } goto fSQui; f1cGZ: H5hlz: goto taCLq; KojcA: jokOX: goto lE9u5; CqNwv: t757M: goto FvZA1; lE9u5: $X2gdm[$lSE6r] = implode("\54", $RRERX); goto XNi4n; tmfoH: } goto f0Hxr; k1O1V: $cg5Qc = Arrays::shift($X2gdm, "\145\170\x63\154\x75\x64\x65"); goto oO13L; DKrFE: j9muM: goto RHDyB; q05q9: $pCBhz = $bLvYH; goto kLOty; fG8qN: if ($this->folder_access) { goto c5hUV; } goto ZoUkw; gAioV: WVCtu: goto znrHP; MYrv5: dmoeP: goto Bjq6d; RGQk0: if (empty($this->folder)) { goto FX2s3; } goto g8_wi; gVIsR: $this->onGot($irQOM, $K5ZNT); goto LkEJg; DNEZj: $tEKiw = $X3LYN[2]; goto Ohbsm; GBoON: if (!(!$this->acl->isGuest() && $YXb9D && !$this->acl->hasSpecialPermission("\162\x65\x61\144\x5f\x61\x6c\x6c") && !$this->acl->hasResourcePermission("\x6c\x69\x73\164\x5f\141\x6c\x6c", $this->table_name))) { goto T9QjF; } goto CJm9i; D2lX3: ObU00: goto grbgQ; hSfdg: $Io7qZ = $this->instance->where($X2gdm)->get($VrTMG); goto ORhuq; B6voI: QsK1n: goto gytnp; zz3aF: $AVXYR = $this->getSubResources($this->table_name, static::$connect_to, $this->instance, $this->tenantid); goto xF1VP; H9ITd: if (!$this->instance->inSchema([$this->instance->belongsTo()])) { goto Hx5Gs; } goto kUR60; kOBvC: YNFc0: goto Vc7hm; Mq1DI: $VYXrE = $VYXrE != "\60" && $VYXrE != "\x66\x61\154\x73\x65"; goto R2BK3; sGYku: if (!($this->ask_for_deleted && !$this->acl->hasSpecialPermission("\x72\x65\141\x64\137\x61\154\154\137\x74\x72\141\x73\x68\143\141\156"))) { goto fWzr2; } goto H9ITd; KBDDi: $RWGDw = ceil($K5ZNT / $pCBhz); goto GFxdC; G0KR2: if (!$this->acl->isGuest()) { goto TrHSC; } goto WlagN; whP0W: if (!(isset($X2gdm[$this->instance->createdBy()]) && $X2gdm[$this->instance->createdBy()] == "\155\x65")) { goto FCnIc; } goto eBFPW; cVh6K: Y2zEi: goto qYDTV; Vsd0L: aESHf: goto k1O1V; xzIIm: BN3vF: goto c2IP8; JOocF: $X2gdm[] = [$this->instance->belongsTo(), NULL, "\111\x53"]; goto is8IF; Ohbsm: $ocet9 = $X3LYN[3]; goto JIHUf; hYJ_z: if (empty($lQbwj)) { goto BEcgA; } goto ohR_F; jarH9: $lD0MQ = $X3LYN[1]; goto b2Gla; HBXY9: $this->webhook("\x73\150\157\167", $Io7qZ[0], $irQOM); goto jWIOg; Tevpo: $u7f0m = Arrays::shift($X2gdm, "\157\x66\x66\x73\145\164", 0); goto v1_jC; AneMu: goto FhTps; goto ys0JT; wyMqQ: goto zjk0g; goto ra01M; iQZO2: if (!($YXb9D && !$this->acl->hasSpecialPermission("\162\145\141\x64\137\141\x6c\154") && !$this->acl->hasResourcePermission("\x73\150\157\167\x5f\x61\154\154", $this->table_name))) { goto k_lZ5; } goto MW8Q_; Bjq6d: $X2gdm = [[$MGZFx, $irQOM]]; goto RGQk0; LKviQ: FHKZ1: goto y9Qz1; lofbC: static::$connect_to = array_intersect(static::$connect_to, $QfSF2); goto P18mh; pJv5q: $knsY8 = ceil($u7f0m / $pCBhz) + 1; goto yIOS8; tjei3: unset($Le2hv["\x6f\x66\146\x73\x65\164"]); goto GKg00; lULTo: LJ0XQ: goto vdI12; a9vuP: if (!($irQOM == null)) { goto fGXis; } goto UaY8I; daTo9: G4vkd: goto aDbRA; sMsod: $UprTE = Arrays::shift($X2gdm, "\161"); goto dXvtP; ys0JT: TVcwk: goto zz3aF; ANW9O: if (!$this->acl->isGuest()) { goto M3zDE; } goto TT5Yk; aDbRA: Factory::response()->sendError("\116\157\x74\x20\146\157\x75\156\x64", 404, $irQOM != null ? "\122\x65\147\151\163\164\145\162\40\167\x69\x74\x68\40\x69\144\x3d{$irQOM}\40\x69\156\x20\164\x61\x62\x6c\x65\x20\47{$this->table_name}\47\x20\x77\141\163\40\156\157\x74\x20\146\157\x75\x6e\x64" : ''); goto w7d_S; L5GiB: goto LvnH_; goto aNKTI; UmKvz: goto naLwh; goto daTo9; UaY8I: $Jh10l = [$this->instance->createdBy(), $this->instance->updatedBy(), $this->instance->deletedBy(), $this->instance->belongsTo(), "\x75\163\145\162\x5f\151\144"]; goto wQdMk; b2Gla: gTyFa: goto NlVzN; BHzUr: HIaO9: goto PAauU; iGegj: $this->instance = $this->getModelInstance(); goto ECkcl; nVq6w: if (!($u7f0m != NULL)) { goto ObU00; } goto BXhlC; kXsdH: $S4HTK = strtoupper($X3LYN[1]); goto DNEZj; Iecd5: if ($this->instance->inSchema(["\x67\165\145\163\x74\x5f\x61\x63\x63\x65\163\163"])) { goto LJ0XQ; } goto LhZVO; LhZVO: if (!empty(static::$folder_field)) { goto jmrsz; } goto Ll_fr; g3vqv: $VrTMG = $VrTMG != NULL ? explode("\54", $VrTMG) : NULL; goto WWmOD; Z4y1E: goto nfFPP; goto J5AWY; ooSB5: if (!($this->folder !== null)) { goto WVCtu; } goto rse7P; Jf1R2: FhTps: goto FIlfj; GFxdC: if (!($knsY8 == NULL)) { goto HnKrl; } goto pJv5q; GPZYO: if ($this->acl->isGuest()) { goto KwAl0; } goto iQZO2; hUqyF: if (!($cg5Qc != null)) { goto j9muM; } goto fHl7n; GKg00: HDKVH: goto hAoTL; hSZzF: $knsY8 = (int) $knsY8; goto LKviQ; BXhlC: $this->instance->offset($u7f0m); goto D2lX3; BxBEk: $wxBeA = Arrays::shift($X2gdm, "\147\x72\x6f\x75\160\102\x79"); goto cUFeh; vkr3p: Hx5Gs: goto Dd20k; ucvEa: $duYEh = Arrays::shift($X2gdm, "\160\x72\x6f\x70\163"); goto BxBEk; uGKFH: goto gvP08; goto oNzyk; wT23z: foreach ($X2gdm as $lSE6r => $N3TCw) { goto HQm1Q; kwBeb: XQoQC: goto EjRnP; Q59WX: cwNGs: goto kwBeb; j1V2Q: $LpsSF[$lSE6r] = $N3TCw; goto Q59WX; HQm1Q: if (!(!is_array($N3TCw) && strpos($N3TCw, "\x2c") === false)) { goto cwNGs; } goto j1V2Q; EjRnP: } goto YSAGU; Nc8RY: if (!isset($Le2hv["\x6f\x66\x66\163\x65\164"])) { goto HDKVH; } goto tjei3; EfJZG: unset($Le2hv["\x6c\x69\x6d\151\x74"]); goto ETJ9S; Dd20k: fWzr2: goto BlXW3; NWu5S: $this->instance->limit($pCBhz); goto Djiyq; zwPHQ: } catch (InvalidValidationException $La_BJ) { response()->sendError("\x56\x61\154\151\144\141\164\x69\x6f\x6e\40\x45\x72\x72\x6f\162", 400, json_decode($La_BJ->getMessage())); } catch (SqlException $La_BJ) { response()->sendError("\x53\x51\x4c\40\x45\170\x63\x65\160\x74\x69\157\x6e", 500, json_decode($La_BJ->getMessage())); } catch (\PDOException $La_BJ) { $Rm_Ny = DB::getCurrentDB(); response()->sendError("\x50\x44\117\x20\105\170\143\145\x70\x74\x69\x6f\156", 500, $La_BJ->getMessage() . "\x20\55\40" . $this->instance->getLog() . "\40\55\x20\144\141\x74\141\x62\x61\163\x65\x3a\x20\x27{$Rm_Ny}\47\40\55\40\164\x61\x62\154\x65\x3a\x20\x27{$this->instance->getTableName()}\x27"); } catch (\Exception $La_BJ) { response()->sendError($La_BJ->getMessage()); } goto xYzC2; NU8S3: $iHY14 = Factory::request()->shiftQuery("\x5f\x72\x75\154\145\x73"); goto Hn0aH; VCzHd: $VYXrE = Factory::request()->shiftQuery("\x5f\x72\x65\154\141\x74\x65\x64"); goto J4LUU; Mbmut: Factory::response()->sendError("\125\156\141\165\164\x68\157\162\151\172\x65\x64", 401, "\x59\157\x75\40\x61\x72\x65\40\x6e\157\164\40\x61\154\154\x6f\167\145\x64\40\x74\x6f\40\x72\145\x74\162\151\145\x76\145"); goto m5FRg; Hn0aH: if (empty($q7t4C)) { goto kVtG4; } goto gOwhY; eihwp: $this->folder = Arrays::shift($X2gdm, "\x66\157\x6c\144\x65\x72"); goto XOF6w; Mmuyj: if (!($irQOM != null && !$this->is_retrievable)) { goto SS2xE; } goto Mbmut; XOF6w: $this->onGettingBeforeCheck($irQOM); goto vHPOs; zH8vd: $this->id = $irQOM; goto eihwp; UuA6B: global $CjFy3; goto sqHxI; vHPOs: if (!($irQOM == null && !$this->is_listable)) { goto mAzuA; } goto HIrSX; IzPWS: kVtG4: goto u209O; J4LUU: $QfSF2 = Factory::request()->shiftQuery("\151\x6e\143\x6c\165\x64\x65"); goto UOZJF; DSIsK: $AVXYR = $yRyqZ::get(); goto ZGtM8; Y2xvS: $yRyqZ = get_schema_name($this->table_name); goto DSIsK; ZGtM8: return ["\162\x75\x6c\x65\163" => $AVXYR["\x72\x75\154\145\163"]]; goto M1q_T; sqHxI: $q7t4C = Factory::request()->shiftQuery("\137\x73\x63\150\145\155\x61"); goto NU8S3; HIrSX: Factory::response()->sendError("\x55\156\x61\x75\x74\150\157\162\x69\x7a\x65\x64", 403, "\x59\157\165\x20\141\x72\145\40\156\x6f\164\x20\141\154\x6c\157\167\145\x64\x20\x74\x6f\40\154\151\163\164\x21\41\41"); goto cOc3c; u209O: if (empty($iHY14)) { goto jXVzp; } goto Y2xvS; M1q_T: jXVzp: goto VCzHd; UOZJF: $X2gdm = Factory::request()->getQuery(); goto xVT5a; xVT5a: $QfSF2 = explode("\x2c", $QfSF2); goto zH8vd; gOwhY: $yRyqZ = get_schema_name($this->table_name); goto mLVyL; nmEwQ: return $AVXYR; goto IzPWS; mLVyL: $AVXYR = $yRyqZ::get(); goto nmEwQ; m5FRg: SS2xE: goto nBlV8; cOc3c: mAzuA: goto Mmuyj; xYzC2: } function post() { goto nEIEZ; W7g3X: $this->instance = $this->getModelInstance(); goto B1y2I; lV1nT: Factory::response()->sendError("\x49\156\x76\141\154\x69\x64\x20\112\x53\117\x4e", 400); goto dCWK7; dCWK7: t6naZ: goto W7g3X; G7yzK: $this->folder = $this->folder = $LpsSF["\x66\157\154\144\x65\x72"] ?? null; goto xo0Rx; QyAHb: if (!empty($LpsSF)) { goto t6naZ; } goto lV1nT; nEIEZ: $LpsSF = Factory::request()->getBody(false); goto QyAHb; xo0Rx: try { goto vw43E; SL9wp: if (!$this->instance->inSchema([$this->instance->updatedBy()])) { goto fMUPK; } goto cw0V3; z23Yl: $this->onPostingBeforeCheck($irQOM, $LpsSF); goto qtZ32; Kf8LF: $this->onPostFolder($vJnlE, $LpsSF, $this->folder); goto Q5RRT; D0uRx: if (!empty(static::$folder_field)) { goto a3QCl; } goto yZosW; Y_hzc: try { goto gKIfE; pTpvX: $UVVmf = []; goto sdUNH; s_JyJ: foreach ($M0XVO as $NLnEq => $LpsSF) { goto x2B4x; ttkwz: $Fi1qK = DB::table($NLnEq)->insert($LpsSF); goto rcf3d; iu5hk: goto HZchJ; goto SwqF7; fLoU6: $YlS6S = $Shrkh[$NLnEq]; goto S71Gd; eM9yS: $g8q_p = inSchema([$MIbgA], $NLnEq); goto mMs4y; rPxxg: enaof: goto ttkwz; ulpK9: $MIbgA = $tlZit->createdBy(); goto pLxhs; SwqF7: L_isL: goto vv1yZ; x2B4x: $JnPiz = get_model_name($NLnEq); goto Mpr2d; Aif5O: HZchJ: goto peBfZ; SEvBN: goto xKl4t; goto rPxxg; rcf3d: xKl4t: goto qyIqJ; pLxhs: $BPm_h = $tlZit->updatedBy(); goto Ex2W5; peBfZ: $IlFju++; goto qR4I7; pQbHp: if (isset($UVVmf[$IlFju])) { goto L_isL; } goto iu5hk; uDGvD: $S3eLs = in_array($BPm_h, $tlZit->getNullables()); goto imPB8; Ex2W5: if (!isset($Shrkh[$NLnEq])) { goto wFFEB; } goto DG0o7; c5Kqf: $Fi1qK = DB::table($YlS6S)->insert($LpsSF); goto SEvBN; gCVYF: $BOJO_ = count($LpsSF); goto rHcKD; ck3yD: $BkDXq = inSchema([$BPm_h], $YlS6S); goto vgzaO; Xuwwh: $g8q_p = inSchema([$MIbgA], $YlS6S); goto ck3yD; mMs4y: $BkDXq = inSchema([$BPm_h], $NLnEq); goto zMP30; WpPc8: lHHVB: goto UIFbh; tp5Sp: I4nFy: goto c5Kqf; FU7Z8: TT1gQ: goto tp5Sp; Mpr2d: $tlZit = new $JnPiz(); goto ulpK9; S71Gd: if (!isset($UVVmf)) { goto I4nFy; } goto gCVYF; UIFbh: if (!($IlFju < $BOJO_)) { goto TT1gQ; } goto pQbHp; DG0o7: $YlS6S = $Shrkh[$NLnEq]; goto Xuwwh; rHcKD: $IlFju = 0; goto WpPc8; qyIqJ: Lzzty: goto GpY7q; zMP30: wDv0Q: goto uDGvD; vgzaO: goto wDv0Q; goto UJ_ef; lmmNn: if (!isset($Shrkh[$NLnEq])) { goto enaof; } goto fLoU6; imPB8: foreach ($LpsSF as $LIYNT => $K8eWf) { goto LAyLA; Tg4O0: zEvPY: goto z036D; z036D: foreach ($K8eWf as $juoqd => $A_YQZ) { goto SHRSz; vb56U: $LpsSF[$LIYNT][$juoqd] = $vJnlE; goto Dsqqn; lCHg4: UNTTB: goto Z59WM; Dsqqn: b9WSu: goto lCHg4; SHRSz: if (!($A_YQZ === "\x24" . "\151\144\x5f\155\x61\151\156")) { goto b9WSu; } goto vb56U; Z59WM: } goto aHTk6; aHTk6: Wwn4I: goto Q9vLl; Q9vLl: yUdWL: goto R0WGc; J9Lkv: $LpsSF[$LIYNT][$MIbgA] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto r3JRo; rLppb: $LpsSF[$LIYNT][$BPm_h] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto LwiDD; LwiDD: aaK7k: goto Tg4O0; r3JRo: PaeZX: goto jEQKq; aEinO: if ($S3eLs) { goto aaK7k; } goto rLppb; LAyLA: if (!$g8q_p) { goto PaeZX; } goto J9Lkv; jEQKq: if (!$BkDXq) { goto zEvPY; } goto aEinO; R0WGc: } goto e4P7O; e4P7O: fg25j: goto lmmNn; vv1yZ: $LpsSF[$IlFju][$UVVmf[$IlFju][0]] = $UVVmf[$IlFju][1]; goto Aif5O; qR4I7: goto lHHVB; goto FU7Z8; UJ_ef: wFFEB: goto eM9yS; GpY7q: } goto liQG0; UvGyz: oMW6G: goto KQfgx; wK10k: F0V9I: goto lxZv9; KMJCl: nTtIb: goto wK10k; sdUNH: $ITufJ = []; goto Y5I3P; Y5I3P: foreach ($LpsSF as $BzNeD => $K8eWf) { goto SYzKo; wHl6I: $NLnEq = $BzNeD; goto bQxgf; EVwZQ: HwMjZ: goto vrZo5; Bg4gr: foreach ($K8eWf as $riNgW => $HgAEq) { goto T97SA; eANTQ: $QQ3Yj = array_keys($HgAEq); goto a_CgX; ruAfY: goto hUQM3; goto UiseW; rVSz1: XAVQ3: goto VmCfv; eKHzQ: if (!is_null($XsdyG)) { goto ZwmpJ; } goto AxTko; d4tZg: $G7WXZ = DB::table($NLnEq)->where($HgAEq)->pluck($tbuF_); goto ZtODI; lPFsJ: if (is_null($Wy7Pm)) { goto Fo_4L; } goto P4Fa3; t2inJ: hUQM3: goto tL7gU; pTOiW: $Wy7Pm = get_pivot([$this->table_name, $NLnEq]); goto lPFsJ; AxTko: response()->sendError("\x53\157\155\x65\x74\150\x69\156\x67\x20\x69\x73\40\167\x72\x6f\156\x67\40\164\x72\x79\151\x6e\x67\40\164\x6f\40\154\151\x6e\153\x20\164\157\x20{$NLnEq}"); goto Jj0AQ; Roc16: list($QD7jK, $aMqn7) = explode("\x2e", $XsdyG[0][1]); goto h1RUt; u1kzp: foreach ($HgAEq as $BzNeD => $EwoOb) { goto uNZEs; BV2Kc: HkRks: goto ZhevY; uNZEs: if (!($BzNeD == $tbuF_)) { goto KWfo1; } goto g3LsD; IVfs0: Pq1gV: goto SJIOF; j8Vqz: response()->sendError("\x4e\x6f\164\x20\x66\x6f\x75\156\x64", 404, "\140{$NLnEq}\x60\56\x60{$BzNeD}\140\40\75\x20{$EwoOb}\x20\x64\157\145\163\x6e\47\x74\40\145\x78\151\x73\x74"); goto IVfs0; ZhevY: if ($qzDyf[$NLnEq]) { goto Pq1gV; } goto j8Vqz; fQUn2: lHs43: goto YANM3; WdpLS: $qzDyf[$NLnEq] = DB::table($NLnEq)->find($EwoOb)->exists(); goto BV2Kc; g3LsD: if (isset($qzDyf[$NLnEq])) { goto HkRks; } goto WdpLS; SJIOF: KWfo1: goto fQUn2; YANM3: } goto gLJLD; XLkCH: $Shrkh[$NLnEq] = $YlS6S; goto sAFY2; MjQlA: $yRyqZ = get_schema_name($NLnEq)::get(); goto r62CB; nvhEN: if (!($Dp_Kz > 1)) { goto qaNPz; } goto u3DJM; Ie89E: $Wy7Pm[$this->table_name . "\x2e" . $NLnEq] = get_pivot([$this->table_name, $NLnEq]); goto ASfWr; plXTN: $zCpxD = $G7WXZ[0]; goto FmRWh; T97SA: if (!is_array($HgAEq)) { goto QyRyX; } goto nApgY; Jj0AQ: ZwmpJ: goto Roc16; CgUcL: GDFlD: goto DUVrc; Dc54H: goto ALF4x; goto pUkzw; Mpamk: d2yfY: goto sWueT; sWueT: $YlS6S = $Wy7Pm["\142\162\x69\x64\x67\x65"]; goto dEX7J; nApgY: $tbuF_ = get_primary_key($NLnEq); goto eANTQ; STbMG: foreach ($HgAEq as $BzNeD => $EwoOb) { goto QJk55; RdC19: goto SEpW9; goto TE6yU; tt1gO: SEpW9: goto ImkGC; TE6yU: at4li: goto Fo8J6; w8Mfv: $woxsy = substr($BzNeD, strlen($YlS6S) + 1); goto ltl4G; ltl4G: $UVVmf[] = [$woxsy, $EwoOb]; goto RdC19; Fo8J6: $M0XVO[$NLnEq][] = [$BxSWj => "\x24\x69\144\x5f\155\141\x69\156", $qQyOx => $EwoOb]; goto tt1gO; QJk55: if (!Strings::startsWith($YlS6S . "\56", $BzNeD)) { goto at4li; } goto w8Mfv; ImkGC: } goto CgUcL; rNgSh: if (isset($Wy7Pm[$this->table_name . "\x2e" . $NLnEq])) { goto dZKFM; } goto Ie89E; guS4Y: $M0XVO[$NLnEq] = $K8eWf; goto Dc54H; ZEVyl: qaNPz: goto plXTN; RowfS: tDvn8: goto XU_tw; Cb4GS: if ($aI_E4) { goto FAkof; } goto MjQlA; DshsJ: $XsdyG = $CIQCm[$this->table_name] ?? null; goto eKHzQ; ugf6h: response()->sendError("\x52\x6f\167\x20\156\157\164\40\x66\157\x75\156\x64\40\151\156\x20{$NLnEq}", 400); goto mXqpQ; BXnFH: $Dp_Kz = count($G7WXZ); goto ruAfY; UiseW: DzzVz: goto O7T5i; M5Vkd: $EwoOb = $zCpxD; goto fFuR_; r62CB: $CIQCm = $yRyqZ["\162\145\154\141\164\x69\x6f\156\x73\x68\x69\x70\163"]; goto DshsJ; C5gGY: if (isset($zCpxD)) { goto d2yfY; } goto u1kzp; O7T5i: $Dp_Kz = 0; goto t2inJ; h1RUt: foreach ($K8eWf as $riNgW => $PPFRo) { $K8eWf[$riNgW] = array_merge($PPFRo, [$aMqn7 => "\x24\x69\x64\137\155\141\151\156"]); v1ORe: } goto wNtew; tL7gU: if (!($Dp_Kz == 0)) { goto Q39Od; } goto ugf6h; pUkzw: FAkof: goto jIRBu; VmCfv: if (isset($Shrkh[$NLnEq])) { goto wtn2V; } goto XLkCH; wNtew: yFJ1G: goto guS4Y; TbY5l: Fo_4L: goto Cb4GS; P4Fa3: $aI_E4 = true; goto TbY5l; a_CgX: $aI_E4 = false; goto rNgSh; ASfWr: dZKFM: goto pTOiW; u3DJM: response()->sendError("\124\x68\145\162\x65\40\141\162\x65\40\x6d\157\162\145\40\x74\x68\141\x6e\x20\157\x6e\145\40\x72\157\x77\x73\40\151\x6e\40{$NLnEq}\40\x6d\141\164\x63\x68\151\156\x67\40\167\151\x74\150\x20\x73\145\x6e\164\x20\x64\x61\164\x61", 400); goto ZEVyl; tNL2q: $qQyOx = $Wy7Pm["\x66\153\x73"][$NLnEq]; goto Y1XZb; mXqpQ: Q39Od: goto nvhEN; x1zrE: ALF4x: goto suhoC; gLJLD: capey: goto Mpamk; Y1XZb: if (isset($zCpxD)) { goto paHFB; } goto STbMG; sAFY2: wtn2V: goto x1zrE; jIRBu: if (in_array($tbuF_, $QQ3Yj)) { goto ZshYt; } goto d4tZg; kzUVG: paHFB: goto M5Vkd; fFuR_: $M0XVO[$NLnEq][] = [$BxSWj => "\x24\151\x64\x5f\x6d\141\151\156", $qQyOx => $EwoOb]; goto rVSz1; suhoC: QyRyX: goto RowfS; DUVrc: goto XAVQ3; goto kzUVG; dEX7J: $BxSWj = $Wy7Pm["\146\153\163"][$this->table_name]; goto tNL2q; FmRWh: ZshYt: goto C5gGY; ZtODI: if (empty($G7WXZ)) { goto DzzVz; } goto BXnFH; XU_tw: } goto LcO7t; SYzKo: if (!is_array($K8eWf)) { goto d1_2n; } goto wHl6I; TJHWn: if (!(get_primary_key($this->table_name) == $rBeUe)) { goto SWRU2; } goto ICpSv; rjOAe: $lF0RN = array_values($K8eWf)[0]; goto TJHWn; r4YwD: SWRU2: goto NJ7xw; w0IOh: GTwL5: goto CfxWd; QWYeE: if (in_array($NLnEq, static::$connect_to)) { goto GTwL5; } goto rrteY; RRlG0: $CIQCm = $yRyqZ["\x72\x65\x6c\141\164\151\x6f\x6e\163\x68\x69\160\163"]; goto rf2p_; CfxWd: if (!is_array($K8eWf)) { goto SMsdN; } goto Bg4gr; sCLw6: if (!isset($laqWu)) { goto ca6O6; } goto aXSCN; ICpSv: $yRyqZ = $this->instance->getSchema(); goto RRlG0; bQxgf: $ITufJ[] = $NLnEq; goto QWYeE; j9EEb: ca6O6: goto r4YwD; mNmtW: o7l0i: goto sCLw6; k5yNj: SMsdN: goto fDnZs; w2uIW: goto iYHG1; goto k5yNj; fDnZs: $rBeUe = array_keys($K8eWf)[0]; goto rjOAe; XYW55: $LpsSF[$aMqn7] = $lF0RN; goto j9EEb; aXSCN: $aMqn7 = $laqWu; goto XYW55; NJ7xw: iYHG1: goto YbR4w; rrteY: response()->sendError("\x54\x61\142\x6c\145\x20{$NLnEq}\x20\151\x73\40\x6e\x6f\164\40\143\157\x6e\156\145\x63\164\145\x64\40\164\x6f\x20" . $this->table_name, 400); goto w0IOh; rf2p_: foreach (static::$connect_to as $ESzcm) { goto twi87; gQwhz: list($TNJTY, $laqWu) = explode("\x2e", $cn4iH[0][1]); goto EU4R4; B7XHL: if (!($cn4iH === null)) { goto s0wfc; } goto wQcXb; wQcXb: goto Cr19q; goto Oo5lU; PclV4: if (!(count($cn4iH) == 1)) { goto y07BU; } goto gQwhz; Q9wiP: if (!($ESzcm == $NLnEq)) { goto PHyY3; } goto PclV4; u6Tm0: Cr19q: goto faKrl; EU4R4: y07BU: goto f_c5o; twi87: $cn4iH = $CIQCm[$ESzcm] ?? null; goto B7XHL; f_c5o: PHyY3: goto u6Tm0; Oo5lU: s0wfc: goto Q9wiP; faKrl: } goto mNmtW; LcO7t: sMby8: goto w2uIW; YbR4w: d1_2n: goto EVwZQ; vrZo5: } goto KMJCl; gKIfE: if (empty(static::$connect_to)) { goto F0V9I; } goto C0w73; T3QGC: DhCXB: goto Vcptb; Vcptb: tN4pL: goto mtJ53; KQfgx: DB::commit(); goto J3Hvk; GLprM: $Shrkh = []; goto pTpvX; liQG0: KLGGd: goto UvGyz; U68Bm: $M0XVO = []; goto GLprM; yxq4x: if (!isset($M0XVO)) { goto oMW6G; } goto s_JyJ; kxn2p: foreach ($ITufJ as $hdg26) { unset($LpsSF[$hdg26]); ArhZc: } goto T3QGC; mtJ53: $vJnlE = DB::table($this->table_name)->create($LpsSF); goto yxq4x; C0w73: DB::beginTransaction(); goto U68Bm; lxZv9: if (!isset($ITufJ)) { goto tN4pL; } goto kxn2p; J3Hvk: } catch (\PDOException $La_BJ) { goto J4i91; NNaXA: Factory::response()->sendError("\105\x72\162\157\x72\x3a\40\x63\x72\x65\x61\x74\x69\x6f\156\40\x6f\156\40\x60{$Rm_Ny}\140\56\140{$ESzcm}\140\x20\157\x66\40\x72\145\x73\x6f\x75\162\x63\x65\x20\146\x61\x69\154\163\72\40" . $La_BJ->getMessage(), 500, $this->instance->getLog()); goto bWcX3; V1Rea: $Rm_Ny = DB::getCurrentDB(); goto u5TBi; u5TBi: $ESzcm = DB::getTableName(); goto NNaXA; J4i91: DB::rollback(); goto V1Rea; bWcX3: } goto oDY55; mtsWy: if (!($v6Iky !== true)) { goto p1PT5; } goto rlWGM; c1DUX: unset($LpsSF["\146\x6f\x6c\x64\x65\162"]); goto uxcgG; aWTkV: EvfGE: goto OsGOv; SfV6U: irG_0: goto RJatG; BFc3R: ZlIZj: goto UUAcX; rFBsb: if (!(count($EUXjh) == 0 || $EUXjh[0]["\164\x62"] != $this->table_name)) { goto jyCfy; } goto gcjGy; LaJTM: $LpsSF[$this->instance->belongsTo()] = Acl::getCurrentUid(); goto s2uRW; ozRAF: Factory::response()->send([$this->table_name => $LpsSF, $this->instance->getKeyName() => $vJnlE], 201); goto SfV6U; QQZDp: if (!$this->instance->inSchema([$this->instance->belongsTo()])) { goto dVLTE; } goto LaJTM; s2uRW: dVLTE: goto yASFm; uxcgG: $LpsSF[static::$folder_field] = $EUXjh[0]["\x6e\x61\155\145"]; goto n7B1j; uXyOb: if (!($EUXjh[0][$this->instance->belongsTo()] != Acl::getCurrentUid() && !FoldersAclExtension::hasFolderPermission($this->folder, "\167"))) { goto BvYsJ; } goto sjDwA; Prbcj: $this->instance->fillAll(); goto WxOPk; UUAcX: $v6Iky = (new Validator())->validate($this->instance->getRules(), $LpsSF); goto mtsWy; oDY55: if ($vJnlE !== false) { goto QlLqN; } goto oXGvU; FlXy9: Factory::response()->sendError("\47{$this->instance->createdBy()}\x27\x20\x69\163\x20\x6e\157\164\40\146\x69\154\154\141\x62\154\x65\41", 400); goto J0GrR; EyJjP: goto irG_0; goto a2qBv; XvZh5: $LpsSF[$this->instance->updatedBy()] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto OcyUs; n7B1j: $LpsSF[$this->instance->belongsTo()] = $EUXjh[0][$this->instance->belongsTo()]; goto BFc3R; Q5RRT: $this->onPost($vJnlE, $LpsSF); goto fk3E8; c92UT: jyCfy: goto uXyOb; T5oc1: if ($this->acl->hasSpecialPermission("\x74\162\x61\156\x73\x66\145\162")) { goto iF9Rc; } goto QQZDp; yASFm: iF9Rc: goto TkMpj; J0GrR: ZfBcm: goto z65Yr; OcyUs: i6OMv: goto MogUl; vYZWc: if (!isset($LpsSF[$this->instance->createdAt()])) { goto rOUKG; } goto j6zmL; esZL1: a3QCl: goto fXKA2; rlWGM: Factory::response()->sendError(_("\104\x61\164\141\40\x76\141\154\x69\144\141\164\x69\157\156\40\167\145\x72\162\x6f\162"), 400, $v6Iky); goto lmRGb; RlsZl: if (!$this->instance->inSchema([$this->instance->createdBy()])) { goto aMnBH; } goto CfIcF; j6zmL: Factory::response()->sendError("\x27{$this->instance->createdAt()}\47\x20\x69\163\40\156\157\x74\x20\146\x69\154\154\141\x62\x6c\145\x21", 400); goto bBIMr; i49Hp: k9_v5: goto gse0D; wVNfD: if (!$this->instance->inSchema([$this->instance->createdBy()])) { goto EvfGE; } goto aCecV; MogUl: fMUPK: goto T5oc1; aCecV: $LpsSF[$this->instance->createdBy()] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto aWTkV; Yp8ZC: BvYsJ: goto c1DUX; CfIcF: if (!isset($LpsSF[$this->instance->createdBy()])) { goto ZfBcm; } goto FlXy9; fXKA2: $this->onPostingFolderBeforeCheck($irQOM, $LpsSF, $this->folder); goto F616h; TkMpj: if (!($this->folder !== null)) { goto ZlIZj; } goto D0uRx; yZosW: Factory::response()->sendError("\106\157\x72\142\151\144\x64\x65\x6e", 403, "\x27\146\x6f\154\x64\x65\x72\x5f\146\151\145\154\x64\x27\40\x69\163\40\x75\x6e\144\x65\146\x69\x6e\x65\144"); goto esZL1; fk3E8: $this->webhook("\143\162\x65\x61\164\145", $LpsSF, $vJnlE); goto ozRAF; oXGvU: Factory::response()->sendError("\105\x72\162\x6f\x72\72\x20\x63\162\x65\x61\164\151\157\156\40\157\146\40\x72\x65\163\x6f\165\162\143\145\40\146\x61\x69\154\x73\41"); goto EyJjP; OsGOv: if (!(!isset($LpsSF[$this->instance->createdAt()]) && $this->instance->inSchema([$this->instance->createdAt()]))) { goto SMKnB; } goto skL0x; G6uo3: hsRfN: goto RlsZl; vw43E: $this->instance->connect(); goto z23Yl; bBIMr: rOUKG: goto ru4mC; WxOPk: goto TApix; goto G6uo3; qtZ32: if (!$this->acl->hasSpecialPermission("\146\x69\154\154\x5f\x61\x6c\154")) { goto hsRfN; } goto Prbcj; Vw3dd: if (empty($this->folder)) { goto k9_v5; } goto JvugA; z65Yr: aMnBH: goto Fk31d; HyxHm: TApix: goto wVNfD; gcjGy: Factory::response()->sendError("\106\157\x6c\144\x65\x72\x20\x6e\x6f\164\40\x66\x6f\165\x6e\144", 404); goto c92UT; F616h: $lSE6r = DB::table("\146\x6f\154\x64\x65\162\163"); goto P_o9G; gse0D: $this->onPostingAfterCheck($irQOM, $LpsSF); goto Y_hzc; Fk31d: if (!$this->instance->inSchema([$this->instance->createdAt()])) { goto I8zbP; } goto vYZWc; skL0x: $LpsSF[$this->instance->createdAt()] = at(); goto NWV1U; ru4mC: I8zbP: goto HyxHm; a2qBv: QlLqN: goto Kf8LF; JvugA: $this->onPostingFolderAfterCheck($irQOM, $LpsSF, $this->folder); goto i49Hp; P_o9G: $EUXjh = $lSE6r->where(["\x69\144" => $this->folder])->get(); goto rFBsb; lmRGb: p1PT5: goto Vw3dd; sjDwA: Factory::response()->sendError("\106\157\162\142\151\x64\x64\x65\156", 403, "\131\x6f\x75\x20\150\x61\x76\x65\40\x6e\x6f\x74\x20\160\145\162\x6d\151\x73\x73\x69\x6f\156\40\146\x6f\x72\x20\164\150\145\40\146\157\x6c\x64\x65\162\x20{$this->folder}"); goto Yp8ZC; cw0V3: if (in_array($this->instance->updatedBy(), $this->instance->getNullables())) { goto i6OMv; } goto XvZh5; NWV1U: SMKnB: goto SL9wp; RJatG: } catch (InvalidValidationException $La_BJ) { Factory::response()->sendError("\126\x61\x6c\x69\x64\x61\x74\151\157\156\x20\x45\162\162\x6f\x72", 400, json_decode($La_BJ->getMessage())); } catch (\Exception $La_BJ) { Factory::response()->sendError($La_BJ->getMessage()); } goto ovSFe; B1y2I: $irQOM = $LpsSF[$this->instance->getIdName()] ?? null; goto G7yzK; ovSFe: } protected function modify($irQOM = NULL, bool $kZXuj = false) { goto IANig; nKgkK: $this->id = $irQOM; goto rTWyg; GRN68: if (!empty($LpsSF)) { goto vbM_4; } goto bGI6l; g57cJ: try { goto SB9nE; VlinN: if (!(count($Io7qZ) == 0)) { goto QU0Mf; } goto Kif7e; lvgt6: $this->instance = $this->getModelInstance(); goto OPG2U; naMaD: $this->folder_name = $EUXjh[0]["\x6e\x61\155\x65"]; goto x5g17; sY2U1: $HE28i = $WARh0->where([$WARh0->getIdName(), $irQOM])->first(); goto zbVWP; dDAzz: $this->instance->fill([$this->instance->updatedBy()]); goto m_oco; Sqv3P: try { $TA_3z = $this->instance->where([$MGZFx => $irQOM])->update($LpsSF); } catch (\Exception $La_BJ) { response()->sendError($La_BJ->getMessage()); } goto fRR3K; s0i5M: $Io7qZ = $this->instance2->where([$MGZFx => $irQOM])->get(); goto VlinN; BZKT0: Factory::response()->sendError("\106\x6f\x72\142\x69\144\144\145\156", 403, "\131\x6f\x75\40\141\x72\x65\40\x6e\157\x74\x20\x74\x68\145\40\157\167\x6e\145\x72\x21"); goto rHYSz; JgzH1: foreach ($LpsSF as $riNgW => $N3TCw) { goto gGW7z; gGW7z: if (!(strtoupper($N3TCw) == "\x4e\125\114\114" && $this->instance->isNullable($riNgW))) { goto BGoYJ; } goto upiLQ; n9s8p: d0w6q: goto VhOzL; upiLQ: $LpsSF[$riNgW] = NULL; goto KGEyd; KGEyd: BGoYJ: goto n9s8p; VhOzL: } goto Rxxbk; yu9j9: $uOXIk = array_filter($LpsSF, function ($N3TCw, $riNgW) { goto ChVTU; DfJch: RFeM3: goto ztctT; XDRdi: return $N3TCw; goto DfJch; ChVTU: if (!is_array($riNgW)) { goto GuDHM; } goto r1QLB; P9c6e: GuDHM: goto aDVjV; aDVjV: if (!in_array($riNgW, static::$connect_to)) { goto RFeM3; } goto XDRdi; r1QLB: return; goto P9c6e; ztctT: }, ARRAY_FILTER_USE_BOTH); goto WK7bt; AegPZ: hAe_b: goto Sqv3P; aRq6W: eTYi4: goto nQBg9; DwnXN: $LpsSF[$this->instance->belongsTo()] = Acl::getCurrentUid(); goto C93PZ; s7dXY: XtloM: goto LuFaL; tenol: zpe0l: goto VAoNn; zbVWP: if (!(isset($HE28i["\151\x73\x5f\154\x6f\x63\153\145\x64"]) && $HE28i["\x69\x73\137\154\157\143\x6b\145\144"] == 1)) { goto jiDRa; } goto ducod; xlOTU: EqjPV: goto MU18x; aSrFL: $LpsSF[$this->instance->belongsTo()] = $EUXjh[0][$this->instance->belongsTo()]; goto IySiL; xerkc: Factory::response()->sendError("\x59\x6f\165\40\150\x61\166\145\x20\x6e\x6f\x74\x20\160\145\x72\x6d\x69\163\163\x69\x6f\156\x20\x66\x6f\x72\40\x74\150\x65\40\x66\x6f\x6c\144\145\162\40{$this->folder}", 403); goto zHI_o; ybb8_: $WARh0 = $this->getModelInstance(); goto sY2U1; FxZ8x: $this->instance->unfill($yL3aQ); goto kdUvw; gvi1R: if (!(count($EUXjh) == 0 || $EUXjh[0]["\x74\142"] != $this->table_name)) { goto UOrFw; } goto V388B; nQBg9: unset($LpsSF["\146\x6f\154\x64\x65\162"]); goto yVym_; SJkp5: Vx32L: goto duM3y; NrCHa: lCvlP: goto nqNZL; m_oco: if (empty($this->folder)) { goto iWIGG; } goto EcRY2; bQgNP: if (empty(static::$connect_to)) { goto EqjPV; } goto yu9j9; wv_nP: JaiJg: goto lvgt6; zjFaB: if (!($v6Iky !== true)) { goto RwQoZ; } goto i8oYW; rHYSz: V6n3N: goto kUvsz; MU18x: foreach ($LpsSF as $riNgW => $N3TCw) { goto vWRnV; e5YJw: foreach ($N3TCw as $FB_CU => $mKUgl) { $LpsSF[$FB_CU] = $mKUgl; H151G: } goto RzYJU; RzYJU: nirYg: goto DIPKZ; rSDbl: SRGp1: goto KqrZf; vWRnV: if (!is_array($N3TCw)) { goto SRGp1; } goto e5YJw; KqrZf: Xw0Br: goto Uh7yJ; DIPKZ: unset($LpsSF[$riNgW]); goto rSDbl; Uh7yJ: } goto LrPG3; qckoW: $difsR = $this->instance->getAutoFields(); goto O4tDH; zRY2y: Factory::response()->sendError("\105\162\x72\157\x72\x20\x69\x6e\x20\x50\101\x54\x43\x48", 404); goto VkkBy; VNLR1: $lSE6r = DB::table("\x66\x6f\x6c\x64\x65\x72\163")->assoc(); goto Y1C8Z; qERRW: Factory::response()->code(404)->sendError("\122\x65\147\151\163\x74\x65\x72\x20\x66\157\162\40\151\x64\75{$irQOM}\x20\144\x6f\145\x73\156\47\164\x20\145\170\x69\x73\164"); goto aRq6W; Rxxbk: zrF8b: goto Yszos; s3A6M: if (!$this->instance->inSchema([$this->instance->belongsTo()])) { goto FepK6; } goto DwnXN; GGBv2: $this->onPuttingAfterCheck($irQOM, $LpsSF); goto VtVr9; Ei8fs: UOrFw: goto K700R; LuFaL: LsC0o: goto fudMW; LHdlv: Hai0H: goto EtMgz; Qyw9H: if ($this->folder !== null) { goto Vx32L; } goto rqQKG; szMFm: $LpsSF[$this->instance->updatedBy()] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto tenol; VAoNn: $YXb9D = $this->instance->inSchema([$this->instance->belongsTo()]); goto Qyw9H; NESi6: QU0Mf: goto cN6dL; O4tDH: foreach ($difsR as $EDxdH) { goto eiTUZ; eiTUZ: if (!isset($LpsSF[$EDxdH])) { goto WdQIt; } goto zlnsW; zlnsW: unset($LpsSF[$EDxdH]); goto JRNDc; JRNDc: WdQIt: goto ZQZO0; ZQZO0: XJFKx: goto LBazv; LBazv: } goto aFXHI; EcRY2: $this->onPuttingFolderAfterCheck($irQOM, $LpsSF, $this->folder); goto RskFR; EtMgz: $this->onPutFolder($irQOM, $LpsSF, $TA_3z, $this->folder); goto vRdjr; C93PZ: FepK6: goto NrCHa; Kif7e: Factory::response()->code(404)->sendError("\x52\145\147\151\x73\x74\x65\x72\40\x66\x6f\162\40\151\144\x3d{$irQOM}\x20\144\x6f\145\163\x6e\47\x74\x20\145\x78\x69\x73\164\x21"); goto NESi6; WK7bt: foreach ($uOXIk as $ESzcm => $utN6A) { goto jZpn0; jZpn0: $LO10D = $utN6A; goto AgRPc; cKoxO: mZIBL: goto aj5w3; hzeNC: D6T5I: goto kZG3G; mrp05: $QcKCl = $LO10D[$BqodZ]; goto AEWWC; aj5w3: yAi7E: goto qXyGz; P_J4I: switch ($Fj7Sj) { case "\x31\x3a\x31": case "\156\72\61": goto lQ1VH; Gqpqd: $LpsSF[$aMqn7] = $utN6A; goto ajski; hJZAj: $WNfZ7 = get_fks($this->table_name, $ESzcm); goto r8I_N; r8I_N: if (!isset($utN6A[0])) { goto C2M_j; } goto v63nl; ZZ2D5: C2M_j: goto IsIAz; Fxoy1: YNSTc: goto nqnEB; YvbPT: W65aV: goto ERkYH; v63nl: $utN6A = $utN6A[0]; goto ZZ2D5; ajski: goto mZIBL; goto nWMR2; ramQw: goto vrfoC; goto Fxoy1; ey02w: $aMqn7 = $WNfZ7[0]; goto ramQw; IsIAz: foreach ($WNfZ7 as $T15Vy) { goto sJQrt; fBj8o: $utN6A = $utN6A[$aMqn7]; goto WlJ1o; blzxI: $aMqn7 = $T15Vy; goto fBj8o; I_rw7: if (!in_array($T15Vy, $QQ3Yj, true)) { goto Xp3XJ; } goto blzxI; qJB7z: D8_g9: goto iEtyC; NuaY2: sHeuj: goto qJB7z; ypWl2: MqjCq: goto EyxX_; Am66T: j_TYO: goto ghtJX; rsp8H: so18Z: goto Am66T; WlJ1o: Xp3XJ: goto nf7yD; iEtyC: if (!(count($QQ3Yj) > 1)) { goto so18Z; } goto qGqfj; ZsT7V: $aMqn7 = $T15Vy; goto rrGrZ; nf7yD: goto D8_g9; goto ypWl2; sJQrt: if (in_array($ESzcm, static::$connect_to)) { goto MqjCq; } goto I_rw7; qGqfj: $TA_3z = DB::table($ESzcm)->find($QcKCl)->update($LO10D); goto rsp8H; EyxX_: if (!in_array($BqodZ, $QQ3Yj, true)) { goto sHeuj; } goto ZsT7V; rrGrZ: $utN6A = $utN6A[$BqodZ]; goto NuaY2; ghtJX: } goto YvbPT; lQ1VH: $WNfZ7 = get_fks($this->table_name, $ESzcm); goto F0xE0; F0xE0: if (is_array($utN6A)) { goto YNSTc; } goto ey02w; nqnEB: $QQ3Yj = array_keys($utN6A); goto hJZAj; ERkYH: vrfoC: goto Gqpqd; nWMR2: case "\x31\72\156": goto Fs86M; tZncQ: $d6mt5 = $fCQ6n->whereIn(get_primary_key($ESzcm), $TEBJQ)->when(!empty($Zx80D), function ($QLFhn) use($BqodZ, $Zx80D) { $QLFhn->whereNotIn($BqodZ, $Zx80D); })->delete(); goto xarxT; SUOJ0: gip2y: goto yDtJw; B2k1D: goto UR0u2; goto CbJbx; r2z8V: $aMqn7 = $WNfZ7[0]; goto g27EE; bbRwD: $riNgW = array_key_first($utN6A); goto KeY_2; Iqq04: if ($Ze2lh) { goto vT3K8; } goto UOvsI; la8S0: if (!(count($WNfZ7) > 1)) { goto QUujv; } goto nWzx2; A7cQ6: $fCQ6n = DB::table($ESzcm); goto tZncQ; Z3lHP: Ng_RT: goto HEtL7; g27EE: goto a8qFo; goto kXUsr; JRASb: $zcdeg = []; goto a57sP; nWzx2: response()->sendError("\x41\x74\x20\x74\150\151\163\x20\x6d\x6f\155\145\156\164\40\x69\x74\47\x73\40\x70\x6f\x73\x73\151\x62\x6c\x65\40\164\x6f\x20\x75\x70\144\141\x74\x65\40\x74\141\142\x6c\145\163\x20\167\x69\164\x68\40\157\156\x6c\x79\x20\x6f\x6e\145\x20\x72\145\154\x61\x74\151\157\x6e\x73\x68\x69\x70\56\x20\104\145\164\x61\x69\x6c\72\x20{$ESzcm}\40\55\x3e\40{$this->table_name}"); goto At5jF; wVp5r: if (!empty($zcdeg)) { goto o6Ek8; } goto JRASb; j1lLH: foreach ($utN6A as $K8eWf) { goto BaUkr; BaUkr: $fCQ6n = DB::table($ESzcm); goto CyzPg; QaD5y: Zy4zm: goto hx0zm; CyzPg: $d6mt5 = $fCQ6n->find($K8eWf)->update([$aMqn7 => $irQOM]); goto QaD5y; hx0zm: } goto Z3lHP; qJLVs: foreach ($utN6A as $LIYNT => $K8eWf) { goto CP2I6; Zf1Mb: SrhUZ: goto StH81; gPG95: $flB2f = DB::table($ESzcm)->create($PPFRo); goto CwurZ; ZY57m: homx4: goto dU59b; dU59b: tlSQs: goto Zf1Mb; V3WbY: $QcKCl = $K8eWf[$BqodZ]; goto X8wjw; hN_KI: FXG0y: goto jpiS1; jugt5: if (in_array($BqodZ, $QQ3Yj, true)) { goto FXG0y; } goto OqfzA; iS6Z2: unset($utN6A[$LIYNT]); goto MRAca; igfda: $flB2f = DB::table($ESzcm)->where($PPFRo)->value($BqodZ); goto o9fmi; ei6Nf: $Zx80D[] = $flB2f; goto iS6Z2; Aapva: $aMqn7 = $WNfZ7[0]; goto jugt5; uQ43r: goto homx4; goto dJWEd; Vbba8: if ($BaxsM) { goto STm75; } goto q7ex2; dJWEd: DEIyW: goto ZY57m; I5Q92: STm75: goto RYw03; CwurZ: TO33a: goto ei6Nf; RYw03: $PPFRo = $K8eWf; goto hT7SF; oiIzA: $d6mt5 = $mKPdH->update($PPFRo); goto m68VE; m68VE: $Zx80D[] = $QcKCl; goto hF_h5; o9fmi: if (!empty($flB2f)) { goto TO33a; } goto gPG95; MRAca: goto tlSQs; goto hN_KI; X8wjw: $mKPdH = DB::table($ESzcm); goto AhX69; q7ex2: response()->sendError("\123\x75\x62\x72\145\x73\x6f\x75\162\x63\x65\x20\x66\x6f\x72\40\x27{$ESzcm}\47\x20\x77\x69\x74\x68\40\x69\144\x3d{$QcKCl}\x20\144\x6f\145\163\x20\156\x6f\x74\x20\x65\x78\151\x73\x74", 404); goto I5Q92; AhX69: $BaxsM = $mKPdH->find($QcKCl)->exists(); goto Vbba8; hF_h5: unset($utN6A[$LIYNT]); goto uQ43r; CP2I6: $QQ3Yj = array_keys($K8eWf); goto Aapva; OqfzA: $PPFRo = $K8eWf; goto ECSTp; hT7SF: $PPFRo[$aMqn7] = $irQOM; goto oiIzA; ECSTp: $PPFRo[$aMqn7] = $irQOM; goto igfda; jpiS1: if (count($QQ3Yj) === 1) { goto DEIyW; } goto V3WbY; StH81: } goto SUOJ0; xarxT: QpIXT: goto cpyv_; kXUsr: NbKk5: goto bN27g; RQwYt: if (empty($TEBJQ)) { goto QpIXT; } goto A7cQ6; IsS04: $QQ3Yj = []; goto qJLVs; hQBph: $dBdPr = array_column($utN6A, "\x69\144\x5f\x74\141\147"); goto fwEMA; dLEQx: $zcdeg = []; goto Iqq04; UOvsI: $zcdeg = DB::table($ESzcm)->where([$aMqn7 => $irQOM])->pluck(get_primary_key($ESzcm)); goto wVp5r; HEtL7: if (!($Ze2lh == false)) { goto ZeHCO; } goto bbRwD; a57sP: o6Ek8: goto vJA5C; yDtJw: a8qFo: goto dLEQx; T4j51: if (is_array($utN6A[0])) { goto NbKk5; } goto r2z8V; cpyv_: ZeHCO: goto Rp1EY; KeY_2: if (is_int($riNgW) && is_array($utN6A[$riNgW])) { goto DlMJW; } goto L59Oe; At5jF: QUujv: goto TMcnC; bN27g: $BqodZ = get_primary_key($ESzcm); goto IsS04; L59Oe: $TEBJQ = array_diff($zcdeg, $utN6A); goto B2k1D; Fs86M: $WNfZ7 = get_fks($ESzcm, $this->table_name); goto la8S0; vJA5C: vT3K8: goto j1lLH; fwEMA: $TEBJQ = array_diff($zcdeg, $dBdPr); goto iH5GM; TMcnC: $Zx80D = []; goto T4j51; CbJbx: DlMJW: goto hQBph; iH5GM: UR0u2: goto RQwYt; Rp1EY: goto mZIBL; goto lKqBB; lKqBB: case "\156\x3a\155": goto EtPcc; Bv1Ld: $YlS6S = $yADR_["\142\x72\x69\x64\147\145"] ?? null; goto gL5oD; ngb95: D7IKe: goto GHGD_; QOqRe: goto mZIBL; goto d2fC2; O_hKS: VZbL7: goto QOqRe; yTYhC: $d6mt5 = DB::table($YlS6S)->where([$vDfkD => $irQOM])->delete(); goto Zs3xZ; bl1mN: $fCQ6n = DB::table($YlS6S); goto waWvp; WUOnw: Magni: goto L3i0c; ouLA0: if ($Ze2lh) { goto Magni; } goto Nt8px; GHGD_: foreach ($utN6A as $X8G72 => $K8eWf) { goto GcdhA; dPglE: $Oh4Ay[$vDfkD] = $irQOM; goto mbTCe; GcdhA: if (!(isset($K8eWf[$GraSo]) && in_array($K8eWf[$GraSo], $fpxFQ))) { goto faVqB; } goto klBPA; mbTCe: $IFmT5[] = $Oh4Ay; goto z71iU; btQIZ: zYU0F: goto uxf9w; klBPA: $Oh4Ay = $utN6A[$X8G72]; goto dPglE; z71iU: faVqB: goto btQIZ; uxf9w: } goto AG_GO; LQ2f7: $k32wF = array_column($utN6A, $GraSo); goto rO56Y; oIhUu: $riNgW = array_key_first($utN6A); goto Qbuh0; MyGDs: $fpxFQ = array_diff(array_values($utN6A), array_values($zcdeg)); goto YC1qu; vp0B8: aiyI9: goto WUOnw; Nt8px: if (empty($TEBJQ)) { goto aiyI9; } goto bl1mN; i8qdx: $A9vZP = $yADR_["\146\153\x73"]; goto yFmIB; EzPem: PAupQ: goto Y4mas; BUpFD: $TEBJQ = array_diff(array_values($zcdeg), array_values($utN6A)); goto APm7t; gL5oD: if (!($YlS6S === null)) { goto lp1mZ; } goto SUoFM; yp72M: $TEBJQ = []; goto CLEhH; zyed6: b2aL9: goto PMN4n; tv2nU: if (!($Ze2lh == false)) { goto z8Boh; } goto BUpFD; K2WnX: qxGTu: goto s6x2s; SUoFM: throw new \Exception("\x42\162\151\x64\x67\x65\x20\164\x61\x62\154\145\x20\x6e\x6f\x74\40\x66\157\x75\156\144\40\146\x6f\162\x20{$this->table_name}\x20\x61\156\144\40{$ESzcm}"); goto k4U9Z; AG_GO: SHfYO: goto D13Yv; vMNmK: if (!($Ze2lh == false)) { goto g1HmX; } goto yTYhC; BEF4x: $Zx80D = []; goto hry4F; Qbuh0: if (is_int($riNgW) && isset($utN6A[$riNgW]) && is_array($utN6A[$riNgW])) { goto VtOZe; } goto tv2nU; EtPcc: $yADR_ = get_pivot([$this->table_name, $ESzcm]); goto Bv1Ld; Y4mas: if (!empty($IFmT5)) { goto qxGTu; } goto icuGR; fSD0o: VJDT6: goto HEFNL; HEFNL: foreach ($IFmT5 as $riNgW => $JkcPa) { goto ZAMbM; sqc1U: xUoJA: goto SBqQZ; SBqQZ: rKjfG: goto tH_1u; ZAMbM: foreach ($JkcPa as $lSE6r => $N3TCw) { goto JSzxI; JSzxI: if (!in_array($lSE6r, $pggDY)) { goto b0W7x; } goto RdPfY; KmCNo: TRRbM: goto PdwsT; HEYBQ: b0W7x: goto KmCNo; RdPfY: unset($IFmT5[$riNgW][$lSE6r]); goto HEYBQ; PdwsT: } goto sqc1U; tH_1u: } goto EzPem; PMN4n: $fpxFQ = array_diff(array_values($k32wF), array_values($zcdeg)); goto SAal4; giYpw: goto X6Gp4; goto ngb95; dwZGW: foreach ($WNfZ7 as $T15Vy) { goto YhOeF; Ick25: C2naN: goto y58W0; Bnq13: foreach ($utN6A as $LIYNT => $K8eWf) { goto TVDd9; QpG4q: $I3fcN = DB::table($ESzcm)->where($K8eWf)->value($UXpD5); goto iMEmQ; i9zco: response()->sendError("\x53\165\142\x72\145\x73\157\x75\x72\x63\145\40\146\157\x72\x20\47{$ESzcm}\47\x20\x77\151\x74\x68\x20\x69\144\x3d{$tPK2q}\40\x64\157\x65\163\40\156\157\164\40\x65\x78\x69\163\164", 404); goto LTeOc; LTeOc: ALnT9: goto OyRMk; iMEmQ: if (!empty($I3fcN)) { goto qC_vn; } goto rKLko; fldbC: $RIVJK = DB::table($YlS6S); goto JO46x; Wh9U8: foreach ($K8eWf as $lSE6r => $N3TCw) { goto OKIXt; OKIXt: if (!in_array($lSE6r, $pggDY)) { goto lOY56; } goto WifIh; eAYuA: lOY56: goto Avaxo; Avaxo: sQLmP: goto zdubg; WifIh: $PPFRo[$lSE6r] = $K8eWf[$lSE6r]; goto eAYuA; zdubg: } goto ELFZ1; rKLko: $I3fcN = DB::table($ESzcm)->create($K8eWf); goto xXgzW; QDltj: r3o6O: goto sImm4; AJrxN: $UXpD5 = get_primary_key($ESzcm); goto QpG4q; HiUsX: L9DQP: goto oqSGx; TVDd9: $tPK2q = null; goto VUVfB; ELFZ1: hYrPm: goto MO8zn; ZBZpg: $PPFRo = []; goto Wh9U8; xXgzW: qC_vn: goto pV1u0; s1gQA: $ZyGNk = DB::table($ESzcm)->find($tPK2q)->exists(); goto JCj1t; MO8zn: if (empty($PPFRo)) { goto i96JT; } goto s1gQA; OyRMk: $TA_3z = DB::table($ESzcm)->find($tPK2q)->update($PPFRo); goto TA7ZM; TA7ZM: i96JT: goto rigft; oqSGx: if (count($QQ3Yj) === 1) { goto mjSfz; } goto ZBZpg; pvF8h: $RwfY3 = $RIVJK->create($ah5bu); goto WYcGF; iW57x: mjSfz: goto QDltj; WYcGF: vMVF0: goto h5mcd; ERALW: foreach ($K8eWf as $lSE6r => $HgAEq) { goto ydd6Q; hOyql: $ZC1sR = $lSE6r; goto Fccd6; NBGYt: $tPK2q = $HgAEq; goto hOyql; Fccd6: GG5Ua: goto mkmJK; ydd6Q: if (!($lSE6r == $BqodZ || $lSE6r == $GraSo)) { goto GG5Ua; } goto NBGYt; mkmJK: ZOWM3: goto r5Hmp; r5Hmp: } goto ZM5Cg; rigft: goto r3o6O; goto iW57x; Sk4Rx: YlIlp: goto ahtFc; JO46x: if (DB::table($YlS6S)->where($ah5bu)->exists()) { goto vMVF0; } goto pvF8h; hcZSz: if (in_array($ZC1sR, $QQ3Yj, true)) { goto L9DQP; } goto AJrxN; bkHNx: goto jkcPq; goto HiUsX; h5mcd: $Zx80D[] = $I3fcN; goto bkHNx; VUVfB: $ZC1sR = null; goto ERALW; ZM5Cg: JBCN0: goto lswAR; lswAR: $QQ3Yj = array_keys($K8eWf); goto hcZSz; pV1u0: $ah5bu = [$vDfkD => $irQOM, $GraSo => $I3fcN]; goto fldbC; JCj1t: if ($ZyGNk) { goto ALnT9; } goto i9zco; sImm4: jkcPq: goto Sk4Rx; ahtFc: } goto Ick25; y58W0: YzVKu: goto oPUqO; CTHyl: $QQ3Yj = []; goto Bnq13; E_4xX: goto YzVKu; goto Ie6C2; Ie6C2: gMY88: goto CTHyl; oPUqO: gn9sU: goto AQZkB; YhOeF: if (is_array($utN6A[0])) { goto gMY88; } goto E_4xX; AQZkB: } goto T3fBc; T3fBc: ovDJk: goto mi25r; mi25r: $zcdeg = DB::table($YlS6S)->where([$vDfkD => $irQOM])->pluck($GraSo) ?? []; goto yp72M; rrbpe: $Fhs3d = get_schema($ESzcm); goto o5LTb; SAal4: JuPHF: goto ouLA0; fwW_V: $fCQ6n->insert($IFmT5); goto O_hKS; k4U9Z: lp1mZ: goto i8qdx; yNeAL: unset($A9vZP[$this->table_name]); goto igQLq; igQLq: $WNfZ7 = array_values($A9vZP); goto vMNmK; WpxBx: $GraSo = $A9vZP[$ESzcm]; goto yNeAL; ku3sH: if (isset($utN6A[0]) && is_array($utN6A[0])) { goto D7IKe; } goto ihHMD; o5LTb: $pggDY = array_keys($Fhs3d["\x61\164\x74\x72\x5f\x74\171\160\x65\163"]); goto dwZGW; thyKo: eqMIM: goto BEF4x; L3i0c: $IFmT5 = []; goto v4K_i; TtcBA: $TEBJQ = array_diff(array_values($zcdeg), array_values($k32wF)); goto zyed6; hry4F: $vDfkD = $A9vZP[$this->table_name]; goto WpxBx; rO56Y: if (!($Ze2lh == false)) { goto b2aL9; } goto TtcBA; icuGR: goto VZbL7; goto K2WnX; t_uVd: response()->sendError("\x41\164\x20\164\150\151\163\40\155\x6f\x6d\x65\156\x74\40\x69\164\47\x73\x20\x70\157\163\x73\151\142\154\145\x20\164\x6f\40\165\160\144\x61\x74\x65\40\x62\162\151\x64\x67\145\x20\x74\141\x62\x6c\x65\x73\x20\167\151\x74\150\40\157\x6e\x6c\171\40\157\156\x65\x20\162\145\x6c\141\164\x69\x6f\x6e\163\x68\151\x70\40\x74\157\x20\x65\x61\143\x68\40\x73\151\x64\x65\56\40\104\145\x74\141\x69\154\x3a\x20{$ESzcm}\40\x2d\76\x20{$this->table_name}"); goto thyKo; v4K_i: if (empty($fpxFQ)) { goto VJDT6; } goto ku3sH; waWvp: $d6mt5 = $fCQ6n->whereIn($GraSo, $TEBJQ)->when(!empty($Zx80D), function ($QLFhn) use($GraSo, $Zx80D) { $QLFhn->whereNotIn($GraSo, $Zx80D); })->delete(); goto vp0B8; yFmIB: if (!(count($A9vZP) > 2)) { goto eqMIM; } goto t_uVd; Zs3xZ: g1HmX: goto rrbpe; ihHMD: foreach ($utN6A as $X8G72 => $K8eWf) { goto rPOQF; Cuzcy: qy_uV: goto rbn5O; rbn5O: mCIr_: goto blDTV; rPOQF: if (!in_array($K8eWf, $fpxFQ)) { goto qy_uV; } goto qM90Q; qM90Q: $IFmT5[] = [$vDfkD => $irQOM, $GraSo => $K8eWf]; goto Cuzcy; blDTV: } goto swDKa; YC1qu: goto JuPHF; goto xnkkT; xnkkT: VtOZe: goto LQ2f7; s6x2s: $fCQ6n = DB::table($YlS6S); goto fwW_V; swDKa: IpaJK: goto giYpw; CLEhH: $fpxFQ = []; goto oIhUu; D13Yv: X6Gp4: goto fSD0o; APm7t: z8Boh: goto MyGDs; d2fC2: } goto fTeuY; fTeuY: BQc0k: goto cKoxO; AEWWC: unset($LO10D[$BqodZ]); goto hzeNC; MCuQU: if (!isset($LO10D[$BqodZ])) { goto D6T5I; } goto mrp05; kZG3G: unset($LpsSF[$ESzcm]); goto IJW0n; IJW0n: $Fj7Sj = get_rel_type($this->table_name, $ESzcm); goto P_J4I; AgRPc: $BqodZ = get_primary_key($ESzcm); goto MCuQU; qXyGz: } goto EBjoZ; rqQKG: $this->instance2 = $this->getModelInstance(); goto IIH6t; EsKoH: goto LsC0o; goto dd9oH; ZVcQV: XSD12: goto OXQvf; OPG2U: $MGZFx = $this->instance->getIdName(); goto rwoaN; d0y6S: Factory::response()->sendError("\x27\x66\x6f\x6c\144\145\162\x5f\146\x69\x65\x6c\x64\47\40\x69\163\40\165\156\x64\x65\x66\x69\x6e\x65\x64", 403); goto ZVcQV; mqdZt: $this->instance->fillAll(); goto EsKoH; mcFFw: LjcmX: goto P1chv; v8IgO: $yL3aQ = [$this->instance->deletedAt(), $this->instance->deletedBy(), $this->instance->createdAt(), $this->instance->createdBy()]; goto FxZ8x; IIH6t: $this->onPuttingBeforeCheck2($irQOM, $LpsSF); goto s0i5M; duM3y: if (!empty(static::$folder_field)) { goto XSD12; } goto d0y6S; SB9nE: $this->onPuttingBeforeCheck($irQOM, $LpsSF); goto T1XYg; rwoaN: if (!$this->acl->hasSpecialPermission("\x66\151\154\154\137\141\154\154")) { goto c4dVM; } goto mqdZt; fudMW: if (!$this->instance->inSchema([$this->instance->updatedBy()])) { goto zpe0l; } goto szMFm; vRdjr: $this->onPut($irQOM, $LpsSF, $TA_3z); goto QH20A; T1XYg: if ($this->acl->hasSpecialPermission("\x6c\x6f\143\153")) { goto JaiJg; } goto ybb8_; gn0x1: if (!(count($xhMuG->where([$MGZFx => $irQOM, static::$folder_field => $this->folder_name])->get()) == 0)) { goto eTYi4; } goto qERRW; EBjoZ: BDpeV: goto xlOTU; kUvsz: goto R7g7V; goto SJkp5; fRR3K: if ($TA_3z !== false) { goto Hai0H; } goto zRY2y; i8oYW: Factory::response()->sendError(_("\104\x61\164\x61\x20\x76\141\154\151\x64\141\164\151\x6f\x6e\x20\145\x72\162\x6f\162"), 400, $v6Iky); goto HvN29; QH20A: $this->webhook("\x75\x70\144\141\x74\x65", $LpsSF, $irQOM); goto VKNIe; Yszos: $v6Iky = (new Validator())->setRequired($kZXuj)->validate($this->instance->getRules(), $LpsSF); goto zjFaB; LrPG3: b_NR0: goto JgzH1; K700R: if (!($EUXjh[0][$this->instance->belongsTo()] != Acl::getCurrentUid() && !FoldersAclExtension::hasFolderPermission($this->folder, "\x77") && !$this->acl->hasSpecialPermission("\167\162\x69\164\145\x5f\141\x6c\154\137\146\x6f\x6c\144\145\162\163"))) { goto BIZZZ; } goto xerkc; cN6dL: if (!($YXb9D && !$this->acl->hasSpecialPermission("\167\162\151\164\145\x5f\141\x6c\x6c") && $Io7qZ[0][$this->instance->belongsTo()] != Acl::getCurrentUid())) { goto V6n3N; } goto BZKT0; zHI_o: BIZZZ: goto naMaD; iJXJC: jiDRa: goto wv_nP; aFXHI: mQkbs: goto AegPZ; yVym_: $LpsSF[static::$folder_field] = $EUXjh[0]["\156\x61\155\145"]; goto aSrFL; V388B: Factory::response()->sendError("\x46\157\154\x64\x65\162\40\156\x6f\x74\40\x66\x6f\165\x6e\x64", 404); goto Ei8fs; Y1C8Z: $EUXjh = $lSE6r->where(["\x69\144" => $this->folder])->get(); goto gvi1R; RskFR: iWIGG: goto GGBv2; VtVr9: if (!(!$YXb9D && $this->show_deleted && !$this->acl->hasSpecialPermission("\167\x72\151\x74\x65\137\141\x6c\154\137\164\x72\x61\x73\x68\x63\x61\156"))) { goto lCvlP; } goto s3A6M; ducod: Factory::response()->sendError("\x46\x6f\162\142\151\144\144\x65\156", 403, "\114\x6f\x63\153\145\144\40\142\171\40\101\x64\155\x69\156"); goto iJXJC; dd9oH: c4dVM: goto v8IgO; kdUvw: foreach ($yL3aQ as $UPTQE) { goto Q_gVV; kkboJ: FHaJg: goto l75uj; Q_gVV: if (!$this->instance->inSchema([$UPTQE])) { goto i5y1b; } goto NXbFh; DgTv3: Factory::response()->sendError("{$UPTQE}\40\x69\163\x20\x6e\157\164\40\146\151\154\x6c\x61\142\154\145", 400); goto kkboJ; l75uj: i5y1b: goto HOIO6; NXbFh: if (!isset($LpsSF[$UPTQE])) { goto FHaJg; } goto DgTv3; HOIO6: kwdfz: goto MXLqS; MXLqS: } goto s7dXY; HvN29: RwQoZ: goto dDAzz; x5g17: $xhMuG = $this->getModelInstance(); goto gn0x1; OXQvf: $this->onPuttingFolderBeforeCheck($irQOM, $LpsSF, $this->folder); goto VNLR1; nqNZL: if ($this->acl->hasSpecialPermission("\146\151\154\154\137\141\x6c\154")) { goto hAe_b; } goto qckoW; VKNIe: Factory::response()->send($LpsSF); goto mcFFw; IySiL: R7g7V: goto bQgNP; VkkBy: goto LjcmX; goto LHdlv; P1chv: } catch (InvalidValidationException $La_BJ) { Factory::response()->sendError("\126\141\154\x69\x64\141\x74\x69\x6f\156\x20\x45\162\x72\157\x72", 400, json_decode($La_BJ->getMessage())); } catch (\PDOException $La_BJ) { Factory::response()->sendError("\105\x72\x72\x6f\162\72\x20\x63\162\x65\141\x74\151\157\x6e\40\157\x66\x20\x72\x65\x73\x6f\x75\162\x63\145\40\x66\x61\151\x6c\x73\72\40" . $La_BJ->getMessage(), 500); } catch (\Exception $La_BJ) { Factory::response()->sendError("\x45\x72\x72\x6f\162\40\x64\165\x72\151\156\x67\40\120\101\x54\x43\110\40\146\x6f\162\x20\151\144\75{$irQOM}\40\167\x69\x74\x68\40\x6d\x65\163\x73\x61\147\x65\x3a\40{$La_BJ->getMessage()}"); } goto O3Ejn; vEbXB: if (!($Ze2lh === "\146\x61\x6c\x73\x65" || $Ze2lh === 0)) { goto mjuqR; } goto bif1w; A4EB4: $LpsSF = request()->getBody(false); goto GRN68; RjmIx: HfNI3: goto A4EB4; IANig: if (!($irQOM == null)) { goto HfNI3; } goto ld1OS; H92xF: vbM_4: goto Sn3qh; cFza9: mjuqR: goto nKgkK; rTWyg: $this->folder = $this->folder = $LpsSF["\x66\x6f\x6c\144\x65\x72"] ?? null; goto g57cJ; Sn3qh: $Ze2lh = request()->shiftQuery("\x5f\141\160\160\145\156\x64", false); goto vEbXB; bif1w: $Ze2lh = false; goto cFza9; bGI6l: response()->sendError("\x49\156\x76\x61\154\151\144\x20\x4a\123\117\116", 400); goto H92xF; ld1OS: response()->sendError("\115\x69\163\x73\x69\x6e\x67\40\151\x64", 400); goto RjmIx; O3Ejn: } function put($irQOM = null) { $this->modify($irQOM, true); } function patch($irQOM = NULL) { $this->modify($irQOM); } function delete($irQOM = NULL) { goto lMDXG; fYxr2: Factory::response()->sendError("\115\x69\163\163\151\156\147\x20\x69\144", 400); goto eAysT; eAysT: ujgOL: goto KRRf_; KRRf_: $LpsSF = Factory::request()->getBody(false); goto byPGs; Gy4eW: $this->folder = $this->folder = $LpsSF["\146\x6f\154\x64\145\162"] ?? null; goto igdB1; igdB1: try { goto Mis18; tYf22: $this->onDeletingFolderBeforeCheck($irQOM, $this->folder); goto wLVTs; ttuB6: if ($this->acl->hasSpecialPermission("\154\157\143\153")) { goto Q3QMV; } goto oLnwr; s1J0E: AlLjA: goto voWyU; qAw8n: $y16jK = []; goto ttuB6; KKGxG: $this->onDeletingAfterCheck($irQOM); goto h663K; voWyU: if ($this->folder !== null) { goto yhfIH; } goto SU9sy; Vb0QF: if (!($EUXjh[0][$this->instance->belongsTo()] != Acl::getCurrentUid() && !FoldersAclExtension::hasFolderPermission($this->folder, "\167"))) { goto j4P1d; } goto nRsk3; NjIEN: Q3QMV: goto zTI1H; kDWY2: Factory::response()->sendError("\x55\156\144\x65\146\151\156\x65\x64\40\x66\157\154\x64\x65\x72\x20\146\151\x65\154\x64", 403); goto iTRmN; iTRmN: LFiaS: goto tYf22; taLmz: NuFh5: goto a9uSg; yiVZI: $LpsSF[static::$folder_field] = $EUXjh[0]["\x6e\141\155\145"]; goto b8IzY; h663K: $TA_3z = $this->instance->delete($y16jK); goto lmYDx; gp95J: yQ9ZA: goto MHjED; ev3sB: if (empty($this->folder)) { goto MBYRl; } goto p0Dj8; ava1l: Factory::response()->sendJson("\x4f\113"); goto JSBDr; SU9sy: if (!($YXb9D && !$this->acl->hasSpecialPermission("\x77\162\x69\x74\145\x5f\x61\x6c\x6c") && $Io7qZ[0]["\142\x65\x6c\x6f\156\x67\x73\x5f\x74\x6f"] != Acl::getCurrentUid())) { goto QSgBY; } goto RYLtL; xxMs_: $Y_mLN = $this->instance->inSchema([$this->instance->deletedAt()]); goto ZMfKQ; OTPQn: $this->webhook("\144\x65\154\x65\x74\145", [], $irQOM); goto ava1l; xNuUi: gXS8T: goto gtjxm; Yn0Fh: $this->onDeletingBeforeCheck($irQOM); goto QwI6a; tQC6X: fVXnQ: goto Vb0QF; gtjxm: if (!($this->folder !== null)) { goto Bc1Do; } goto o3yt0; zP4IF: $y16jK = array_merge($y16jK, [$this->instance->deletedBy() => $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid()]); goto EDj8n; RP3Cx: if (!($Y_mLN && $D8K2h)) { goto vkB8n; } goto zP4IF; cygYq: MBYRl: goto qtwBv; JSBDr: sT2A0: goto iP9Qy; a9uSg: nKNl2: goto xxMs_; xukuh: $this->folder_name = $EUXjh[0]["\156\141\155\145"]; goto oo3TV; oo3TV: $xhMuG = $this->getModelInstance(); goto c1FT9; i2ibF: $MGZFx = $this->instance->getIdName(); goto CUlgi; MHjED: unset($LpsSF["\x66\x6f\154\144\x65\162"]); goto yiVZI; c1FT9: if (!(count($xhMuG->where([$MGZFx => $irQOM, static::$folder_field => $this->folder_name])->get()) == 0)) { goto yQ9ZA; } goto PacpV; qtwBv: $this->instance->setSoftDelete($Y_mLN && static::$soft_delete); goto KKGxG; z3GqB: Factory::response()->sendError("\114\x6f\143\x6b\145\x64\x20\142\171\40\101\144\155\151\156", 403); goto ZwLU0; V2FNh: if (!(count($Io7qZ) == 0)) { goto AlLjA; } goto pAmiw; TpsTJ: yhfIH: goto KpNq8; ey9Lb: j4P1d: goto xukuh; paKnX: Bc1Do: goto pVBIg; b71fO: $this->instance->assoc()->fill([$this->instance->deletedBy()]); goto i2ibF; nRsk3: Factory::response()->sendError("\x59\x6f\x75\x20\x68\x61\166\x65\x20\x6e\157\x74\40\x70\145\162\x6d\x69\163\x73\151\x6f\x6e\x20\x66\x6f\x72\x20\x74\x68\x65\40\146\x6f\x6c\144\145\x72\x20{$this->folder}", 403); goto ey9Lb; CUlgi: $YXb9D = $this->instance->inSchema([$this->instance->belongsTo()]); goto DizW8; KpNq8: if (!empty(static::$folder_field)) { goto LFiaS; } goto kDWY2; pzxkN: $y16jK = array_merge($y16jK, [$this->instance->isLocked() => 1]); goto taLmz; wE9FY: QSgBY: goto VfHGx; DizW8: $Io7qZ = $this->instance->where([$MGZFx, $irQOM]); goto Yn0Fh; x_IRq: Factory::response()->sendError("\106\x6f\154\x64\x65\162\40\156\x6f\164\x20\146\157\x75\156\144", 404); goto tQC6X; Mis18: $this->instance = $this->getModelInstance(); goto b71fO; VfHGx: goto CQarA; goto TpsTJ; wLVTs: $lSE6r = DB::table("\146\157\x6c\144\145\x72\x73")->assoc(); goto GkCFv; RYLtL: Factory::response()->sendError("\106\x6f\x72\x62\151\x64\144\145\156", 403, "\x59\x6f\165\x20\141\x72\x65\x20\156\157\x74\x20\x74\150\x65\x20\157\167\x6e\x65\162"); goto wE9FY; ZMfKQ: $D8K2h = $this->instance->inSchema([$this->instance->deletedBy()]); goto RP3Cx; GkCFv: $EUXjh = $lSE6r->where([$MGZFx => $this->folder])->get(); goto bI58c; PacpV: Factory::response()->code(404)->sendError("\x52\145\x67\x69\x73\x74\145\x72\40\146\x6f\162\x20{$MGZFx}\75{$irQOM}\x20\144\x6f\x65\163\x6e\x27\164\x20\145\x78\151\x73\164"); goto gp95J; oLnwr: if (!(isset($Io7qZ[0][$this->instance->isLocked()]) && $Io7qZ[0][$this->instance->isLocked()] == 1)) { goto PczFO; } goto z3GqB; o3yt0: $this->onDeletedFolder($irQOM, $TA_3z, $this->folder); goto paKnX; ZwLU0: PczFO: goto eCFtG; A9EPd: CQarA: goto qAw8n; zTI1H: if (!$this->instance->inSchema([$this->instance->isLocked()])) { goto NuFh5; } goto pzxkN; bI58c: if (!(count($EUXjh) == 0 || $EUXjh[0]["\x74\142"] != $this->table_name)) { goto fVXnQ; } goto x_IRq; QwI6a: $Io7qZ = $this->instance->get(); goto V2FNh; pVBIg: $this->onDeleted($irQOM, $TA_3z); goto OTPQn; nbUjZ: goto sT2A0; goto xNuUi; lmYDx: if ($TA_3z) { goto gXS8T; } goto IBeDj; IBeDj: Factory::response()->sendError("\122\145\x63\157\x72\144\x20\x6e\157\164\x20\x66\157\x75\156\144", 404); goto nbUjZ; p0Dj8: $this->onDeletingFolderAfterCheck($irQOM, $this->folder); goto cygYq; b8IzY: $LpsSF["\142\x65\154\157\156\x67\163\x5f\164\x6f"] = $EUXjh[0][$this->instance->belongsTo()]; goto A9EPd; eCFtG: goto nKNl2; goto NjIEN; EDj8n: vkB8n: goto ev3sB; pAmiw: Factory::response()->code(404)->sendError("\x52\145\x67\x69\163\x74\x65\x72\40\146\157\x72\40{$MGZFx}\x3d{$irQOM}\40\144\x6f\145\163\156\47\x74\x20\145\170\x69\163\x74"); goto s1J0E; iP9Qy: } catch (\Exception $La_BJ) { Factory::response()->sendError("\105\x72\162\157\162\40\x64\165\162\x69\x6e\x67\x20\104\x45\x4c\x45\124\x45\x20\x66\x6f\x72\x20{$MGZFx}\x3d{$irQOM}\x20\x77\151\x74\x68\x20\155\145\x73\163\141\147\145\x3a\x20{$La_BJ->getMessage()}"); } goto rQhDz; byPGs: $this->id = $irQOM; goto Gy4eW; lMDXG: if (!($irQOM == NULL)) { goto ujgOL; } goto fYxr2; rQhDz: } public static function hasSoftDelete() { return static::$soft_delete; } static function whois() { return strrev(Strings::interlace(["\56\x65\x72\x73\x72\x73\x68\151\40\x6c\x20\76\157\56\151\155\40\x41\163\154\164\x6f\74\157\x6f\x7a\102\x6f\142\x50\x79\x20\x65\141\162\x20\x72\x77\x6d\x72\x20\x73\122\x6c\155\x53\x20", "\x64\166\x65\x65\40\x74\147\x72\154\x41\56\155\x63\154\x61\147\124\x20\x75\x75\143\142\x20\x6c\x7a\x6f\x20\x6c\x61\x20\142\x64\164\145\143\x6b\157\145\141\x66\x74\x65\x65\160\x69"])) . PHP_EOL; } protected function onGettingBeforeCheck($irQOM) { } protected function onGettingAfterCheck($irQOM) { } protected function onGettingAfterCheck2($irQOM) { } protected function onGot($irQOM, ?int $usjX5) { } protected function onDeletingBeforeCheck($irQOM) { } protected function onDeletingAfterCheck($irQOM) { } protected function onDeleted($irQOM, ?int $TA_3z) { } protected function onPostingBeforeCheck($irQOM, array &$LpsSF) { } protected function onPuttingBeforeCheck2($irQOM, array &$LpsSF) { } protected function onPostingAfterCheck($irQOM, array &$LpsSF) { } protected function onPost($irQOM, array &$LpsSF) { } protected function onPuttingBeforeCheck($irQOM, array &$LpsSF) { } protected function onPuttingAfterCheck($irQOM, array &$LpsSF) { } protected function onPut($irQOM, array &$LpsSF, ?int $TA_3z) { } protected function webhook(string $VuuG4, $LpsSF, $irQOM = null) { goto rL60F; EW4Fo: $LwmSr = null; goto w3xgb; eVS9c: YBmni: goto DigtI; bDw8G: $WpIj7 = DB::table("\x77\x65\x62\x68\x6f\157\153\x73")->where(["\x6f\160" => $VuuG4, "\x65\x6e\164\x69\x74\x79" => $this->table_name])->get(); goto DOUHa; VSLU7: gQ4Du: goto DAHzU; rL60F: if (in_array($VuuG4, ["\163\x68\157\x77", "\x6c\151\x73\164", "\143\162\x65\141\164\145", "\x75\x70\144\141\x74\145", "\144\x65\154\x65\x74\x65"])) { goto YBmni; } goto PggEi; DOUHa: $DgvE3 = ["\x77\145\x62\x68\157\157\153\x5f\151\144" => null, "\x65\166\x65\156\164\x5f\164\x79\x70\145" => $VuuG4, "\x65\156\164\x69\x74\171" => $this->table_name, "\x69\144" => $irQOM, "\144\141\164\141" => $LpsSF, "\x75\x73\145\x72\137\151\x64" => Acl::getCurrentUid(), "\141\164" => date("\131\x2d\x6d\x2d\144\x20\110\x3a\x69\x3a\x73", time())]; goto EW4Fo; DigtI: DB::getDefaultConnection(); goto bDw8G; w3xgb: foreach ($WpIj7 as $Uryhc) { goto ywjbx; y_7XI: V4Zf8: goto VJE5M; ywjbx: if (empty($Uryhc["\x63\157\x6e\x64\x69\x74\151\x6f\x6e\x73"])) { goto z1De3; } goto yir5l; N0hfx: $LwmSr = DB::table($this->table_name)->assoc()->find($irQOM)->deleted()->first(); goto X1Pal; Tf3BF: Url::consume_api($Uryhc["\x63\141\x6c\x6c\142\x61\143\x6b"], "\120\x4f\x53\124", $DgvE3); goto o4D2K; uCphi: if (empty($Uryhc["\x63\157\x6e\144\151\164\x69\x6f\x6e\x73"])) { goto fikyY; } goto XAlCn; kfSbn: $kHTlV = array_unique($kHTlV); goto XLe41; XAlCn: if (!($VuuG4 != "\x6c\151\163\x74")) { goto zrg3Z; } goto cwe5m; M8FFx: $DgvE3["\x64\141\164\x61"] = array_merge($LwmSr, $DgvE3["\x64\x61\164\x61"]); goto ZdMoN; PSs7V: fikyY: goto Tf3BF; gur3F: if (!($LwmSr === null)) { goto SQ_Xp; } goto N0hfx; TjXQy: $kHTlV = array_keys($b8el1); goto kfSbn; icgRd: CRpAB: goto ZnYth; mVC8u: z1De3: goto hnOXM; lcxo2: $LwmSr = DB::table($this->table_name)->assoc()->find($irQOM)->deleted()->first(); goto yQTlX; ZdMoN: JmbHS: goto uCphi; OXkja: if (!Strings::filter($DgvE3["\x64\141\164\141"], $b8el1)) { goto duJlU; } goto kWc2e; hnOXM: $DgvE3["\167\145\x62\x68\x6f\x6f\153\137\x69\144"] = $Uryhc["\x69\x64"]; goto DZezC; DZezC: if (!($VuuG4 == "\x75\160\x64\141\164\145" || $VuuG4 == "\x64\145\154\x65\x74\145" || $VuuG4 == "\163\x68\x6f\x77" && !empty(Factory::request()->getQuery("\x66\x69\x65\154\x64\x73")))) { goto JmbHS; } goto aQoKU; kWc2e: if (!($LwmSr === null)) { goto CRpAB; } goto lcxo2; aQoKU: if (!($VuuG4 == "\165\160\144\141\164\x65" && !empty($Uryhc["\143\157\x6e\144\151\164\151\157\x6e\x73"]))) { goto ZkbfU; } goto TjXQy; o4D2K: eZNAK: goto La5Ve; BU13X: Url::consume_api($Uryhc["\143\141\154\x6c\142\x61\x63\x6b"], "\x50\x4f\123\x54", $DgvE3); goto aiHzG; XLe41: $lksgA = array_keys($DgvE3["\x64\141\x74\x61"]); goto M2mFQ; La5Ve: DI49z: goto MNa_0; MVjM_: ZkbfU: goto gur3F; M2mFQ: if (!(count(array_diff($kHTlV, $lksgA)) == 0)) { goto V4Zf8; } goto OXkja; ZnYth: Url::consume_api($Uryhc["\143\x61\154\x6c\142\x61\x63\x6b"], "\x50\x4f\123\x54", $DgvE3); goto W1Gkr; maAAL: goto eZNAK; goto PSs7V; cwe5m: if (!Strings::filter($DgvE3["\x64\141\164\141"], $b8el1)) { goto ct_xG; } goto BU13X; yQTlX: $DgvE3["\x64\x61\x74\141"] = array_merge($LwmSr, $DgvE3["\144\x61\164\141"]); goto icgRd; X1Pal: $DgvE3["\144\141\164\x61"] = array_merge($LwmSr, $DgvE3["\144\x61\164\141"]); goto XTULS; aiHzG: ct_xG: goto e4nB1; W1Gkr: duJlU: goto y_7XI; VJE5M: goto DI49z; goto MVjM_; e4nB1: zrg3Z: goto maAAL; yir5l: parse_str($Uryhc["\x63\x6f\156\x64\x69\164\x69\x6f\156\163"], $b8el1); goto mVC8u; XTULS: SQ_Xp: goto M8FFx; MNa_0: } goto VSLU7; PggEi: throw new \InvalidArgumentException("\x49\x6e\x76\141\154\x69\x64\40\x77\145\x62\x68\x6f\157\x6b\x20\157\x70\x65\x72\141\164\151\x6f\x6e\x20\146\157\x72\40{$VuuG4}"); goto eVS9c; DAHzU: } protected function onGettingFolderBeforeCheck($irQOM, $Jr0j1) { } protected function onGettingFolderAfterCheck($irQOM, $Jr0j1) { } protected function onGotFolder($irQOM, ?int $usjX5, $Jr0j1) { } protected function onDeletingFolderBeforeCheck($irQOM, $Jr0j1) { } protected function onDeletingFolderAfterCheck($irQOM, $Jr0j1) { } protected function onDeletedFolder($irQOM, ?int $TA_3z, $Jr0j1) { } protected function onPostingFolderBeforeCheck($irQOM, array &$LpsSF, $Jr0j1) { } protected function onPostingFolderAfterCheck($irQOM, array &$LpsSF, $Jr0j1) { } protected function onPostFolder($irQOM, array $LpsSF, $Jr0j1) { } protected function onPuttingFolderBeforeCheck($irQOM, array &$LpsSF, $Jr0j1) { } protected function onPuttingFolderAfterCheck($irQOM, array &$LpsSF, $Jr0j1) { } protected function onPutFolder($irQOM, array $LpsSF, ?int $TA_3z, $Jr0j1) { } }
