<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.13  |
    |              on 2022-01-15 18:30:56              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace simplerest\core\api\v1; use PDO; use simplerest\core\libs\DB; use simplerest\core\libs\Url; use simplerest\libs\Debug; use simplerest\core\libs\Arrays; use simplerest\core\libs\Factory; use simplerest\core\libs\Strings; use simplerest\core\libs\Time; use simplerest\core\Acl; use simplerest\core\libs\Validator; use simplerest\core\interfaces\IApi; use simplerest\core\interfaces\IAuth; use simplerest\core\FoldersAclExtension; use simplerest\core\exceptions\SqlException; use simplerest\core\api\v1\ResourceController; use simplerest\core\exceptions\InvalidValidationException; use simplerest\core\interfaces\ISubResources; abstract class ApiController extends ResourceController implements IApi, ISubResources { public $model_name; public $table_name; protected static $folder_field; protected static $soft_delete = true; protected static $connect_to = []; protected $is_listable; protected $is_retrievable; protected $callable = []; protected $config; protected $impersonated_by; protected $conn; protected $instance; protected $tenantid; protected $id; protected $folder; protected $show_deleted; protected $ask_for_deleted; function __construct($TUPSy = null) { goto kIUvI; jZWMx: F0bnx: goto InTQZ; cTWH5: $this->impersonated_by = $this->auth->impersonated_by ?? null; goto RSyrC; RhloD: switch ($_SERVER["\122\105\121\125\x45\x53\124\137\115\105\124\110\117\x44"]) { case "\107\x45\x54": goto aNiPe; tyBOw: $this->is_listable = true; goto u0r4S; Dc9zm: e0Soy: goto fpyrP; xrSK1: goto e0Soy; goto WUbhr; gHWgC: $this->is_retrievable = ($t5YFE & 8 and 1) || ($t5YFE & 32 and 1); goto xrSK1; mW18l: goto nJhcQ; goto D6VvE; HByjQ: goto RvTvN; goto GwJ3h; fpyrP: if (!($this->is_listable || $this->is_retrievable)) { goto XBDR0; } goto aKuO1; aNiPe: if ($this->acl->hasResourcePermission("\154\x69\163\x74\x5f\141\154\x6c", $this->table_name)) { goto ZbJD2; } goto gs3sa; z6tcF: if ($this->acl->hasResourcePermission("\x73\150\x6f\167\137\x61\x6c\154", $this->table_name)) { goto nFxmk; } goto gHWgC; WUbhr: nFxmk: goto KP9dq; KP9dq: $this->is_retrievable = true; goto Dc9zm; gs3sa: $this->is_listable = ($t5YFE & 16 and 1) || ($t5YFE & 64 and 1); goto mW18l; u0r4S: nJhcQ: goto z6tcF; AcNUw: XBDR0: goto HByjQ; aKuO1: $this->addCallable("\147\145\x74"); goto AcNUw; D6VvE: ZbJD2: goto tyBOw; GwJ3h: case "\x50\117\123\124": goto JANZA; n5UBt: JPwFB: goto A21ut; JANZA: if (!($t5YFE & 4 and 1)) { goto JPwFB; } goto qe5hz; A21ut: goto RvTvN; goto Sdn4l; qe5hz: $this->addCallable("\x67\x65\164"); goto n5UBt; Sdn4l: case "\x50\x55\124": goto kw365; L8Cem: $this->addCallable("\x70\165\164"); goto qrnHp; kw365: if (!($t5YFE & 2 and 1)) { goto K8HvP; } goto L8Cem; vTO_I: goto RvTvN; goto pBtsl; qrnHp: K8HvP: goto vTO_I; pBtsl: case "\x50\x41\124\103\110": goto OH4Bi; n3I9s: $this->addCallable("\160\x75\x74\x63\150"); goto Yi0n1; Yi0n1: bb92R: goto trGbA; trGbA: goto RvTvN; goto w5GN2; OH4Bi: if (!($t5YFE & 2 and 1)) { goto bb92R; } goto n3I9s; w5GN2: case "\x44\x45\x4c\105\x54\x45": goto e43iU; pEJ83: $this->addCallable("\x64\x65\x6c\x65\x74\x65"); goto W9Zqm; W9Zqm: oy3hQ: goto i_B65; i_B65: goto RvTvN; goto lju8I; e43iU: if (!($t5YFE & 1 and 1)) { goto oy3hQ; } goto pEJ83; lju8I: } goto LxniI; LxniI: Yma2_: goto nldKr; nldKr: RvTvN: goto IAKAf; Onssm: goto BbkP7; goto EBe8y; IM05g: $this->conn = DB::getConnection($this->tenantid); goto FlftT; EmPB8: switch ($_SERVER["\122\105\x51\125\105\123\124\137\x4d\105\x54\110\x4f\104"]) { case "\107\105\124": goto P5n9b; lxaYn: bvahq: goto A5KOo; P5n9b: if ($this->acl->hasSpecialPermission("\162\145\141\x64\x5f\141\x6c\154")) { goto pVAe8; } goto Sfl6l; A5KOo: goto Q7gdq; goto eBI_a; Rj_Qo: pVAe8: goto B16Hp; Sfl6l: if (!($this->acl->hasResourcePermission("\x73\x68\157\x77", $this->table_name) || $this->acl->hasResourcePermission("\x73\150\x6f\167\x5f\x61\154\154", $this->table_name))) { goto bV5fl; } goto lOu1O; OAWFo: $this->is_retrievable = true; goto Zarp2; lOu1O: $this->addCallable("\x67\145\164"); goto OAWFo; c9XR4: $this->is_listable = true; goto ALK1l; nqdtH: goto bvahq; goto Rj_Qo; AmMaJ: $this->is_listable = true; goto hhP0f; Zarp2: bV5fl: goto E98eq; ALK1l: $this->is_retrievable = true; goto lxaYn; hhP0f: kKN9_: goto nqdtH; auCGb: $this->addCallable("\x67\x65\164"); goto AmMaJ; E98eq: if (!($this->acl->hasResourcePermission("\154\x69\x73\x74", $this->table_name) || $this->acl->hasResourcePermission("\x6c\151\163\x74\x5f\x61\154\x6c", $this->table_name))) { goto kKN9_; } goto auCGb; B16Hp: $this->addCallable("\147\145\x74"); goto c9XR4; eBI_a: case "\x50\x4f\123\124": goto Zseu_; B1uhi: if (!$this->acl->hasResourcePermission("\143\x72\x65\x61\164\145", $this->table_name)) { goto ruBjj; } goto ORnZO; MZ2cK: ToZVN: goto MdjcW; MdjcW: $this->addCallable("\x70\x6f\x73\164"); goto St432; ORnZO: $this->addCallable("\160\x6f\x73\x74"); goto o8X01; o8X01: ruBjj: goto s0Zc9; s0Zc9: goto nr028; goto MZ2cK; St432: nr028: goto accsK; accsK: goto Q7gdq; goto ru4kP; Zseu_: if ($this->acl->hasSpecialPermission("\167\x72\x69\164\145\x5f\141\x6c\x6c")) { goto ToZVN; } goto B1uhi; ru4kP: case "\x50\x55\124": goto uNsuX; YScQh: TFPTd: goto DA6CC; aSbq1: if (!$this->acl->hasResourcePermission("\165\x70\x64\141\164\145", $this->table_name)) { goto TFPTd; } goto UN3L8; DA6CC: goto S_B1X; goto l2DMj; l2DMj: ta2Q0: goto GZ_uA; uNsuX: if ($this->acl->hasSpecialPermission("\167\x72\151\164\x65\137\141\x6c\x6c")) { goto ta2Q0; } goto aSbq1; UN3L8: $this->addCallable("\160\165\164"); goto YScQh; z5Wvg: S_B1X: goto h3Yyh; GZ_uA: $this->addCallable("\160\165\164"); goto z5Wvg; h3Yyh: goto Q7gdq; goto dRp4e; dRp4e: case "\120\x41\124\x43\x48": goto qd8AW; mFRCh: goto JL1z1; goto dlaOV; LW9hE: $this->addCallable("\x70\141\x74\x63\150"); goto lR47V; Ms8eO: if (!$this->acl->hasResourcePermission("\x75\160\144\x61\x74\145", $this->table_name)) { goto ETrCx; } goto jVNKu; qd8AW: if ($this->acl->hasSpecialPermission("\167\162\151\x74\x65\x5f\141\154\x6c")) { goto fR_dO; } goto Ms8eO; lR47V: JL1z1: goto BM5oV; jVNKu: $this->addCallable("\x70\x61\164\x63\x68"); goto JyXzy; BM5oV: goto Q7gdq; goto Ctpcu; JyXzy: ETrCx: goto mFRCh; dlaOV: fR_dO: goto LW9hE; Ctpcu: case "\104\x45\114\x45\124\x45": goto tuhOZ; J9YuY: if (!$this->acl->hasResourcePermission("\144\x65\x6c\145\164\145", $this->table_name)) { goto hJe_X; } goto fXU9P; QWh4I: hJe_X: goto brt4t; K9k3j: goto Q7gdq; goto b25W4; tuhOZ: if ($this->acl->hasSpecialPermission("\x77\x72\x69\164\x65\x5f\x61\154\154")) { goto lxIPz; } goto J9YuY; DfYKg: x9e_5: goto K9k3j; brt4t: goto x9e_5; goto vJkQU; t8rPq: $this->addCallable("\144\145\x6c\145\164\x65"); goto DfYKg; fXU9P: $this->addCallable("\x64\145\x6c\145\x74\x65"); goto QWh4I; vJkQU: lxIPz: goto t8rPq; b25W4: } goto jZWMx; FuZ_W: $this->tenantid = Factory::request()->getTenantId(); goto MlY6H; IAKAf: GBi15: goto cTWH5; ZO_TP: if (!($t5YFE !== NULL)) { goto GBi15; } goto RhloD; OLnT9: Rih0j: goto SpDRu; EBe8y: nLUtg: goto JXNBL; MlY6H: if (!($this->tenantid !== null)) { goto Tj3Lo; } goto IM05g; VDbti: goto BbkP7; goto OLnT9; FhYqu: $QQgt2 = response()->encoded(); goto FuZ_W; SpDRu: $this->model_name = implode(array_map("\165\x63\146\x69\162\163\x74", explode("\137", $this->table_name))) . "\115\x6f\144\145\154"; goto Onssm; JXNBL: $this->model_name = $E1bpZ[1] . "\x4d\157\144\145\154"; goto S6s6T; FlftT: Tj3Lo: goto hoXhJ; kIUvI: parent::__construct($TUPSy); goto FhYqu; T89Za: AKA5F: goto scgCI; scgCI: $this->table_name = Strings::camelToSnake(Strings::rTrim("\115\x6f\144\x65\x6c", $this->model_name)); goto aKz_t; RSyrC: $this->callable = array_merge($this->callable, ["\150\x65\x61\144", "\157\x70\164\151\x6f\156\163"]); goto oVQ8c; y7W5x: goto Td5h8; goto T89Za; InTQZ: Q7gdq: goto xlQxI; IN3wr: if (preg_match("\57\50\133\x41\x2d\132\x5d\x5b\141\x2d\x7a\60\55\x39\137\135\52\133\x41\55\132\135\52\133\141\55\172\x30\x2d\x39\x5f\135\52\x5b\x41\55\132\x5d\52\133\141\x2d\172\x30\55\71\x5f\135\52\133\x41\55\132\x5d\52\x5b\141\x2d\172\60\x2d\71\137\x5d\x2a\51\x2f", get_called_class(), $E1bpZ)) { goto nLUtg; } goto NCpSS; S6s6T: $this->table_name = Strings::camelToSnake($E1bpZ[1]); goto SW0ui; aKz_t: Td5h8: goto EmPB8; NCpSS: $QQgt2->sendError("\x41\160\151\103\x6f\x6e\164\162\x6f\154\x6c\x65\x72\x20\x77\151\164\150\40\x75\156\144\x65\x66\x69\x6e\x65\144\40\x4d\157\144\145\154", 500); goto VDbti; hoXhJ: if ($this->model_name != null) { goto AKA5F; } goto zfB43; zfB43: if ($this->table_name != null) { goto Rih0j; } goto IN3wr; SW0ui: BbkP7: goto y7W5x; xlQxI: $t5YFE = $this->acl->getTbPermissions($this->table_name, false); goto ZO_TP; oVQ8c: } function head(int $GabDK = null) { goto aOIJK; ixqIH: ob_start(); goto shPkL; shPkL: $this->get($GabDK); goto TOoOY; aOIJK: if (!method_exists($this, "\147\x65\164")) { goto ndrdR; } goto ixqIH; TOoOY: ob_end_clean(); goto opHvX; opHvX: ndrdR: goto NA43a; NA43a: } function options() { } protected function getModelInstance($fYxSf = "\x41\x53\123\117\103", bool $MR1I1 = false) { goto HybLF; M1WZg: $fNEzs = get_model_namespace() . $this->model_name; goto lyq5B; Wtc4e: return $ScGji; goto kOGMR; E_kIA: if (!($MR1I1 && !empty($ScGji))) { goto DOMMJ; } goto Wtc4e; kOGMR: DOMMJ: goto M1WZg; lyq5B: $ScGji = (new $fNEzs(true))->setFetchMode($fYxSf); goto Fuz6h; necqF: return $ScGji; goto Y0_8q; HybLF: static $ScGji; goto E_kIA; Fuz6h: DB::setModelInstance($ScGji); goto necqF; Y0_8q: } static function getConnectable() { return static::$connect_to; } function get($GabDK = null) { goto vZx7k; d1L9q: Factory::response()->sendError("\125\x6e\x61\165\164\x68\157\162\151\x7a\145\x64", 401, "\131\157\165\40\x61\162\x65\x20\156\x6f\164\x20\141\x6c\x6c\157\x77\145\x64\x20\164\x6f\40\162\145\x74\x72\x69\x65\x76\x65"); goto E63QK; xwx9P: $KZ0Y9 = get_schema_name($this->table_name); goto e_Zqi; ZpE06: $this->id = $GabDK; goto CEHWj; iEqY2: if (empty($NYm1G)) { goto C3bA7; } goto xwx9P; LR_YS: feYBY: goto dijRb; Q_Dtq: Factory::response()->sendError("\125\x6e\141\x75\164\150\157\x72\x69\x7a\145\144", 403, "\x59\x6f\x75\40\141\x72\x65\40\156\x6f\x74\x20\x61\154\x6c\157\167\x65\144\x20\x74\157\40\x6c\151\x73\x74\41\x21\41"); goto LR_YS; A7HNH: $qYtCa = Factory::request()->shiftQuery("\151\x6e\x63\x6c\x75\x64\x65"); goto N8ymV; KH6p2: if (empty($DH3I0)) { goto r524u; } goto mmkNp; hKw39: try { goto zZa_Y; bbdll: tEv7r: goto Bdcgp; VTMxZ: if (!($vZvU_ == NULL)) { goto F0uOQ; } goto OsduW; oYDfp: foreach ($VX3BO as $gK9hD => $QV1pg) { goto sdKAu; yuxrZ: r4lE1: goto BoBAL; A4z6u: byBq8: goto Hog6y; VBhm7: $G0uHG = $m4gBu[2]; goto Q24Yt; EjX8P: response()->sendError("\125\x6e\153\x6e\x6f\167\x6e\40\x66\x69\x65\x6c\x64\x20\47{$QV1pg[0]}\47", 400); goto c3V8L; npdP_: $ZGJZu[] = "{$bbqiM}\x20\141\x73\x20\x5f\137{$bbqiM}\x5f\x5f"; goto WTAOp; Axb2B: if (in_array($G0uHG, $U_CdA)) { goto wrz22; } goto sCNep; MQmos: if (in_array($aBBJK, $Nmf28)) { goto C4n9F; } goto wPdrs; fff9r: $bbqiM = $m4gBu[1]; goto VBhm7; c3V8L: goto SOAhg; goto TA_Go; BJZbp: $U_CdA = array_keys($FqYMh["\x61\164\x74\162\x5f\x74\171\160\145\163"]); goto Axb2B; Hog6y: $FqYMh = get_schema($bbqiM); goto BJZbp; ouOt1: wrz22: goto svP2k; TA_Go: au_GV: goto fff9r; za3TV: response()->sendError("\x45\156\164\151\164\171\40\47{$bbqiM}\47\40\x69\x73\x20\156\x6f\x74\x20\x61\166\141\x69\154\x61\x62\x6c\145\x20\141\x73\x20\x73\x75\x62\162\145\x73\157\165\162\143\145", 400); goto A4z6u; gSh2F: C4n9F: goto yuxrZ; Q24Yt: if (!(empty(static::$connect_to) || !in_array($bbqiM, static::$connect_to))) { goto byBq8; } goto za3TV; sdKAu: $aBBJK = $QV1pg[0]; goto MQmos; wPdrs: if (preg_match("\x2f\50\x5b\141\x2d\x7a\x30\x2d\71\137\x2d\x5d\53\51\134\56\x28\133\141\55\172\x30\55\x39\x5f\55\x5d\x2b\x29\57\x69", $aBBJK, $m4gBu)) { goto au_GV; } goto EjX8P; jv7Vi: SOAhg: goto gSh2F; svP2k: $this->instance->qualify(); goto npdP_; sCNep: response()->sendError("\x45\156\164\x69\x74\x79\40\47{$bbqiM}\47\x20\x64\157\x65\163\40\156\x6f\164\x20\x68\141\x76\145\x20\x61\x20\146\151\145\x6c\144\x20\156\x61\155\x65\144\40\x27{$G0uHG}\x27", 400); goto ouOt1; WTAOp: $VX3BO[$gK9hD][0] = "\x5f\137{$bbqiM}\137\137\56{$G0uHG}"; goto jv7Vi; BoBAL: } goto H0o_C; nKP59: $QQgt2 = $this->getSubResources($this->table_name, static::$connect_to, $this->instance, $this->tenantid); goto I3tlL; txZP8: if (!isset($P3ytl["\157\x66\x66\x73\x65\x74"])) { goto eZN64; } goto FR_b4; bQgrW: goto xNqWO; goto ABBSy; HN1bA: $aBBJK = DB::table("\x66\157\x6c\x64\x65\x72\163")->assoc(); goto vXM3V; XJ5hW: $uy3se = []; goto KmQAn; mVtki: $QQgt2 = Factory::response()->setPretty($Kpg3M); goto LuO5u; H0o_C: vVUA4: goto o1dGi; yPTpY: if (!(count($qPuRL) == 0 || $qPuRL[0]["\164\142"] != $this->table_name)) { goto vkj5o; } goto JVctD; yezLd: K0UCS: goto Kf8sq; u4UXu: OaRAX: goto vGJDY; pEHAH: if (!$this->instance->inSchema([$this->instance->belongsTo()])) { goto hl4gk; } goto JlCG6; OqDzT: foreach ($ZGJZu as $UNlH4) { $this->instance->join($UNlH4); MaoL_: } goto dtcub; ectR2: qc9AT: goto CqjZQ; lrTJM: $this->instance->having([$XpGiH, $qkMzv, $DgKBM]); goto bfOJv; zZa_Y: $this->instance = $this->getModelInstance(); goto zttZM; lye5l: goto K0UCS; goto KkljQ; zqqg9: $P3ytl["\160\141\x67\145"] = $vZvU_ + 1; goto yng0_; WBQpa: goto BjZ8V; goto u4UXu; JbxVm: $P3ytl["\137\x72\x65\x6c\141\164\145\144"] = $_GET["\137\x72\145\154\x61\x74\145\144"]; goto JDTLE; nOFG5: XXQ_f: goto A_34l; yWIwS: $VX3BO = Arrays::nonassoc($VX3BO); goto WjMv2; c8J7e: if (empty($e1i00)) { goto kAFCN; } goto ssVAS; cZSeZ: $fsPFd = $GZCLm; goto hb2ey; QDsoP: koDQI: goto nKP59; qEVwN: phAU9: goto a1TO1; ujTT8: ZjsnR: goto vWwhf; DuxqO: xNqWO: goto de1AE; ydZc3: if (!($vZvU_ == NULL)) { goto Y5SXk; } goto wz3Os; DoqE5: if (!($this->folder !== null)) { goto WipS0; } goto g44U3; g44U3: $this->onGettingFolderBeforeCheck($GabDK, $this->folder); goto HN1bA; ZXb7L: Factory::response()->sendError("\x46\x6f\x72\x62\x69\144\144\145\x6e", 403, "\x27\146\x6f\154\144\145\162\137\146\151\145\x6c\x64\47\40\151\163\x20\x75\x6e\x64\145\146\x69\x6e\x65\144"); goto qEVwN; RTTmP: Nt7f5: goto e79DN; g6Dmj: $J32YJ = Arrays::shift($VX3BO, "\x71"); goto pJoDM; OTlPn: vRX4s: goto RxUGC; BP2Bl: if (!isset($P3ytl["\154\x69\x6d\x69\164"])) { goto fef0o; } goto IQR7J; pv9WK: $qkMzv = $m4gBu[4]; goto clfK2; lrMrh: goto NKkfm; goto OTlPn; RxUGC: if (!(!$this->acl->isGuest() && $ZNlZO && !$this->acl->hasSpecialPermission("\x72\145\141\144\137\x61\x6c\x6c") && !$this->acl->hasResourcePermission("\x6c\151\163\164\137\141\x6c\x6c", $this->table_name))) { goto eQDTA; } goto UDq92; vXM3V: $qPuRL = $aBBJK->where(["\151\x64" => $this->folder])->get(); goto yPTpY; Kf8sq: auVv6: goto DuxqO; Ijeg9: goto K0UCS; goto vqHAg; iMk10: if (!$this->acl->isGuest()) { goto bvdRo; } goto c3NO0; JDTLE: hEp2v: goto j_Pmx; JXHh1: goto aLfvy; goto X83MV; Bdcgp: $ReDgq = $this->instance->{$mHKVB}($jHD_6, $dBfS5); goto l3nWn; n3Jv5: if ($this->instance->inSchema(["\x67\x75\x65\x73\164\x5f\x61\x63\x63\145\x73\163"])) { goto h3R_c; } goto g1jjs; kjr2E: fF51m: goto zqqg9; nTTvg: if (!($sobQe != NULL)) { goto FQYas; } goto W2IbL; tBeW3: if ($this->folder_access) { goto KPmnT; } goto TqDQc; zqaCo: FgVbj: goto cEZ0n; clfK2: $this->instance->having(["{$KQyJY}\50{$hxIpr}\51", $qkMzv, $DgKBM]); goto tQHr1; i8yCb: if (!(!$this->acl->hasSpecialPermission("\x72\145\x61\144\x5f\x61\x6c\x6c") && !$this->acl->hasResourcePermission("\x6c\x69\163\164\x5f\141\154\x6c", $this->table_name))) { goto jSjKa; } goto bABP6; z8dQl: $QQgt2->setPaginator($ER4ut); goto KLYQW; lTLTS: $dBfS5 = $m4gBu[1]; goto bcp2U; lVIEK: $ReDgq = $this->instance->get(); goto KFbaL; E33ok: mJJGP: goto l7gYz; JQ0ia: $this->onGettingAfterCheck($GabDK); goto ZCm_L; Mfcdp: wVtwC: goto NRDhM; Js14W: UrRas: goto PgvVZ; tBuiL: vkj5o: goto giwPN; hwLcp: $O2GIo = Arrays::shift($VX3BO, "\x70\162\x6f\x70\x73"); goto gZSdG; Pb6a6: $VX3BO[] = [static::$folder_field, $qPuRL[0]["\x6e\141\155\x65"]]; goto MLG2s; dWsEe: kUxct: goto OqCsI; tMncm: if (empty($this->folder)) { goto Nt7f5; } goto ONzaV; iKhAj: hl4gk: goto F1Bvv; DlM2E: response()->send($QQgt2); goto zsdrV; WWE2D: foreach ($VX3BO as $JT4F5 => $K84HO) { goto lrmC1; lrmC1: if (!($K84HO == "\116\125\x4c\114" || $K84HO == "\x6e\165\154\x6c")) { goto myVgm; } goto Nky0I; Fdjns: myVgm: goto K1_uf; K1_uf: ik85q: goto NNTcj; Nky0I: $VX3BO[$JT4F5] = NULL; goto Fdjns; NNTcj: } goto keIpT; nDCJx: if ($this->acl->isGuest()) { goto AqONu; } goto rA2NQ; Jx90v: $tLirR = (int) DB::table($this->table_name)->column()->when(!empty($ZGJZu), function ($eMSwJ) use($ZGJZu) { goto Vr0mH; Vr0mH: $eMSwJ->qualify(); goto HEkPR; WVfV8: DWqVd: goto M6i04; HEkPR: foreach ($ZGJZu as $UNlH4) { $eMSwJ->join($UNlH4); XHsbf: } goto WVfV8; M6i04: })->where($VX3BO)->count(); goto yZZnA; XeWfy: $VX3BO[] = [$this->instance->belongsTo(), $qPuRL[0][$this->instance->belongsTo()]]; goto lrMrh; ZCm_L: if (!($this->ask_for_deleted && !$this->acl->hasSpecialPermission("\162\145\x61\144\x5f\x61\x6c\154\137\164\162\x61\x73\150\143\141\x6e"))) { goto aQzGR; } goto pEHAH; vU79t: $xN87Y = Arrays::shift($VX3BO, "\x6f\146\146\x73\145\164", 0); goto LtA1i; LtA1i: $RR9Gk($fsPFd); goto sEw7m; hA9_c: $QQgt2 = $ReDgq[0]; goto IkgaQ; sl7oD: $this->instance->orderBy($z9v0N); goto cMpy_; ornGd: $ReDgq = $this->getSubResources($this->table_name, static::$connect_to, $this->instance, $this->tenantid); goto E33ok; F1Bvv: aQzGR: goto Ir0pi; aA3Jd: if (!($GabDK == null)) { goto GvVT5; } goto Y1tcz; WjMv2: $PPhld = ["\145\x71", "\x67\164", "\x67\x74\145\x71", "\154\x74\145\x71", "\x6c\x74", "\x6e\145\161"]; goto FTp0q; fUWr3: eQDTA: goto imEDC; IkAQr: HOT0g: goto M6Yjn; dtcub: AQ5wy: goto nOFG5; A_34l: if (empty($this->folder)) { goto vRX4s; } goto hJALX; FWCmW: AgdLd: goto m90cr; KQTh6: if (!($HOK4R !== true)) { goto cMS1t; } goto QjUS2; kcTIo: Factory::response()->sendError("\106\157\162\x62\151\x64\144\145\x6e", 403, "\146\157\154\144\x65\162\137\146\x69\145\154\x64\40\x69\163\x20\x75\156\x64\145\146\151\x6e\x65\144"); goto midFN; GCKiH: $vZvU_ = Arrays::shift($VX3BO, "\x70\x61\147\145"); goto pUBKd; PZE8T: if ($vZvU_ != NULL || $GZCLm != NULL) { goto D53Xy; } goto yNwRO; Ir0pi: $n2MyZ = $this->instance->getIdName(); goto aA3Jd; Mw0Oq: F0uOQ: goto cZSeZ; w2Vbl: if (!($fsPFd != NULL)) { goto R_jeb; } goto z0m2t; v2wKW: $P3ytl["\164\x65\156\141\156\x74\151\x64"] = $_GET["\164\145\x6e\141\156\x74\x69\x64"]; goto FWCmW; m90cr: if (!isset($_GET["\137\162\145\x6c\141\x74\x65\x64"])) { goto hEp2v; } goto JbxVm; riofK: $e1i00 = $e1i00 != NULL ? explode("\54", $e1i00) : NULL; goto G3Fm6; dNyLy: if (isset($P3ytl["\160\141\x67\145\123\151\172\145"])) { goto wVtwC; } goto zB3S8; z0m2t: $this->instance->limit($fsPFd); goto B69UY; ZcxNj: lf86M: goto v3qSi; JVctD: Factory::response()->sendError("\106\157\154\x64\x65\x72\40\156\157\x74\40\146\157\x75\156\x64", 404); goto tBuiL; AecHJ: goto FgVbj; goto viAev; KmQAn: if (!($ttvEe != null)) { goto qc9AT; } goto Eu35z; iwpGP: WipS0: goto OAV7B; NXg3p: $hxIpr = $m4gBu[2]; goto oKZFU; fgI1D: $ZNlZO = $this->instance->inSchema([$this->instance->belongsTo()]); goto g6Dmj; U0bLu: foreach ($VX3BO as $aBBJK => $s11DD) { goto Z1kgv; GwOQm: ddlGB: goto mHCko; Z1kgv: if (!(!is_array($s11DD) && strpos($s11DD, "\54") === false)) { goto ddlGB; } goto cFU2C; cFU2C: $wYHZM[$aBBJK] = $s11DD; goto GwOQm; mHCko: Wsvv7: goto cK6bT; cK6bT: } goto IkAQr; V_7IU: eZN64: goto BP2Bl; vWwhf: if (!(!empty($qYtCa) && !empty($qYtCa[0]))) { goto Ju4YQ; } goto TktOY; OAV7B: if ($GabDK != null) { goto zUo69; } goto hwLcp; cV0c7: $vZvU_ = (int) $vZvU_; goto k5DBg; X83MV: ETGeP: goto lTLTS; Om3dH: if (!($GZCLm != null)) { goto ZL8YJ; } goto YUnTI; e79DN: $Kpg3M = !empty($Kpg3M) && !in_array($Kpg3M, ["\146\141\x6c\163\145", 0, "\157\x66\146"]); goto IfAcj; pDpTz: $dBfS5 = NULL; goto JXHh1; KFRza: if (!$this->config["\x69\156\143\154\x75\144\x65\x5f\145\x6e\151\164\171\x5f\156\141\155\145"]) { goto yYgx2; } goto aQ381; cEZ0n: TldaW: goto W2MGH; hSCvA: $RR9Gk = function (&$fsPFd) { goto K33N_; KGG00: fXyui: goto IrYNh; K33N_: if ($fsPFd == NULL) { goto nBPWG; } goto ef2Xf; e6o0Q: $fsPFd = $this->config["\160\141\x67\x69\x6e\141\x74\157\162"]["\x6d\x61\170\137\x6c\151\155\x69\164"]; goto xxr84; qvZDh: aNRtZ: goto nQK07; xxr84: goto UHh29; goto qvZDh; nQK07: $fsPFd = min($fsPFd, $this->config["\160\x61\x67\x69\x6e\141\x74\157\x72"]["\x6d\x61\x78\x5f\x6c\151\155\x69\164"]); goto ecszk; eI9YS: goto fXyui; goto m2wLP; m2wLP: nBPWG: goto NuoNP; ef2Xf: if ($fsPFd != 0) { goto aNRtZ; } goto e6o0Q; NuoNP: $fsPFd = min($this->config["\160\141\x67\151\x6e\141\164\157\162"]["\x6d\141\x78\x5f\154\x69\155\x69\164"], $this->config["\160\x61\147\151\x6e\141\164\157\162"]["\x64\x65\x66\141\x75\154\164\137\x6c\151\x6d\x69\x74"]); goto KGG00; ecszk: UHh29: goto eI9YS; IrYNh: }; goto GCKiH; FvQKG: $RR9Gk($GZCLm); goto VTMxZ; LuO5u: $tLirR = null; goto vCI78; wsAMa: if (!(isset($VX3BO[$this->instance->createdBy()]) && $VX3BO[$this->instance->createdBy()] == "\x6d\x65")) { goto SgkGf; } goto TRXnZ; LKqeo: $VX3BO[] = ["\147\165\x65\x73\164\137\141\x63\x63\145\163\x73", 1]; goto Ijeg9; bfOJv: BjZ8V: goto dY4yr; Bm7L3: $VX3BO = [[$n2MyZ, $GabDK]]; goto ERR8U; SSSCm: $ttvEe = $ttvEe != NULL ? explode("\54", $ttvEe) : NULL; goto EvYqU; MMtxM: if (!$ZNlZO) { goto D7jLO; } goto DIWfb; yxfgu: $HOK4R = (new Validator())->setRequired(false)->ignoreFields($uy3se)->validate($this->instance->getRules(), $wYHZM); goto KQTh6; ABBSy: SAkyC: goto nDCJx; rA2NQ: if (!($ZNlZO && !$this->acl->hasSpecialPermission("\x72\x65\141\x64\137\141\154\x6c") && !$this->acl->hasResourcePermission("\163\150\157\167\137\x61\154\x6c", $this->table_name))) { goto M2L5j; } goto JPKZf; JlCG6: $VX3BO[$this->instance->belongsTo()] = Acl::getCurrentUid(); goto iKhAj; c3NO0: if (!$ZNlZO) { goto nHCbd; } goto i8yCb; NRDhM: if (!preg_match("\x2f\x28\155\151\156\174\x6d\x61\x78\x7c\x73\165\x6d\174\141\166\147\174\143\157\165\156\164\51\x5c\x28\50\133\x61\55\172\134\52\135\x2b\x29\134\51\x28\40\x61\x73\x20\x5b\x61\x2d\172\135\x2b\51\77\x2f\151", $O2GIo, $m4gBu)) { goto XXbSp; } goto OavFc; VmmZR: $VX3BO[] = [static::$folder_field, NULL, "\111\x53"]; goto yezLd; jwdKu: $this->instance->where($VX3BO); goto nTTvg; WIpgA: $this->onGot($GabDK, 1); goto F2Cic; W2IbL: $sobQe = explode("\x2c", $sobQe); goto jaWmX; K_hpp: if ($vZvU_ + 1 <= $IWb1p) { goto fF51m; } goto SSPfm; dY4yr: if (!($z9v0N != NULL)) { goto thWMh; } goto sl7oD; yNwRO: $fsPFd = Arrays::shift($VX3BO, "\x6c\151\x6d\x69\x74"); goto vU79t; ZzJQC: $this->onGettingAfterCheck2($GabDK); goto yWIwS; FTp0q: $Zt8Z4 = ["\75", "\x3e", "\76\75", "\74\75", "\x3c", "\x21\x3d"]; goto BwG2p; G3Fm6: $Nmf28 = $this->instance->getAttr(); goto NE5fp; MLG2s: $VX3BO[] = [$this->instance->belongsTo(), $qPuRL[0][$this->instance->belongsTo()]]; goto bQgrW; a1TO1: $VX3BO[] = [static::$folder_field, $qPuRL[0]["\156\x61\x6d\x65"]]; goto XeWfy; GVmhY: WjSBf: goto FKjTT; WJGLc: sHdbg: goto wsAMa; eNvUk: M2L5j: goto KtZif; oKZFU: $DgKBM = $m4gBu[3]; goto pv9WK; KkljQ: h3R_c: goto LKqeo; Jqbrz: zUo69: goto Bm7L3; bcp2U: aLfvy: goto joVlS; KLYQW: mhUWO: goto cuwyH; NE5fp: foreach ((array) $e1i00 as $BRPp3) { goto BlNpz; BlNpz: if (in_array($BRPp3, $Nmf28)) { goto jGqII; } goto GSfHP; orpxD: jGqII: goto Yf9HJ; Yf9HJ: UuyOr: goto O_j7_; GSfHP: Factory::response()->sendError("\125\156\153\x6e\x6f\167\x6e\x20\x66\x69\x65\x6c\x64\x20\47{$BRPp3}\47", 400); goto orpxD; O_j7_: } goto CDx1t; WFqiC: TxCTT: goto tMncm; xi3rl: jB0P1: goto XJ5hW; T5cgg: $DgKBM = $m4gBu[2]; goto uJRuI; QfiC5: cMS1t: goto WFqiC; o1dGi: if (empty($ZGJZu)) { goto XXQ_f; } goto OqDzT; UeLLZ: Qa19S: goto ksENX; viAev: bM8k1: goto AB4vg; jaWmX: $this->instance->groupBy($sobQe); goto xALNH; aQ381: $QQgt2 = [$this->table_name => $ReDgq]; goto FGO0H; yng0_: if (!isset($_GET["\164\x65\156\x61\x6e\164\151\144"])) { goto AgdLd; } goto v2wKW; Hujip: goto UrRas; goto jlU6a; j_Pmx: $s4PD0 = $this->config["\x52\105\115\x4f\126\105\x5f\101\120\x49\137\x53\114\x55\x47"] ? '' : "\x2f\141\160\x69"; goto FcwAR; EvYqU: foreach ((array) $ttvEe as $BRPp3) { goto tDCwG; tDCwG: if (in_array($BRPp3, $Nmf28)) { goto ZUJHt; } goto X3Utu; X3Utu: Factory::response()->sendError("\125\156\x6b\x6e\157\x77\156\x20\x66\x69\145\x6c\x64\40\47{$BRPp3}\x27\x20\151\x6e\x20\x65\170\x63\154\165\144\145", 400); goto aBmsf; aBmsf: ZUJHt: goto W8IRk; W8IRk: Ztw3x: goto ccSjV; ccSjV: } goto xi3rl; TqDQc: Factory::response()->sendError("\x46\x6f\162\x62\151\x64\x64\x65\x6e", 403, "\131\x6f\x75\x20\x64\157\x6e\x27\x74\40\150\141\x76\x65\40\160\x65\x72\155\x69\163\163\x69\157\156\x20\x66\157\x72\x20\164\x68\145\x20\146\x6f\154\x64\145\x72\40{$this->folder}"); goto YbVYZ; ssVAS: $this->instance->select($e1i00); goto dQnGE; bJzSq: AQfKk: goto VlQxC; zB3S8: $P3ytl["\160\x61\147\145\123\x69\x7a\145"] = $GZCLm; goto Mfcdp; giwPN: $this->folder_access = $this->acl->hasSpecialPermission("\x72\x65\x61\144\x5f\141\154\154\x5f\146\157\154\144\x65\x72\163") || $qPuRL[0]["\x62\145\154\x6f\x6e\x67\x73\x5f\164\157"] == Acl::getCurrentUid() || FoldersAclExtension::hasFolderPermission($this->folder, "\x72"); goto tBeW3; ez2Uo: $LTaL0 = $LTaL0 != "\60" && $LTaL0 != "\146\x61\x6c\163\x65"; goto WaIF2; apSd7: nHCbd: goto VhDet; WaIF2: $n2MyZ = $this->instance->getSchema()["\151\x64\x5f\x6e\x61\x6d\145"]; goto IEvdT; wz3Os: $vZvU_ = ceil($xN87Y / $fsPFd) + 1; goto oVvy2; v3qSi: $ER4ut = ["\164\157\x74\141\154" => $tLirR, "\143\x6f\165\x6e\x74" => count($ReDgq), "\x63\165\x72\162\145\x6e\164\120\x61\147\145" => $vZvU_, "\164\157\x74\x61\154\x50\x61\x67\145\x73" => $IWb1p, "\x70\x61\147\145\x53\151\172\145" => $GZCLm, "\156\x65\170\x74\x55\x72\154" => $jorQN]; goto z8dQl; l7gYz: goto yqzZz; goto bbdll; cuwyH: if (!$this->folder) { goto kUxct; } goto qvR0g; twYhf: jJHIQ: goto dff6C; Y1tcz: $fIBUu = [$this->instance->createdBy(), $this->instance->updatedBy(), $this->instance->deletedBy(), $this->instance->belongsTo(), "\165\163\145\x72\137\151\x64"]; goto NvknW; BwG2p: foreach ($VX3BO as $JT4F5 => $K84HO) { goto HROuQ; qlP80: yoGNx: goto FkG5P; BF16a: if (!(count($K84HO) == 2)) { goto yoGNx; } goto dQY6w; z3QNl: $VX3BO[$JT4F5] = [$EKyY1, $ZLG2K]; goto Azq1h; lKKdu: ru4m5: goto tNYnt; Azq1h: foreach ($ZLG2K as $kzyk9) { $wYHZM[$EKyY1][] = $kzyk9; ouO4_: } goto fjs5X; tnvJ_: if (is_array($K84HO[1])) { goto ru4m5; } goto BF16a; Yla7F: if (!(strpos($s11DD, "\54") !== false)) { goto KK7dX; } goto FZj7m; FkG5P: $s11DD = $K84HO[1]; goto Yla7F; tI14F: $VX3BO[$JT4F5] = [$K84HO[0], NULL, "\111\123"]; goto n1EZD; RcTFE: $EKyY1 = $K84HO[0]; goto tnvJ_; n1EZD: TIz_h: goto qlP80; qw5gg: lJr3x: goto Xe9fR; FZj7m: $ZLG2K = explode("\54", $s11DD); goto z3QNl; fjs5X: MTG2i: goto PwDiB; bVbcv: unset($VX3BO[$JT4F5]); goto tI14F; dQY6w: if (!($K84HO[1] == "\156\x75\154\154\x21")) { goto TIz_h; } goto bVbcv; dNgKi: goto SdtbT; goto lKKdu; WeG5L: SdtbT: goto qw5gg; IeTcv: N_pKX: goto WeG5L; Xe9fR: iWVvn: goto qQjON; tNYnt: foreach ($K84HO[1] as $MrHHt => $s11DD) { goto icmDo; uhpea: le5QZ: goto NNJFe; icmDo: switch ($MrHHt) { case "\143\157\156\164\x61\151\156\x73": goto EbLyF; Awtpi: $uy3se[] = $EKyY1; goto SzjRH; EbLyF: $VX3BO[$JT4F5] = [$EKyY1, "\x25" . $s11DD . "\x25", "\x6c\151\x6b\x65"]; goto Awtpi; naM2U: goto le5QZ; goto HlVeO; SzjRH: $wYHZM[$EKyY1][] = $s11DD; goto naM2U; HlVeO: case "\156\x6f\164\103\157\156\164\141\x69\x6e\x73": goto NNQPP; ktstF: $wYHZM[$EKyY1][] = $s11DD; goto IGobC; IGobC: goto le5QZ; goto LRbly; o_PEi: $uy3se[] = $EKyY1; goto ktstF; NNQPP: $VX3BO[$JT4F5] = [$EKyY1, "\45" . $s11DD . "\45", "\156\157\164\x20\154\151\x6b\145"]; goto o_PEi; LRbly: case "\163\164\141\162\164\163\127\x69\164\x68": goto JRMoA; JRMoA: $VX3BO[$JT4F5] = [$EKyY1, $s11DD . "\45", "\154\x69\153\145"]; goto cbdC3; IbpPQ: goto le5QZ; goto oB3gU; cbdC3: $uy3se[] = $EKyY1; goto p1Pup; p1Pup: $wYHZM[$EKyY1][] = $s11DD; goto IbpPQ; oB3gU: case "\x6e\157\x74\123\x74\x61\162\164\163\127\x69\x74\150": goto HdQgc; cB12C: $uy3se[] = $EKyY1; goto Ptxxy; HdQgc: $VX3BO[$JT4F5] = [$EKyY1, $s11DD . "\x25", "\156\157\164\x20\154\151\x6b\145"]; goto cB12C; Ptxxy: $wYHZM[$EKyY1][] = $s11DD; goto X5Y3B; X5Y3B: goto le5QZ; goto QNHHa; QNHHa: case "\x65\156\144\x73\x57\x69\x74\150": goto XuZra; jysaG: $uy3se[] = $EKyY1; goto HYREj; Gmovx: goto le5QZ; goto jt0ls; XuZra: $VX3BO[$JT4F5] = [$EKyY1, "\x25" . $s11DD, "\154\x69\x6b\x65"]; goto jysaG; HYREj: $wYHZM[$EKyY1][] = $s11DD; goto Gmovx; jt0ls: case "\x6e\x6f\x74\x45\156\x64\163\x57\x69\x74\150": goto gQIgD; nM12N: $wYHZM[$EKyY1][] = $s11DD; goto o52CA; o52CA: goto le5QZ; goto h87N4; qALHV: $uy3se[] = $EKyY1; goto nM12N; gQIgD: $VX3BO[$JT4F5] = [$EKyY1, "\x25" . $s11DD, "\156\157\x74\x20\x6c\x69\x6b\145"]; goto qALHV; h87N4: case "\x69\156": goto zXrP3; nx5ji: goto le5QZ; goto PLvwQ; aiKMh: WTq7h: goto nx5ji; bm6dm: $ZLG2K = explode("\x2c", $s11DD); goto D3Kz6; zXrP3: if (!(strpos($s11DD, "\x2c") !== false)) { goto WTq7h; } goto bm6dm; oKY4u: foreach ($ZLG2K as $kzyk9) { $wYHZM[$EKyY1][] = $kzyk9; gyClU: } goto JyK5W; D3Kz6: $VX3BO[$JT4F5] = [$EKyY1, $ZLG2K, "\111\x4e"]; goto oKY4u; JyK5W: T_wtw: goto aiKMh; PLvwQ: case "\156\157\x74\x49\156": goto BGNvQ; uwtNm: $ZLG2K = explode("\54", $s11DD); goto eKB_7; MlGO_: anMop: goto c2Pmq; aRTof: Vt5kd: goto MlGO_; cyTOl: foreach ($ZLG2K as $kzyk9) { $wYHZM[$EKyY1][] = $kzyk9; OLBd0: } goto aRTof; BGNvQ: if (!(strpos($s11DD, "\54") !== false)) { goto anMop; } goto uwtNm; c2Pmq: goto le5QZ; goto N268h; eKB_7: $VX3BO[$JT4F5] = [$EKyY1, $ZLG2K, "\x4e\x4f\124\x20\x49\116"]; goto cyTOl; N268h: case "\x62\x65\x74\167\x65\145\156": goto ByZ_W; q2Kp_: unset($VX3BO[$JT4F5]); goto cIJbX; Pzxcd: $ZLG2K = explode("\x2c", $s11DD); goto q2Kp_; cIJbX: $mg5RF = min($ZLG2K[0], $ZLG2K[1]); goto ZRPh9; HgQ9Z: $wYHZM[$EKyY1][] = $WUiPT; goto bkBlS; uS2zM: $VX3BO[] = [$EKyY1, $mg5RF, "\x3e\x3d"]; goto pEgI8; pEgI8: $VX3BO[] = [$EKyY1, $WUiPT, "\74\x3d"]; goto XirSm; XirSm: $wYHZM[$EKyY1][] = $mg5RF; goto HgQ9Z; bkBlS: WOeCs: goto duXas; ZRPh9: $WUiPT = max($ZLG2K[0], $ZLG2K[1]); goto uS2zM; duXas: goto le5QZ; goto Jip70; ByZ_W: if (!(substr_count($s11DD, "\54") == 1)) { goto WOeCs; } goto Pzxcd; Jip70: case "\x6e\x6f\x74\102\x65\x74\x77\145\145\x6e": throw new \Exception("\x4f\x70\x65\162\x61\x74\x6f\x72\x20\x6e\x6f\164\x42\x65\164\x77\x65\145\x6e\40\x69\x73\40\156\x6f\164\x20\x69\155\x70\154\x65\x6d\x65\156\x74\145\144"); goto le5QZ; default: goto hI4cY; VJfuM: foreach ($PPhld as $lxoGQ => $kBb9C) { goto S2jlk; Ci5SH: goto Whbez; goto Hcuh_; S2jlk: if (!($MrHHt == $kBb9C)) { goto FnzVj; } goto LzwDc; LzwDc: $MrHHt = $Zt8Z4[$lxoGQ]; goto Z3_pC; hQZ6O: $VX3BO[] = [$EKyY1, $s11DD, $MrHHt]; goto yp_Io; Z3_pC: unset($VX3BO[$JT4F5]); goto hQZ6O; Hcuh_: FnzVj: goto JBfSB; yp_Io: $wYHZM[$EKyY1][] = $s11DD; goto RA0U5; RA0U5: $O_cv_ = true; goto Ci5SH; JBfSB: ecNUX: goto oLjkj; oLjkj: } goto CX8oK; bSj00: IWZng: goto Y_UTk; R1a1w: Factory::response()->sendError("\125\156\153\156\x6f\167\x6e\40\157\x70\x65\162\x61\164\157\162\x20\x27{$MrHHt}\x27", 400); goto bSj00; CX8oK: Whbez: goto iwQII; hI4cY: $O_cv_ = false; goto VJfuM; iwQII: if ($O_cv_) { goto IWZng; } goto R1a1w; Y_UTk: goto le5QZ; goto Sah1D; Sah1D: } goto f6XFQ; NNJFe: K8K6q: goto ON5nA; f6XFQ: m1ZhS: goto uhpea; ON5nA: } goto IeTcv; HROuQ: if (!is_array($K84HO)) { goto lJr3x; } goto RcTFE; PwDiB: KK7dX: goto dNgKi; qQjON: } goto rbZPv; urzag: $jHD_6 = $m4gBu[2]; goto av9pk; ceChm: jSjKa: goto apSd7; IfAcj: $P3ytl = Factory::request()->getQuery(); goto txZP8; gVnxU: if (preg_match("\x2f\x28\x5b\x61\55\172\135\53\x29\x28\133\x3e\x3c\x3d\x5d\x2b\x29\50\x5b\60\x2d\71\134\56\x5d\53\x29\x2f\151", $hdNmV, $m4gBu)) { goto WjSBf; } goto WBQpa; PgvVZ: $z9v0N = Arrays::shift($VX3BO, "\x6f\x72\144\x65\162\102\x79"); goto ZzJQC; ksENX: Factory::response()->send($QQgt2); goto AecHJ; vCI78: if (isset($mHKVB)) { goto mhUWO; } goto Jx90v; vqHAg: NIknC: goto VmmZR; s2nHW: AqONu: goto n3Jv5; wHx0q: if (!empty(static::$folder_field)) { goto YyjYM; } goto kcTIo; bABP6: $VX3BO[] = [$this->instance->belongsTo(), NULL, "\x49\123"]; goto ceChm; ONzaV: $this->onGettingFolderAfterCheck($GabDK, $this->folder); goto RTTmP; y97zj: if (preg_match("\57\x28\x5b\141\55\x7a\x5d\x2b\x29\x5c\x28\x28\x5b\141\x2d\x7a\x5c\52\135\53\51\134\51\50\133\76\x3c\75\135\53\51\50\133\60\55\71\134\56\x5d\53\51\x2f\x69", $hdNmV, $m4gBu)) { goto OaRAX; } goto gVnxU; imEDC: NKkfm: goto xt1wa; AB4vg: Factory::response()->sendError("\116\157\x74\40\x66\157\165\156\144", 404, $GabDK != null ? "\122\x65\x67\151\x73\164\145\x72\x20\167\151\x74\150\40\x69\144\75{$GabDK}\40\151\156\40\x74\141\142\154\x65\x20\x27{$this->table_name}\x27\x20\167\141\163\40\156\157\164\x20\146\x6f\165\x6e\144" : ''); goto zqaCo; FGO0H: yYgx2: goto DlM2E; OsduW: $vZvU_ = 1; goto Mw0Oq; SSPfm: $jorQN = "\x6e\165\x6c\x6c"; goto kcI5_; F2Cic: $this->webhook("\x73\150\x6f\167", $ReDgq[0], $GabDK); goto zKPQd; kcI5_: goto lf86M; goto kjr2E; av9pk: if (preg_match("\x2f\133\x61\55\172\135\53\x5c\50\133\141\x2d\x7a\x5c\x2a\x5d\x2b\x5c\x29\x20\141\163\x20\x28\x5b\141\x2d\x7a\x5d\x2b\51\x2f\x69", $O2GIo, $m4gBu)) { goto ETGeP; } goto pDpTz; YUnTI: $GZCLm = (int) $GZCLm; goto WuDBp; KFbaL: goto mJJGP; goto ujTT8; IEvdT: if (($LTaL0 || !empty($qYtCa[0])) && (empty($e1i00) || in_array($n2MyZ, $e1i00))) { goto ZjsnR; } goto lVIEK; UDq92: $VX3BO[] = [$this->instance->belongsTo(), Acl::getCurrentUid()]; goto fUWr3; gZSdG: $sobQe = Arrays::shift($VX3BO, "\147\x72\157\165\160\x42\x79"); goto vqL6Y; Upx0y: $ZGJZu = []; goto oYDfp; hJALX: if (!empty(static::$folder_field)) { goto phAU9; } goto ZXb7L; pUBKd: $GZCLm = Arrays::shift($VX3BO, "\160\x61\x67\x65\123\x69\172\145"); goto wfQ20; vGJDY: $KQyJY = strtoupper($m4gBu[1]); goto NXg3p; sEw7m: $GZCLm = $fsPFd; goto Hujip; OqCsI: $this->onGot($GabDK, $tLirR); goto bEMMg; hb2ey: $xN87Y = $GZCLm * ($vZvU_ - 1); goto Js14W; xt1wa: if (!($GabDK === null)) { goto TxCTT; } goto yxfgu; FKjTT: $XpGiH = $m4gBu[1]; goto T5cgg; c4rFk: $this->instance->offset($xN87Y); goto mgGHw; CqjZQ: $Kpg3M = Arrays::shift($VX3BO, "\x70\162\145\x74\x74\171"); goto WWE2D; DIWfb: if (!(!$this->acl->hasSpecialPermission("\162\145\141\x64\x5f\141\x6c\x6c") && !$this->acl->hasResourcePermission("\163\150\x6f\x77\137\141\154\154", $this->table_name))) { goto jJHIQ; } goto NAmho; mgGHw: SmNDd: goto c8J7e; LVpgE: Ju4YQ: goto ornGd; NAmho: $VX3BO[] = [$this->instance->belongsTo(), NULL, "\x49\123"]; goto twYhf; hNBET: if (isset($mHKVB)) { goto tEv7r; } goto ez2Uo; midFN: YyjYM: goto Pb6a6; OavFc: $mHKVB = strtolower($m4gBu[1]); goto urzag; yZZnA: $IWb1p = ceil($tLirR / $fsPFd); goto ydZc3; FcwAR: $jorQN = http_protocol() . "\72\x2f\57" . $_SERVER["\110\124\x54\x50\x5f\110\117\123\x54"] . $s4PD0 . "\x2f" . $CriyX . "\x2f" . $this->table_name . "\x3f" . ($P3ytl = str_replace(["\45\65\102", "\x25\65\104", "\45\x32\x43"], ["\133", "\135", "\54"], http_build_query($P3ytl))); goto ZcxNj; ERR8U: if (empty($this->folder)) { goto SAkyC; } goto wHx0q; VhDet: bvdRo: goto Upx0y; hbDih: hgM3d: goto dNyLy; QjUS2: throw new InvalidValidationException(json_encode($HOK4R)); goto QfiC5; bEMMg: $this->webhook("\154\x69\163\164", $ReDgq); goto KFRza; k5DBg: ACSgI: goto Om3dH; TktOY: static::$connect_to = array_intersect(static::$connect_to, $qYtCa); goto LVpgE; wfQ20: if (!($vZvU_ != null)) { goto ACSgI; } goto cV0c7; IQR7J: unset($P3ytl["\154\151\155\x69\x74"]); goto B7Kny; l3nWn: yqzZz: goto mVtki; tQHr1: goto BjZ8V; goto GVmhY; VlQxC: $ReDgq = $this->instance->where($VX3BO)->get($e1i00); goto bIZWw; KtZif: goto auVv6; goto s2nHW; dQnGE: kAFCN: goto hNBET; B7Kny: fef0o: goto Lfm9J; XW_r0: SgkGf: goto U0bLu; ce0lI: unset($P3ytl["\160\x61\147\x65"]); goto hbDih; NvknW: foreach ($fIBUu as $aBBJK) { goto x6Y5k; z3Cle: if (!(count($f70p0) > 1)) { goto FyMmg; } goto r0dxV; GJ6np: Twdrb: goto A6kKM; MH15g: OAFj9: goto UW7BY; ArxPr: $f70p0 = explode("\x2c", $VX3BO[$aBBJK]); goto z3Cle; AxU9B: goto sbA5a; goto MH15g; du27z: FyMmg: goto CRhkd; FV8Ke: if (is_array($VX3BO[$aBBJK])) { goto OAFj9; } goto ArxPr; kI7T0: goto sbA5a; goto GJ6np; wbD_l: AYOun: goto a8tZ2; x6Y5k: if (!isset($VX3BO[$aBBJK])) { goto AYOun; } goto sCLHb; goZhl: txEQ2: goto GOvCF; a8tZ2: zVjEH: goto EtUSU; r0dxV: foreach ($f70p0 as $clmxu => $GDlYY) { goto E8c8i; KdrM8: RvZS4: goto wOzbB; E8c8i: if (!($GDlYY == "\155\145")) { goto RvZS4; } goto ywp90; ywp90: $f70p0[$clmxu] = Acl::getCurrentUid(); goto KdrM8; wOzbB: wCTU0: goto Hm5Ey; Hm5Ey: } goto AybAb; CRhkd: $VX3BO[$aBBJK] = implode("\54", $f70p0); goto kI7T0; GOvCF: sbA5a: goto wbD_l; A6kKM: $VX3BO[$aBBJK] = Acl::getCurrentUid(); goto AxU9B; UW7BY: foreach ($VX3BO[$aBBJK] as $MrHHt => $GDlYY) { goto ovXps; tYO0O: fnMZB: goto Xj8jH; n2AWM: goto cTaq0; goto FQixq; pU61s: $f70p0 = explode("\54", $GDlYY); goto okUAm; tKvsm: TZIR6: goto SfYxa; pN9XM: foreach ($f70p0 as $clmxu => $dxIU8) { goto X_rJs; PsRrR: fwy5q: goto x4x38; nL6X_: $f70p0[$clmxu] = Acl::getCurrentUid(); goto PsRrR; x4x38: T5qCy: goto tslnl; X_rJs: if (!($dxIU8 == "\155\x65")) { goto fwy5q; } goto nL6X_; tslnl: } goto tKvsm; okUAm: if (!(count($f70p0) > 1)) { goto GY8U2; } goto pN9XM; jQy0p: $VX3BO[$aBBJK][$MrHHt] = implode("\x2c", $f70p0); goto n2AWM; jhdZq: $VX3BO[$aBBJK][$MrHHt] = Acl::getCurrentUid(); goto yV8fb; ovXps: if ($GDlYY == "\155\x65") { goto cOGKW; } goto pU61s; yV8fb: cTaq0: goto tYO0O; SfYxa: GY8U2: goto jQy0p; FQixq: cOGKW: goto jhdZq; Xj8jH: } goto goZhl; sCLHb: if ($VX3BO[$aBBJK] == "\155\145") { goto Twdrb; } goto FV8Ke; AybAb: EsWqC: goto du27z; EtUSU: } goto WJGLc; JPKZf: $VX3BO[] = [$this->instance->belongsTo(), Acl::getCurrentUid()]; goto eNvUk; rbZPv: hJB3A: goto iMk10; de1AE: if (!$this->acl->isGuest()) { goto AQfKk; } goto MMtxM; Eu35z: $this->instance->hide($ttvEe); goto ectR2; TRXnZ: $VX3BO[$this->instance->createdBy()] = Acl::getCurrentUid(); goto XW_r0; WuDBp: ZL8YJ: goto PZE8T; jlU6a: D53Xy: goto FvQKG; bIZWw: if (empty($ReDgq)) { goto bM8k1; } goto WIpgA; M6Yjn: GvVT5: goto fgI1D; YbVYZ: KPmnT: goto iwpGP; xALNH: FQYas: goto y97zj; HBHCo: if (!($xN87Y != NULL)) { goto SmNDd; } goto c4rFk; FR_b4: unset($P3ytl["\157\146\x66\163\145\164"]); goto V_7IU; dff6C: D7jLO: goto bJzSq; sWPcV: $ttvEe = Arrays::shift($VX3BO, "\145\x78\x63\154\165\144\145"); goto SSSCm; I3tlL: $QQgt2 = $QQgt2[0]; goto UeLLZ; zttZM: $wYHZM = []; goto JQ0ia; Lfm9J: if (!isset($P3ytl["\x70\141\x67\145"])) { goto hgM3d; } goto ce0lI; zKPQd: if (!empty($LTaL0) || !empty($qYtCa)) { goto koDQI; } goto hA9_c; vqL6Y: $hdNmV = Arrays::shift($VX3BO, "\x68\141\166\151\x6e\147"); goto hSCvA; uJRuI: $qkMzv = $m4gBu[3]; goto lrTJM; keIpT: MWKfM: goto DoqE5; zsdrV: goto TldaW; goto Jqbrz; joVlS: XXbSp: goto jwdKu; oVvy2: Y5SXk: goto K_hpp; CDx1t: vHlZC: goto sWPcV; qvR0g: $this->onGotFolder($GabDK, $tLirR, $this->folder); goto dWsEe; B69UY: R_jeb: goto HBHCo; g1jjs: if (!empty(static::$folder_field)) { goto NIknC; } goto lye5l; cMpy_: thWMh: goto w2Vbl; pJoDM: $e1i00 = Arrays::shift($VX3BO, "\146\151\x65\x6c\144\x73"); goto riofK; IkgaQ: goto Qa19S; goto QDsoP; W2MGH: } catch (InvalidValidationException $aU1Pp) { response()->sendError("\x56\141\154\x69\144\141\164\x69\157\156\x20\x45\162\162\157\162", 400, json_decode($aU1Pp->getMessage())); } catch (SqlException $aU1Pp) { response()->sendError("\123\121\114\x20\105\170\x63\145\x70\x74\x69\157\156", 500, json_decode($aU1Pp->getMessage())); } catch (\PDOException $aU1Pp) { $rUdfW = DB::getCurrentDB(); response()->sendError("\120\x44\x4f\40\x45\170\143\x65\x70\x74\151\x6f\156", 500, $aU1Pp->getMessage() . "\40\55\x20" . $this->instance->getLog() . "\x20\x2d\x20\144\141\x74\x61\142\x61\x73\x65\x3a\x20\x27{$rUdfW}\x27\x20\x2d\x20\164\141\142\x6c\145\72\40\47{$this->instance->getTableName()}\47"); } catch (\Exception $aU1Pp) { response()->sendError($aU1Pp->getMessage()); } goto T7xBX; H3y0K: $DH3I0 = Factory::request()->shiftQuery("\137\162\x75\154\x65\163"); goto iEqY2; z9YzI: $NYm1G = Factory::request()->shiftQuery("\x5f\x73\x63\150\x65\155\x61"); goto H3y0K; dijRb: if (!($GabDK != null && !$this->is_retrievable)) { goto g9NvD; } goto d1L9q; Q_s_3: r524u: goto fQiom; CEHWj: $this->folder = Arrays::shift($VX3BO, "\146\157\154\144\145\x72"); goto nXnxI; vZx7k: global $CriyX; goto z9YzI; JMCTF: if (!($GabDK == null && !$this->is_listable)) { goto feYBY; } goto Q_Dtq; KAIyx: C3bA7: goto KH6p2; N3ga4: return $QQgt2; goto KAIyx; mmkNp: $KZ0Y9 = get_schema_name($this->table_name); goto hI33W; N8ymV: $VX3BO = Factory::request()->getQuery(); goto ORDjo; E63QK: g9NvD: goto hKw39; e_Zqi: $QQgt2 = $KZ0Y9::get(); goto N3ga4; fQiom: $LTaL0 = Factory::request()->shiftQuery("\x5f\x72\x65\x6c\x61\164\145\144"); goto A7HNH; AoOjo: return ["\162\165\x6c\145\163" => $QQgt2["\x72\x75\154\x65\163"]]; goto Q_s_3; hI33W: $QQgt2 = $KZ0Y9::get(); goto AoOjo; nXnxI: $this->onGettingBeforeCheck($GabDK); goto JMCTF; ORDjo: $qYtCa = explode("\x2c", $qYtCa); goto ZpE06; T7xBX: } function post() { goto yrZeA; UO1jy: $GabDK = $wYHZM[$this->instance->getIdName()] ?? null; goto FMFOD; ylRvR: try { goto PTCYG; WPeD6: Factory::response()->send([$this->table_name => $wYHZM, $this->instance->getKeyName() => $W35pT], 201); goto JmCYT; l3Y8T: M0egY: goto v3zsG; zpjsB: if (!isset($wYHZM[$this->instance->createdBy()])) { goto zY_QP; } goto xDZ5G; Ve64B: $this->onPostFolder($W35pT, $wYHZM, $this->folder); goto JDMik; ot_nN: $aBBJK = DB::table("\x66\x6f\x6c\x64\x65\162\163"); goto B_pc5; v3zsG: if (empty($this->folder)) { goto RE0tg; } goto aI3kq; uJy0v: uxmbV: goto JHYwK; RMs_z: Factory::response()->sendError(_("\104\x61\164\x61\x20\x76\141\154\x69\x64\141\x74\x69\x6f\x6e\40\167\145\162\x72\157\x72"), 400, $gn70B); goto l3Y8T; NBEF5: QoUW3: goto wyoYN; D1n56: MWz4z: goto p3dSY; RwnP1: $wYHZM[$this->instance->belongsTo()] = $qPuRL[0][$this->instance->belongsTo()]; goto WMurY; FPDWO: $this->instance->fillAll(); goto Y9TqT; uMTYj: $wYHZM[static::$folder_field] = $qPuRL[0]["\x6e\x61\x6d\145"]; goto RwnP1; qLh_q: $gn70B = (new Validator())->validate($this->instance->getRules(), $wYHZM); goto gJwRw; n0ZNE: ItZUe: goto AdrR7; aS3Nq: Factory::response()->sendError("\106\157\162\142\x69\144\144\x65\x6e", 403, "\131\157\165\x20\x68\x61\x76\145\x20\156\157\x74\x20\160\145\162\155\x69\x73\x73\151\157\x6e\x20\146\157\162\40\164\150\x65\x20\146\157\154\144\x65\162\x20{$this->folder}"); goto nbFbS; RuFfK: if (!(!isset($wYHZM[$this->instance->createdAt()]) && $this->instance->inSchema([$this->instance->createdAt()]))) { goto hY3PP; } goto uGXth; JHYwK: lDGnp: goto daXYA; h0C8E: if (!$this->instance->inSchema([$this->instance->belongsTo()])) { goto WyU9n; } goto IB6HK; WoMi0: y8pJi: goto YXy5_; wyoYN: if ($this->acl->hasSpecialPermission("\164\x72\x61\x6e\x73\146\x65\x72")) { goto MWz4z; } goto h0C8E; pSdaX: $wYHZM[$this->instance->createdBy()] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto LJYl_; LJYl_: PfODT: goto RuFfK; ENJtA: Factory::response()->sendError("\106\x6f\x72\142\151\144\x64\145\x6e", 403, "\47\146\157\x6c\144\145\x72\137\146\151\145\x6c\x64\x27\40\151\x73\40\x75\x6e\144\145\x66\x69\x6e\x65\144"); goto oLCcJ; xxLsW: RE0tg: goto oIGj6; oIGj6: $this->onPostingAfterCheck($GabDK, $wYHZM); goto dtJEy; S7Ba0: RijsS: goto Ve64B; xQ062: if (!empty(static::$folder_field)) { goto DcLdo; } goto ENJtA; z1YnB: if (!isset($wYHZM[$this->instance->createdAt()])) { goto oK2Iq; } goto HxrXI; Lagp6: $wYHZM[$this->instance->updatedBy()] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto Q2RdB; bQ1aI: $this->onPostingBeforeCheck($GabDK, $wYHZM); goto uislA; KRdGo: zY_QP: goto WoMi0; HxrXI: Factory::response()->sendError("\x27{$this->instance->createdAt()}\47\40\151\x73\40\x6e\x6f\164\40\x66\x69\x6c\154\x61\142\154\x65\x21", 400); goto rDdat; JmCYT: f6472: goto ESW9e; rGx_1: WyU9n: goto D1n56; KWRDD: hY3PP: goto V37G3; dmbKD: $this->webhook("\x63\162\145\141\x74\145", $wYHZM, $W35pT); goto WPeD6; YXy5_: if (!$this->instance->inSchema([$this->instance->createdAt()])) { goto uxmbV; } goto z1YnB; slpet: if ($W35pT !== false) { goto RijsS; } goto Apu3G; aI3kq: $this->onPostingFolderAfterCheck($GabDK, $wYHZM, $this->folder); goto xxLsW; AdrR7: if (!($qPuRL[0][$this->instance->belongsTo()] != Acl::getCurrentUid() && !FoldersAclExtension::hasFolderPermission($this->folder, "\x77"))) { goto RcUGq; } goto aS3Nq; WMurY: WfPnz: goto qLh_q; uGXth: $wYHZM[$this->instance->createdAt()] = at(); goto KWRDD; JDMik: $this->onPost($W35pT, $wYHZM); goto dmbKD; bo3iV: Factory::response()->sendError("\106\x6f\x6c\x64\x65\x72\x20\156\157\164\x20\146\157\165\x6e\144", 404); goto n0ZNE; IB6HK: $wYHZM[$this->instance->belongsTo()] = Acl::getCurrentUid(); goto rGx_1; d7_n3: if (in_array($this->instance->updatedBy(), $this->instance->getNullables())) { goto JmsbY; } goto Lagp6; ghsh2: $this->onPostingFolderBeforeCheck($GabDK, $wYHZM, $this->folder); goto ot_nN; dtJEy: try { goto me0_n; mZGak: tnJT9: goto ydFyj; Is1SI: if (!isset($T_NTo)) { goto y14Cg; } goto CNfbb; jHdPT: j5OOG: goto DAbj0; ydFyj: y14Cg: goto RJPkh; IGpQ2: GkBBX: goto jHdPT; wZE7u: foreach ($T0r5B as $AJt29) { unset($wYHZM[$AJt29]); gm1Qr: } goto mjKED; DAbj0: if (!isset($T0r5B)) { goto Ae5Ws; } goto wZE7u; fVek3: $T_NTo = []; goto Rg7KF; me0_n: if (empty(static::$connect_to)) { goto j5OOG; } goto wQFxe; Rg7KF: $znXT4 = []; goto JcBsr; JcBsr: $R5qN0 = []; goto D2aUI; eVfS4: $W35pT = DB::table($this->table_name)->create($wYHZM); goto Is1SI; mjKED: VbmW_: goto OodrA; D2aUI: $T0r5B = []; goto xzeNG; CNfbb: foreach ($T_NTo as $cY_SJ => $wYHZM) { goto bHu2z; vjmCO: $vGY67 = inSchema([$l0_sh], $cY_SJ); goto W8O_c; vya0U: $NC1z5 = DB::table($cY_SJ)->insert($wYHZM); goto TImNq; UwbOU: $h9ZJ9 = 0; goto NXzWD; gj3_Q: $h9ZJ9++; goto kDKJv; kDKJv: goto P6tkz; goto qI8RQ; sE2Qo: Xe0zH: goto gHIBY; IptFP: RPWXA: goto vya0U; czuxf: if (!($h9ZJ9 < $GW3mI)) { goto CgqmH; } goto w3Ydd; bHu2z: $lAj_i = get_model_name($cY_SJ); goto vPZC8; TImNq: Ui6LN: goto sE2Qo; DHZdf: if (!isset($R5qN0)) { goto EXmkc; } goto B7Aqy; MM1eF: $g_QwP = inSchema([$bdp4n], $zZJ5p); goto QPzMN; pfJQn: $i5Jj5 = in_array($l0_sh, $Updqx->getNullables()); goto tucWC; sXDZB: goto TgxXJ; goto Q3EHH; w3Ydd: if (isset($R5qN0[$h9ZJ9])) { goto Uuiul; } goto TdNdD; rj1L7: $zZJ5p = $znXT4[$cY_SJ]; goto MM1eF; HDiHY: EXmkc: goto a5H3o; qI8RQ: CgqmH: goto HDiHY; fXlAA: Ue9U1: goto gj3_Q; cPLab: if (!isset($znXT4[$cY_SJ])) { goto RPWXA; } goto InZCT; B7Aqy: $GW3mI = count($wYHZM); goto UwbOU; W8O_c: TgxXJ: goto pfJQn; Q4h2n: $wYHZM[$h9ZJ9][$R5qN0[$h9ZJ9][0]] = $R5qN0[$h9ZJ9][1]; goto fXlAA; yTxMh: P6wol: goto cPLab; NXzWD: P6tkz: goto czuxf; WKuvd: $g_QwP = inSchema([$bdp4n], $cY_SJ); goto vjmCO; f1WhK: $bdp4n = $Updqx->createdBy(); goto XLkFU; a5H3o: $NC1z5 = DB::table($zZJ5p)->insert($wYHZM); goto g7hSp; InZCT: $zZJ5p = $znXT4[$cY_SJ]; goto DHZdf; cjrDA: Uuiul: goto Q4h2n; QPzMN: $vGY67 = inSchema([$l0_sh], $zZJ5p); goto sXDZB; TdNdD: goto Ue9U1; goto cjrDA; TCV5O: if (!isset($znXT4[$cY_SJ])) { goto Xyeak; } goto rj1L7; vPZC8: $Updqx = new $lAj_i(); goto f1WhK; g7hSp: goto Ui6LN; goto IptFP; Q3EHH: Xyeak: goto WKuvd; XLkFU: $l0_sh = $Updqx->updatedBy(); goto TCV5O; tucWC: foreach ($wYHZM as $clmxu => $vdcnq) { goto uuUzB; GG3KQ: foreach ($vdcnq as $BRPp3 => $K84HO) { goto SIFId; IqPaO: T3AbP: goto F1qKS; F1qKS: RQMQ0: goto r8vDb; QcXxg: $wYHZM[$clmxu][$BRPp3] = $W35pT; goto IqPaO; SIFId: if (!($K84HO === "\44" . "\x69\144\x5f\x6d\x61\x69\x6e")) { goto T3AbP; } goto QcXxg; r8vDb: } goto HuMi9; X18VC: WLwb6: goto NJq4u; XLoQt: $wYHZM[$clmxu][$bdp4n] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto X18VC; qL0tX: pUQsP: goto Ziezo; NJq4u: if (!$vGY67) { goto Dou31; } goto KxLql; C8mFO: ETEP8: goto Cu_wt; KxLql: if ($i5Jj5) { goto ETEP8; } goto fnPFF; HuMi9: dGD2A: goto qL0tX; uuUzB: if (!$g_QwP) { goto WLwb6; } goto XLoQt; fnPFF: $wYHZM[$clmxu][$l0_sh] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto C8mFO; Cu_wt: Dou31: goto GG3KQ; Ziezo: } goto yTxMh; gHIBY: } goto mZGak; RJPkh: DB::commit(); goto WoaJ3; xzeNG: foreach ($wYHZM as $JT4F5 => $vdcnq) { goto jhz7D; bEK3j: zyjyJ: goto FxbTq; jhz7D: if (!is_array($vdcnq)) { goto PKLr3; } goto UzKH_; UzKH_: $cY_SJ = $JT4F5; goto XZa4C; FjrOz: $KZ0Y9 = $this->instance->getSchema(); goto Iu3qE; oTecX: $B8eT5 = array_keys($vdcnq)[0]; goto pE2NA; YJjv0: $wYHZM[$vvme7] = $d7WMZ; goto bRvsK; kkN3w: W6NlG: goto XPDY7; VfC8Z: yVRNM: goto s9Rmf; FxbTq: if (!isset($gmRWF)) { goto UgESZ; } goto bRmDf; cR7so: if (!is_array($vdcnq)) { goto Z3clq; } goto U8LVk; FtBpK: response()->sendError("\x54\141\142\x6c\145\40{$cY_SJ}\40\x69\x73\x20\x6e\157\164\40\143\157\x6e\156\145\x63\164\145\x64\40\164\x6f\x20" . $this->table_name, 400); goto fz3wD; s9Rmf: goto W6NlG; goto D_trB; a9OTq: vSTxR: goto kkN3w; Iu3qE: $IWYww = $KZ0Y9["\162\145\154\141\164\151\x6f\x6e\163\x68\151\160\x73"]; goto FVThJ; pE2NA: $d7WMZ = array_values($vdcnq)[0]; goto uyF1B; FVThJ: foreach (static::$connect_to as $UV7E3) { goto jWtOT; rRFf6: if (!(count($A22FP) == 1)) { goto xKjBm; } goto mXgn5; KpNYY: if (!($A22FP === null)) { goto NoNf8; } goto QspHL; Sn3Qg: xKjBm: goto CE067; mXgn5: list($fCWmQ, $gmRWF) = explode("\56", $A22FP[0][1]); goto Sn3Qg; ndCmX: kLuZG: goto k3N_c; QspHL: goto kLuZG; goto KDLIv; KDLIv: NoNf8: goto CyOrF; jWtOT: $A22FP = $IWYww[$UV7E3] ?? null; goto KpNYY; CyOrF: if (!($UV7E3 == $cY_SJ)) { goto s8t_u; } goto rRFf6; CE067: s8t_u: goto ndCmX; k3N_c: } goto bEK3j; bRmDf: $vvme7 = $gmRWF; goto YJjv0; lKTtr: if (in_array($cY_SJ, static::$connect_to)) { goto A9bbn; } goto FtBpK; uyF1B: if (!(get_primary_key($this->table_name) == $B8eT5)) { goto vSTxR; } goto FjrOz; D_trB: Z3clq: goto oTecX; fz3wD: A9bbn: goto cR7so; iDUTg: mosUO: goto mTTzx; bRvsK: UgESZ: goto a9OTq; XPDY7: PKLr3: goto iDUTg; XZa4C: $T0r5B[] = $cY_SJ; goto lKTtr; U8LVk: foreach ($vdcnq as $gK9hD => $b_2qs) { goto mzpIO; ArUoW: if (empty($ZdyXt)) { goto xxNwL; } goto L0LWU; zjSzg: foreach ($b_2qs as $JT4F5 => $rMQt_) { goto GBJla; tnCvq: $T_NTo[$cY_SJ][] = [$BPiYq => "\44\151\144\137\155\x61\x69\156", $jg9xC => $rMQt_]; goto ecwM4; ecwM4: TFBqF: goto XeZM8; mNNr0: $DSTzj = substr($JT4F5, strlen($zZJ5p) + 1); goto lpvDL; lpvDL: $R5qN0[] = [$DSTzj, $rMQt_]; goto o2DHQ; GBJla: if (!Strings::startsWith($zZJ5p . "\56", $JT4F5)) { goto GGjun; } goto mNNr0; o2DHQ: goto TFBqF; goto ZzQVw; ZzQVw: GGjun: goto tnCvq; XeZM8: } goto Qk3jv; NG4Lr: woOev: goto N3ktZ; JMv04: LUi2X: goto S6rMJ; T0jBz: xFsrO: goto pi15u; l9JNz: Doz87: goto rP4h1; C_MKR: jf_CL: goto exll0; cIang: $zZJ5p = $NdRuJ["\x62\162\151\x64\x67\x65"]; goto YqMBj; HQkLt: $znXT4[$cY_SJ] = $zZJ5p; goto qW0k9; bhmQf: foreach ($vdcnq as $gK9hD => $qlsNo) { $vdcnq[$gK9hD] = array_merge($qlsNo, [$vvme7 => "\x24\x69\x64\137\x6d\141\x69\x6e"]); Pzonx: } goto nUWhU; o9fIf: $jg9xC = $NdRuJ["\x66\153\163"][$cY_SJ]; goto zqJeo; BhAhU: if (isset($NdRuJ[$this->table_name . "\x2e" . $cY_SJ])) { goto Doz87; } goto om6rL; XS5Fc: if (isset($KY3sX)) { goto OSEwG; } goto ilhfP; qKUhB: kxfxW: goto J3WtU; fWu08: if (is_null($NdRuJ)) { goto sMclo; } goto i1yq8; S6rMJ: if (in_array($Os0o9, $MiA3G)) { goto b9Bm_; } goto YV5_5; HKPKJ: goto awYbU; goto B_kA8; YqMBj: $BPiYq = $NdRuJ["\146\x6b\x73"][$this->table_name]; goto o9fIf; dwexn: sMclo: goto jJ0gu; UzCkP: response()->sendError("\124\x68\145\x72\x65\40\x61\x72\145\40\x6d\x6f\162\145\x20\164\150\x61\156\x20\x6f\x6e\145\x20\162\x6f\x77\x73\40\x69\156\x20{$cY_SJ}\x20\x6d\141\164\x63\x68\x69\x6e\x67\40\x77\151\x74\x68\40\163\145\x6e\164\x20\x64\x61\x74\141", 400); goto C_MKR; MdNQb: $IWYww = $KZ0Y9["\162\x65\x6c\141\164\x69\157\x6e\x73\150\x69\160\x73"]; goto RQsZX; N3ktZ: GHV68: goto iHVJB; rBn2x: $FSPk0 = false; goto BhAhU; J3WtU: $rMQt_ = $KY3sX; goto odLtr; pi15u: if (!($tnh1d > 1)) { goto jf_CL; } goto UzCkP; i1yq8: $FSPk0 = true; goto dwexn; ilhfP: foreach ($b_2qs as $JT4F5 => $rMQt_) { goto bgJIM; bgJIM: if (!($JT4F5 == $Os0o9)) { goto I4x4X; } goto OW1js; LftdM: XdAym: goto IMEe3; OW1js: if (isset($hm3Km[$cY_SJ])) { goto XdAym; } goto nExPN; IMEe3: if ($hm3Km[$cY_SJ]) { goto UPMqc; } goto cIPzd; TkPFX: I4x4X: goto YBIcT; nExPN: $hm3Km[$cY_SJ] = DB::table($cY_SJ)->find($rMQt_)->exists(); goto LftdM; YBIcT: ocCR5: goto yWtTm; cIPzd: response()->sendError("\116\157\x74\x20\x66\x6f\x75\x6e\144", 404, "\x60{$cY_SJ}\140\56\140{$JT4F5}\x60\40\x3d\x20{$rMQt_}\x20\144\157\x65\163\156\47\164\x20\x65\x78\151\x73\164"); goto aQU3M; aQU3M: UPMqc: goto TkPFX; yWtTm: } goto GW1uY; lCY_U: $MiA3G = array_keys($b_2qs); goto rBn2x; GW1uY: WUfYn: goto izEoN; TYY8n: $T_NTo[$cY_SJ] = $vdcnq; goto Iskz_; KRwpk: eQyt7: goto yQreC; vENcT: $Os0o9 = get_primary_key($cY_SJ); goto lCY_U; zqJeo: if (isset($KY3sX)) { goto kxfxW; } goto zjSzg; QXamo: response()->sendError("\x53\157\x6d\145\164\150\x69\x6e\147\x20\x69\163\x20\x77\x72\157\x6e\x67\40\164\162\x79\x69\156\147\x20\x74\x6f\x20\x6c\151\x6e\x6b\x20\164\157\40{$cY_SJ}"); goto KRwpk; exll0: $KY3sX = $ZdyXt[0]; goto K0lkw; odLtr: $T_NTo[$cY_SJ][] = [$BPiYq => "\44\x69\144\137\155\x61\151\156", $jg9xC => $rMQt_]; goto zD_yf; Qk3jv: ur33v: goto d5iaw; rP4h1: $NdRuJ = get_pivot([$this->table_name, $cY_SJ]); goto fWu08; IqY4v: if (isset($znXT4[$cY_SJ])) { goto sOMeg; } goto HQkLt; om6rL: $NdRuJ[$this->table_name . "\x2e" . $cY_SJ] = get_pivot([$this->table_name, $cY_SJ]); goto l9JNz; L0LWU: $tnh1d = count($ZdyXt); goto HKPKJ; mzpIO: if (!is_array($b_2qs)) { goto GHV68; } goto vENcT; sibW8: awYbU: goto OS2UH; JnH1g: $KZ0Y9 = get_schema_name($cY_SJ)::get(); goto MdNQb; RQsZX: $s_O27 = $IWYww[$this->table_name] ?? null; goto knHo_; Iskz_: goto woOev; goto JMv04; yQreC: list($Tqhsv, $vvme7) = explode("\x2e", $s_O27[0][1]); goto bhmQf; nUWhU: UR5Vd: goto TYY8n; HhA3l: $tnh1d = 0; goto sibW8; OS2UH: if (!($tnh1d == 0)) { goto xFsrO; } goto YEl15; qW0k9: sOMeg: goto NG4Lr; zD_yf: rFmdP: goto IqY4v; d5iaw: goto rFmdP; goto qKUhB; jJ0gu: if ($FSPk0) { goto LUi2X; } goto JnH1g; iHVJB: nA1mE: goto nn1Rz; knHo_: if (!is_null($s_O27)) { goto eQyt7; } goto QXamo; K0lkw: b9Bm_: goto XS5Fc; YEl15: response()->sendError("\122\x6f\167\x20\156\x6f\x74\x20\146\x6f\165\156\144\x20\151\156\x20{$cY_SJ}", 400); goto T0jBz; izEoN: OSEwG: goto cIang; YV5_5: $ZdyXt = DB::table($cY_SJ)->where($b_2qs)->pluck($Os0o9); goto ArUoW; B_kA8: xxNwL: goto HhA3l; nn1Rz: } goto VfC8Z; mTTzx: } goto IGpQ2; OodrA: Ae5Ws: goto eVfS4; wQFxe: DB::beginTransaction(); goto fVek3; WoaJ3: } catch (\PDOException $aU1Pp) { goto Zdo9p; VMbGC: $UV7E3 = DB::getTableName(); goto toUdg; Zdo9p: DB::rollback(); goto zAScm; toUdg: Factory::response()->sendError("\105\162\162\157\x72\72\40\x63\162\x65\141\x74\151\x6f\x6e\x20\x6f\156\x20\x60{$rUdfW}\x60\x2e\x60{$UV7E3}\x60\40\157\146\x20\162\x65\163\x6f\x75\x72\x63\x65\x20\146\x61\151\154\163\x3a\40" . $aU1Pp->getMessage(), 500, $this->instance->getLog()); goto k5_0D; zAScm: $rUdfW = DB::getCurrentDB(); goto VMbGC; k5_0D: } goto slpet; PTCYG: $this->instance->connect(); goto bQ1aI; B_pc5: $qPuRL = $aBBJK->where(["\x69\144" => $this->folder])->get(); goto ouMs1; V37G3: if (!$this->instance->inSchema([$this->instance->updatedBy()])) { goto QoUW3; } goto d7_n3; uislA: if (!$this->acl->hasSpecialPermission("\146\151\x6c\x6c\x5f\x61\154\154")) { goto fYOQL; } goto FPDWO; d1kAM: unset($wYHZM["\146\157\154\x64\x65\162"]); goto uMTYj; rDdat: oK2Iq: goto uJy0v; Q2RdB: JmsbY: goto NBEF5; p3dSY: if (!($this->folder !== null)) { goto WfPnz; } goto xQ062; xDZ5G: Factory::response()->sendError("\47{$this->instance->createdBy()}\x27\x20\151\163\x20\156\157\x74\x20\x66\x69\154\154\x61\x62\154\x65\x21", 400); goto KRdGo; W8RyA: fYOQL: goto FZJXd; Apu3G: Factory::response()->sendError("\x45\162\x72\x6f\x72\72\x20\x63\162\x65\141\164\151\157\x6e\40\x6f\146\40\x72\x65\163\157\165\x72\x63\145\x20\146\141\x69\154\x73\x21"); goto ghyUL; gJwRw: if (!($gn70B !== true)) { goto M0egY; } goto RMs_z; daXYA: if (!$this->instance->inSchema([$this->instance->createdBy()])) { goto PfODT; } goto pSdaX; nbFbS: RcUGq: goto d1kAM; ouMs1: if (!(count($qPuRL) == 0 || $qPuRL[0]["\164\x62"] != $this->table_name)) { goto ItZUe; } goto bo3iV; Y9TqT: goto lDGnp; goto W8RyA; ghyUL: goto f6472; goto S7Ba0; FZJXd: if (!$this->instance->inSchema([$this->instance->createdBy()])) { goto y8pJi; } goto zpjsB; oLCcJ: DcLdo: goto ghsh2; ESW9e: } catch (InvalidValidationException $aU1Pp) { Factory::response()->sendError("\x56\141\154\x69\x64\x61\x74\x69\157\x6e\x20\x45\x72\x72\157\x72", 400, json_decode($aU1Pp->getMessage())); } catch (\Exception $aU1Pp) { Factory::response()->sendError($aU1Pp->getMessage()); } goto yoROO; FMFOD: $this->folder = $this->folder = $wYHZM["\x66\157\154\144\x65\x72"] ?? null; goto ylRvR; Wt56k: Factory::response()->sendError("\111\x6e\x76\x61\154\x69\144\x20\x4a\x53\x4f\116", 400); goto ZFTf5; dykwI: if (!empty($wYHZM)) { goto Sbxvf; } goto Wt56k; yrZeA: $wYHZM = Factory::request()->getBody(false); goto dykwI; ZFTf5: Sbxvf: goto vc9qE; vc9qE: $this->instance = $this->getModelInstance(); goto UO1jy; yoROO: } protected function modify($GabDK = NULL, bool $Oynf2 = false) { goto z0L3q; TyRrl: if (!($wNzIw === "\x66\x61\x6c\x73\145" || $wNzIw === 0)) { goto sbX0d; } goto jl2Hb; z0L3q: if (!($GabDK == null)) { goto Llch9; } goto wb3SE; H5ZdE: try { goto Wwi19; BVXpA: $this->instance = $this->getModelInstance(); goto yQmDF; RAkpX: fTFFu: goto K2fA5; W6Yv8: $this->onPut($GabDK, $wYHZM, $Zs7OL); goto bkSt4; tnAFL: gMMba: goto RjUyg; cj1VQ: $Igg2P = $this->getModelInstance(); goto o28ip; yk5FI: $qPuRL = $aBBJK->where(["\x69\144" => $this->folder])->get(); goto gBKby; azbtZ: $tMe4v = $KSb29->where([$KSb29->getIdName(), $GabDK])->first(); goto oE2JB; sANcB: Factory::response()->send($wYHZM); goto l69P6; yQmDF: $n2MyZ = $this->instance->getIdName(); goto j8HaX; gBKby: if (!(count($qPuRL) == 0 || $qPuRL[0]["\164\142"] != $this->table_name)) { goto sVdOT; } goto cbDfF; N7qma: pMaqd: goto S6bR_; oE2JB: if (!(isset($tMe4v["\x69\163\137\x6c\157\x63\153\145\x64"]) && $tMe4v["\151\x73\137\154\157\x63\153\x65\x64"] == 1)) { goto sgxm6; } goto SIvOL; yHus2: if ($this->acl->hasSpecialPermission("\x66\151\154\154\137\141\x6c\154")) { goto qF13E; } goto kQPA5; Kropu: Factory::response()->sendError("\131\x6f\x75\x20\x68\x61\166\x65\40\x6e\x6f\x74\x20\x70\x65\162\x6d\x69\x73\163\x69\x6f\x6e\40\146\x6f\162\40\164\150\x65\x20\146\x6f\154\144\x65\162\40{$this->folder}", 403); goto Eunnq; arWyy: unset($wYHZM["\x66\157\x6c\x64\x65\162"]); goto IvQ0B; ch9qk: $this->instance->unfill($E3ucc); goto TOXhN; a9dm6: Nk_UQ: goto arWyy; rbRa2: Tt0gW: goto N7qma; fwoY5: W7e3P: goto sx2fh; d2MvK: CTy0T: goto F6iXN; esOPA: B2evv: goto WDxt4; Nef1G: $wYHZM[$this->instance->belongsTo()] = Acl::getCurrentUid(); goto qdj2W; cbDfF: Factory::response()->sendError("\x46\157\154\x64\x65\x72\x20\156\157\x74\40\x66\x6f\165\156\144", 404); goto mebLa; F6iXN: $this->onPutFolder($GabDK, $wYHZM, $Zs7OL, $this->folder); goto W6Yv8; mOe6Z: XgI_z: goto O5H5U; JFaDI: if (!($qPuRL[0][$this->instance->belongsTo()] != Acl::getCurrentUid() && !FoldersAclExtension::hasFolderPermission($this->folder, "\167") && !$this->acl->hasSpecialPermission("\167\x72\151\164\145\x5f\141\x6c\x6c\137\146\157\x6c\x64\145\x72\x73"))) { goto cb_2F; } goto Kropu; A48I8: Hnu8s: goto DKqiC; A6yVr: Factory::response()->code(404)->sendError("\x52\145\147\151\163\164\145\162\40\x66\x6f\x72\x20\x69\144\x3d{$GabDK}\x20\x64\157\145\163\x6e\47\164\x20\145\x78\151\x73\x74"); goto a9dm6; Fb2Xj: if (!(!$ZNlZO && $this->show_deleted && !$this->acl->hasSpecialPermission("\x77\x72\x69\x74\145\137\141\154\154\137\x74\162\x61\163\x68\143\141\x6e"))) { goto PlGza; } goto GU0PV; rYwHh: foreach ($wYHZM as $gK9hD => $s11DD) { goto B_ENf; l8ZAC: SWhyJ: goto E1JDT; E1JDT: unset($wYHZM[$gK9hD]); goto riGYx; pq35J: Garqo: goto mjYqa; R53g2: foreach ($s11DD as $nTsOb => $MXx3N) { $wYHZM[$nTsOb] = $MXx3N; pDxGC: } goto l8ZAC; B_ENf: if (!is_array($s11DD)) { goto Jct9w; } goto R53g2; riGYx: Jct9w: goto pq35J; mjYqa: } goto RAkpX; y_iQQ: $this->instance2 = $this->getModelInstance(); goto xrTV5; pVoWc: goto pMaqd; goto MY1AA; OyrLR: foreach ($bMfJt as $tlgrd) { goto gfKQ_; o5Bnf: D0J9Y: goto QRTpV; vmI8a: qyjYV: goto o5Bnf; gfKQ_: if (!isset($wYHZM[$tlgrd])) { goto qyjYV; } goto zNX0J; zNX0J: unset($wYHZM[$tlgrd]); goto vmI8a; QRTpV: } goto esOPA; MY1AA: qoCD1: goto Ixa9W; O5H5U: $gn70B = (new Validator())->setRequired($Oynf2)->validate($this->instance->getRules(), $wYHZM); goto gUAKT; zlMwZ: nelun: goto BVXpA; sx2fh: $this->onPuttingAfterCheck($GabDK, $wYHZM); goto Fb2Xj; Eunnq: cb_2F: goto al53H; GU0PV: if (!$this->instance->inSchema([$this->instance->belongsTo()])) { goto vM00y; } goto Nef1G; FKdsD: vfL3M: goto Ra9q7; tufmd: $this->instance->fillAll(); goto pVoWc; Ra9q7: if (!($ZNlZO && !$this->acl->hasSpecialPermission("\x77\x72\151\x74\x65\x5f\141\154\x6c") && $ReDgq[0][$this->instance->belongsTo()] != Acl::getCurrentUid())) { goto ocfJg; } goto zWwCu; G3RNz: XVsET: goto hp4zx; S6bR_: if (!$this->instance->inSchema([$this->instance->updatedBy()])) { goto mBz6L; } goto pDD1U; K2fA5: foreach ($wYHZM as $gK9hD => $s11DD) { goto IPMbH; IPMbH: if (!(strtoupper($s11DD) == "\116\125\x4c\114" && $this->instance->isNullable($gK9hD))) { goto xr29s; } goto Z66ig; Z66ig: $wYHZM[$gK9hD] = NULL; goto PDUaY; PDUaY: xr29s: goto rwtuD; rwtuD: ynKLr: goto dH4C1; dH4C1: } goto mOe6Z; NVLvZ: if (!(count($ReDgq) == 0)) { goto vfL3M; } goto mgAP4; Jv5tf: $ReDgq = $this->instance2->where([$n2MyZ => $GabDK])->get(); goto NVLvZ; XjI2u: PlGza: goto yHus2; WDxt4: qF13E: goto w3y6p; a1V2f: if ($this->folder !== null) { goto Hnu8s; } goto y_iQQ; l69P6: kHTj9: goto zfmnr; zWwCu: Factory::response()->sendError("\106\157\x72\142\151\x64\x64\x65\x6e", 403, "\x59\x6f\x75\x20\141\x72\x65\40\156\x6f\x74\40\164\x68\x65\40\x6f\167\x6e\x65\x72\41"); goto eSme6; mgAP4: Factory::response()->code(404)->sendError("\122\x65\x67\151\163\164\x65\162\x20\x66\157\162\40\151\144\x3d{$GabDK}\x20\x64\157\145\163\156\x27\x74\40\145\x78\151\163\x74\x21"); goto FKdsD; vT_UP: sgxm6: goto zlMwZ; pDD1U: $wYHZM[$this->instance->updatedBy()] = $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid(); goto VoBhj; IvQ0B: $wYHZM[static::$folder_field] = $qPuRL[0]["\x6e\141\155\x65"]; goto e5ifH; zF90n: kPD2L: goto dG_WU; gUAKT: if (!($gn70B !== true)) { goto vwsNm; } goto TZeom; HbfsS: if (empty($this->folder)) { goto W7e3P; } goto uqDqk; TZeom: Factory::response()->sendError(_("\x44\141\164\x61\40\166\x61\154\x69\x64\x61\164\x69\x6f\156\x20\x65\x72\162\x6f\162"), 400, $gn70B); goto c8JR9; al53H: $this->folder_name = $qPuRL[0]["\156\x61\x6d\145"]; goto cj1VQ; iDy6T: Factory::response()->sendError("\x45\162\x72\157\162\40\151\x6e\40\x50\101\124\x43\x48", 404); goto WOAJN; bkSt4: $this->webhook("\x75\x70\x64\141\x74\145", $wYHZM, $GabDK); goto sANcB; eSme6: ocfJg: goto XEYfz; TOXhN: foreach ($E3ucc as $nf2Jj) { goto x1pYB; x1pYB: if (!$this->instance->inSchema([$nf2Jj])) { goto m32am; } goto d8Jf8; FKoca: tA7zd: goto UkxjM; g7KKE: m32am: goto FKoca; d8Jf8: if (!isset($wYHZM[$nf2Jj])) { goto pU08z; } goto ZD75y; jdXM0: pU08z: goto g7KKE; ZD75y: Factory::response()->sendError("{$nf2Jj}\x20\x69\x73\40\x6e\x6f\x74\40\146\x69\154\154\x61\142\154\145", 400); goto jdXM0; UkxjM: } goto rbRa2; j8HaX: if (!$this->acl->hasSpecialPermission("\x66\x69\154\x6c\137\141\x6c\154")) { goto qoCD1; } goto tufmd; qdj2W: vM00y: goto XjI2u; uqDqk: $this->onPuttingFolderAfterCheck($GabDK, $wYHZM, $this->folder); goto fwoY5; Zr21K: Factory::response()->sendError("\47\146\x6f\154\x64\145\162\137\x66\151\x65\x6c\144\x27\x20\x69\x73\40\x75\156\x64\145\146\x69\156\145\x64", 403); goto G3RNz; DKqiC: if (!empty(static::$folder_field)) { goto XVsET; } goto Zr21K; vH9Ps: $ZNlZO = $this->instance->inSchema([$this->instance->belongsTo()]); goto a1V2f; Ixa9W: $E3ucc = [$this->instance->deletedAt(), $this->instance->deletedBy(), $this->instance->createdAt(), $this->instance->createdBy()]; goto ch9qk; Wwi19: $this->onPuttingBeforeCheck($GabDK, $wYHZM); goto LX2HG; c8JR9: vwsNm: goto bWtfU; SIvOL: Factory::response()->sendError("\x46\157\162\x62\151\x64\x64\x65\x6e", 403, "\x4c\x6f\x63\153\145\144\x20\142\x79\40\x41\144\155\x69\x6e"); goto vT_UP; bTX62: $aBBJK = DB::table("\x66\157\154\x64\x65\x72\x73")->assoc(); goto yk5FI; w3y6p: try { $Zs7OL = $this->instance->where([$n2MyZ => $GabDK])->update($wYHZM); } catch (\Exception $aU1Pp) { response()->sendError($aU1Pp->getMessage()); } goto ZWxwH; RjUyg: XZ3Xe: goto rYwHh; ZWxwH: if ($Zs7OL !== false) { goto CTy0T; } goto iDy6T; WOAJN: goto kHTj9; goto d2MvK; ZIaRz: $KSb29 = $this->getModelInstance(); goto azbtZ; VoBhj: mBz6L: goto vH9Ps; kQPA5: $bMfJt = $this->instance->getAutoFields(); goto OyrLR; mebLa: sVdOT: goto JFaDI; hp4zx: $this->onPuttingFolderBeforeCheck($GabDK, $wYHZM, $this->folder); goto bTX62; xrTV5: $this->onPuttingBeforeCheck2($GabDK, $wYHZM); goto Jv5tf; XEYfz: goto kPD2L; goto A48I8; e5ifH: $wYHZM[$this->instance->belongsTo()] = $qPuRL[0][$this->instance->belongsTo()]; goto zF90n; tiCQz: $SImKr = array_filter($wYHZM, function ($s11DD, $gK9hD) { goto HCiH3; ZjxpF: if (!in_array($gK9hD, static::$connect_to)) { goto eFC01; } goto HX20S; HX20S: return $s11DD; goto oEu30; HCiH3: if (!is_array($gK9hD)) { goto DkWfU; } goto tFCaL; tFCaL: return; goto XeIQW; XeIQW: DkWfU: goto ZjxpF; oEu30: eFC01: goto AEKZ2; AEKZ2: }, ARRAY_FILTER_USE_BOTH); goto v_PTJ; LX2HG: if ($this->acl->hasSpecialPermission("\x6c\x6f\143\153")) { goto nelun; } goto ZIaRz; o28ip: if (!(count($Igg2P->where([$n2MyZ => $GabDK, static::$folder_field => $this->folder_name])->get()) == 0)) { goto Nk_UQ; } goto A6yVr; v_PTJ: foreach ($SImKr as $UV7E3 => $UZIuW) { goto ZntX0; YTWBI: if (!isset($SAdlT[$bB5iy])) { goto T4_IF; } goto iHAkL; USXF1: $bB5iy = get_primary_key($UV7E3); goto YTWBI; wJA5u: T4_IF: goto Eg0Fx; ZntX0: $SAdlT = $UZIuW; goto USXF1; qepm2: $S4TVo = get_rel_type($this->table_name, $UV7E3); goto ICeCg; musKP: YGjQQ: goto II1KH; js60t: unset($SAdlT[$bB5iy]); goto wJA5u; Eg0Fx: unset($wYHZM[$UV7E3]); goto qepm2; iHAkL: $tYL6e = $SAdlT[$bB5iy]; goto js60t; JzMBt: HQbLf: goto QAQBr; II1KH: OVyXP: goto JzMBt; ICeCg: switch ($S4TVo) { case "\x31\72\61": case "\156\72\x31": goto OWQCQ; vnYtl: MUR7v: goto GLDm8; qtMwh: KtUCW: goto zHzn2; GLDm8: foreach ($aC4Ry as $ACw8Q) { goto r3iwN; QyVVP: if (!(count($MiA3G) > 1)) { goto hjvv1; } goto F1psO; r6NvQ: V67Mq: goto N4Ybl; eUUaU: $UZIuW = $UZIuW[$bB5iy]; goto XKWVU; U4qMY: N5iP4: goto QyVVP; kOEBL: $vvme7 = $ACw8Q; goto sMXzS; r3iwN: if (in_array($UV7E3, static::$connect_to)) { goto V67Mq; } goto hhYu9; hhYu9: if (!in_array($ACw8Q, $MiA3G, true)) { goto APA0k; } goto kOEBL; Apb0Q: APA0k: goto K9Hh9; XKWVU: U64kL: goto U4qMY; UeVgh: SfWb4: goto Qt0V9; sMXzS: $UZIuW = $UZIuW[$vvme7]; goto Apb0Q; K9Hh9: goto N5iP4; goto r6NvQ; F1psO: $Zs7OL = DB::table($UV7E3)->find($tYL6e)->update($SAdlT); goto rdryB; rdryB: hjvv1: goto UeVgh; BF0xl: $vvme7 = $ACw8Q; goto eUUaU; N4Ybl: if (!in_array($bB5iy, $MiA3G, true)) { goto U64kL; } goto BF0xl; Qt0V9: } goto JP4kv; OWQCQ: $aC4Ry = get_fks($this->table_name, $UV7E3); goto pFotc; vxs8b: xDPiB: goto DgKZ6; JP4kv: fJM31: goto vxs8b; t4IFq: $UZIuW = $UZIuW[0]; goto vnYtl; oVs1r: goto xDPiB; goto qtMwh; K4vAi: $aC4Ry = get_fks($this->table_name, $UV7E3); goto c727Z; NGP9U: goto OVyXP; goto W3Ip0; r_wRd: $vvme7 = $aC4Ry[0]; goto oVs1r; zHzn2: $MiA3G = array_keys($UZIuW); goto K4vAi; c727Z: if (!isset($UZIuW[0])) { goto MUR7v; } goto t4IFq; DgKZ6: $wYHZM[$vvme7] = $UZIuW; goto NGP9U; pFotc: if (is_array($UZIuW)) { goto KtUCW; } goto r_wRd; W3Ip0: case "\61\72\x6e": goto aCTqt; ZEu40: EMWSE: goto z3jB8; DxIxO: if (is_int($gK9hD) && is_array($UZIuW[$gK9hD])) { goto xBCBb; } goto MfQc1; DCVOS: if (!($wNzIw == false)) { goto MlYCl; } goto avkFS; d7Etb: $MiA3G = []; goto ZHngq; F8RG_: $AIrIE = array_column($UZIuW, "\151\x64\x5f\x74\141\147"); goto JJ2Wo; c02W1: $rzOHs = DB::table($UV7E3)->where([$vvme7 => $GabDK])->pluck(get_primary_key($UV7E3)); goto lPsU_; yHuXk: m97LJ: goto DCVOS; RGl8W: foreach ($UZIuW as $vdcnq) { goto P0aqM; eYDhf: ae797: goto pvS36; D33Lc: $Smgoo = $eFvpD->find($vdcnq)->update([$vvme7 => $GabDK]); goto eYDhf; P0aqM: $eFvpD = DB::table($UV7E3); goto D33Lc; pvS36: } goto yHuXk; daVz5: MlYCl: goto s2Ad3; JJ2Wo: $iVJAI = array_diff($rzOHs, $AIrIE); goto c1nFe; c3RE8: $rzOHs = []; goto ZEu40; MfQc1: $iVJAI = array_diff($rzOHs, $UZIuW); goto xn49m; h3Mfa: trafE: goto daVz5; TvdwG: N1vGz: goto js4l7; aCTqt: $aC4Ry = get_fks($UV7E3, $this->table_name); goto b4REA; k7PS3: PdI2W: goto fJd91; ssbdE: response()->sendError("\101\164\x20\x74\150\151\163\40\x6d\x6f\155\145\156\164\x20\x69\x74\x27\x73\x20\160\x6f\x73\163\151\x62\x6c\x65\40\164\x6f\40\165\160\144\x61\164\x65\x20\164\x61\x62\154\x65\x73\x20\x77\x69\x74\x68\40\x6f\156\154\x79\40\157\156\145\x20\x72\x65\154\x61\x74\151\157\156\x73\150\151\160\x2e\40\104\x65\x74\141\x69\x6c\72\x20{$UV7E3}\40\x2d\76\40{$this->table_name}"); goto TvdwG; ZHngq: foreach ($UZIuW as $clmxu => $vdcnq) { goto NShYY; VVrP9: goto WObOO; goto V8Ige; MAYXa: $VjNK8 = $ssjbG->find($tYL6e)->exists(); goto VqZG8; jSJfa: $y0ti8 = DB::table($UV7E3)->where($qlsNo)->value($bB5iy); goto Ex5jm; mf1_Y: $tovRs[] = $tYL6e; goto F5z4D; Ex5jm: if (!empty($y0ti8)) { goto phFlW; } goto mtzVp; vozbj: goto lneX1; goto GkL0e; pgewr: $tovRs[] = $y0ti8; goto ZIa2s; yUwe3: if (in_array($bB5iy, $MiA3G, true)) { goto bzbXJ; } goto aJEB2; VqZG8: if ($VjNK8) { goto L6YCj; } goto YItMl; jgOgE: WObOO: goto hQxft; f8y6D: lneX1: goto jgOgE; UvUfD: L6YCj: goto tAwAg; V696I: $Smgoo = $ssjbG->update($qlsNo); goto mf1_Y; pfe1q: $ssjbG = DB::table($UV7E3); goto MAYXa; LtOH5: $tYL6e = $vdcnq[$bB5iy]; goto pfe1q; oMURG: $qlsNo[$vvme7] = $GabDK; goto V696I; mtzVp: $y0ti8 = DB::table($UV7E3)->create($qlsNo); goto A9NyJ; aJEB2: $qlsNo = $vdcnq; goto h6l9b; hQxft: HgMVX: goto Trb1k; NShYY: $MiA3G = array_keys($vdcnq); goto FFSj2; YItMl: response()->sendError("\x53\165\142\162\x65\x73\157\165\x72\143\x65\x20\x66\x6f\x72\x20\x27{$UV7E3}\47\x20\x77\x69\x74\150\40\x69\144\x3d{$tYL6e}\x20\144\157\145\x73\40\156\157\x74\x20\145\x78\151\163\x74", 404); goto UvUfD; V8Ige: bzbXJ: goto pOL5u; pOL5u: if (count($MiA3G) === 1) { goto oTIeC; } goto LtOH5; ZIa2s: unset($UZIuW[$clmxu]); goto VVrP9; h6l9b: $qlsNo[$vvme7] = $GabDK; goto jSJfa; tAwAg: $qlsNo = $vdcnq; goto oMURG; GkL0e: oTIeC: goto f8y6D; FFSj2: $vvme7 = $aC4Ry[0]; goto yUwe3; F5z4D: unset($UZIuW[$clmxu]); goto vozbj; A9NyJ: phFlW: goto pgewr; Trb1k: } goto k7PS3; HC826: if ($wNzIw) { goto RVDl0; } goto c02W1; YXKr3: $bB5iy = get_primary_key($UV7E3); goto d7Etb; vSDzX: $rzOHs = []; goto HC826; D5iSY: $eFvpD = DB::table($UV7E3); goto h_2jh; h_2jh: $Smgoo = $eFvpD->whereIn(get_primary_key($UV7E3), $iVJAI)->when(!empty($tovRs), function ($eMSwJ) use($bB5iy, $tovRs) { $eMSwJ->whereNotIn($bB5iy, $tovRs); })->delete(); goto h3Mfa; lPsU_: if (!empty($rzOHs)) { goto EMWSE; } goto c3RE8; dYmkr: goto V_2mt; goto CU5yx; CU5yx: eXJxf: goto YXKr3; js4l7: $tovRs = []; goto XSm9Y; s2Ad3: goto OVyXP; goto k0lvF; avkFS: $gK9hD = array_key_first($UZIuW); goto DxIxO; bkco4: xBCBb: goto F8RG_; c1nFe: Gw01X: goto WRCAZ; z3jB8: RVDl0: goto RGl8W; fJd91: V_2mt: goto vSDzX; xn49m: goto Gw01X; goto bkco4; b4REA: if (!(count($aC4Ry) > 1)) { goto N1vGz; } goto ssbdE; re1B0: $vvme7 = $aC4Ry[0]; goto dYmkr; XSm9Y: if (is_array($UZIuW[0])) { goto eXJxf; } goto re1B0; WRCAZ: if (empty($iVJAI)) { goto trafE; } goto D5iSY; k0lvF: case "\x6e\72\x6d": goto SArCc; XalCL: ReDJi: goto WAnxn; R7LxD: ec8lO: goto BzYWr; uKF3q: VxVoq: goto zJARI; WAnxn: if (!empty($GcLy3)) { goto f6jZ3; } goto s2pEQ; wQ0h9: $uRrQy = array_column($UZIuW, $PBmCF); goto PNUot; JfEnr: $PBmCF = $vss_M[$UV7E3]; goto hqfXG; s2pEQ: goto G9Al3; goto yFmZ2; BeOmh: QuZbV: goto sEypf; N3fKm: $rzOHs = DB::table($zZJ5p)->where([$s0O3d => $GabDK])->pluck($PBmCF) ?? []; goto Nd437; Nd437: $iVJAI = []; goto tgRVd; TySqX: foreach ($UZIuW as $ySOWs => $vdcnq) { goto tbVos; lOt62: dW1N0: goto gzegV; tbVos: if (!(isset($vdcnq[$PBmCF]) && in_array($vdcnq[$PBmCF], $CzhX7))) { goto dW1N0; } goto aAMLb; gn2Jt: $GcLy3[] = $FQLp_; goto lOt62; gzegV: vg9RK: goto BLyeE; vcyPG: $FQLp_[$s0O3d] = $GabDK; goto gn2Jt; aAMLb: $FQLp_ = $UZIuW[$ySOWs]; goto vcyPG; BLyeE: } goto HphS8; yz0Na: if (empty($CzhX7)) { goto mDHyF; } goto PrUvh; yFmZ2: f6jZ3: goto OKjTH; fETLl: s3hi5: goto N3fKm; PrUvh: if (isset($UZIuW[0]) && is_array($UZIuW[0])) { goto D0wSo; } goto K0kKM; wzyCL: $aC4Ry = array_values($vss_M); goto VKJWL; nny_9: $Smgoo = $eFvpD->whereIn($PBmCF, $iVJAI)->when(!empty($tovRs), function ($eMSwJ) use($PBmCF, $tovRs) { $eMSwJ->whereNotIn($PBmCF, $tovRs); })->delete(); goto TLUsD; NgWvr: foreach ($GcLy3 as $gK9hD => $VjL3Z) { goto Op6th; Op6th: foreach ($VjL3Z as $aBBJK => $s11DD) { goto jDRov; yDCma: VXMJP: goto uPaXL; IU6IX: unset($GcLy3[$gK9hD][$aBBJK]); goto yDCma; uPaXL: moJNr: goto BR0Dp; jDRov: if (!in_array($aBBJK, $sJ681)) { goto VXMJP; } goto IU6IX; BR0Dp: } goto BTvXv; BTvXv: SSxoh: goto dkZNp; dkZNp: eT36m: goto sLkot; sLkot: } goto XalCL; y30yZ: VDM6V: goto wQ0h9; BzYWr: goto rThcD; goto G4Lw_; hAXsI: tF_uI: goto TueMg; M9hL7: if ($wNzIw) { goto tF_uI; } goto sY4m4; C4HmA: $sJ681 = array_keys($YBL1H["\141\164\x74\x72\x5f\x74\x79\160\x65\163"]); goto L_RtL; nYnSM: BeDoa: goto HlJ4e; lMKzr: $iVJAI = array_diff(array_values($rzOHs), array_values($uRrQy)); goto vlXKb; sEypf: $tovRs = []; goto eym23; VKJWL: if (!($wNzIw == false)) { goto BeDoa; } goto EarBy; EarBy: $Smgoo = DB::table($zZJ5p)->where([$s0O3d => $GabDK])->delete(); goto nYnSM; eym23: $s0O3d = $vss_M[$this->table_name]; goto JfEnr; yfPRA: mDHyF: goto NgWvr; YTLrV: $eFvpD->insert($GcLy3); goto hSooK; K0kKM: foreach ($UZIuW as $ySOWs => $vdcnq) { goto aRlca; QxGv3: TtZvn: goto m8ctE; KkSL8: $GcLy3[] = [$s0O3d => $GabDK, $PBmCF => $vdcnq]; goto QxGv3; m8ctE: pLwAp: goto F_2zN; aRlca: if (!in_array($vdcnq, $CzhX7)) { goto TtZvn; } goto KkSL8; F_2zN: } goto R7LxD; TLUsD: MW579: goto hAXsI; ivzW7: response()->sendError("\x41\x74\40\164\x68\x69\163\40\155\157\x6d\145\156\164\x20\x69\x74\47\163\x20\x70\x6f\163\x73\x69\142\x6c\145\x20\164\157\x20\x75\x70\144\141\x74\145\40\x62\162\x69\144\147\x65\x20\x74\x61\142\154\x65\163\40\x77\151\164\150\x20\x6f\x6e\x6c\171\40\157\x6e\145\x20\x72\145\154\141\164\x69\x6f\x6e\x73\150\x69\x70\x20\x74\157\x20\x65\x61\x63\150\40\x73\151\x64\145\x2e\40\104\145\164\141\x69\154\x3a\x20{$UV7E3}\x20\x2d\x3e\40{$this->table_name}"); goto BeOmh; HlJ4e: $YBL1H = get_schema($UV7E3); goto C4HmA; L_RtL: foreach ($aC4Ry as $ACw8Q) { goto IjIiw; tcn6a: foreach ($UZIuW as $clmxu => $vdcnq) { goto WrW0i; oaU1S: mF_2n: goto YbMtA; B7gk8: $Zs7OL = DB::table($UV7E3)->find($IS0i6)->update($qlsNo); goto fmxvL; t2ydz: foreach ($vdcnq as $aBBJK => $b_2qs) { goto UzxEn; O8PfV: eXEyM: goto PYwl9; G8sMj: apPzV: goto O8PfV; UzxEn: if (!($aBBJK == $bB5iy || $aBBJK == $PBmCF)) { goto apPzV; } goto ZHbAj; ZHbAj: $IS0i6 = $b_2qs; goto KnWuj; KnWuj: $iN1U7 = $aBBJK; goto G8sMj; PYwl9: } goto oaU1S; yaRK9: if (!empty($x2g3c)) { goto wrtQP; } goto DUwA3; gU1dH: wrtQP: goto ogLdB; fmxvL: RJYZr: goto azY7C; gLl34: if (count($MiA3G) === 1) { goto X5448; } goto T3EWF; sDI25: k4gjA: goto OG539; kVpgK: if (in_array($iN1U7, $MiA3G, true)) { goto kucfw; } goto PVi4c; wZ0ks: $x2g3c = DB::table($UV7E3)->where($vdcnq)->value($au2v4); goto yaRK9; fWO1w: eHfu0: goto r6JoX; dd6DP: response()->sendError("\x53\165\x62\x72\x65\x73\157\x75\162\x63\x65\40\146\x6f\162\x20\47{$UV7E3}\x27\40\167\151\x74\x68\x20\151\x64\75{$IS0i6}\x20\x64\157\145\x73\x20\x6e\157\164\x20\x65\170\x69\163\x74", 404); goto pGZvx; q2FjE: goto r_zdT; goto zCnPE; XC2DA: KY0bS: goto Rgou6; d9Uei: foreach ($vdcnq as $aBBJK => $s11DD) { goto QYGHg; jqbg6: jFJ2f: goto FFYQB; QYGHg: if (!in_array($aBBJK, $sJ681)) { goto uigCl; } goto OWZRA; g9OTW: uigCl: goto jqbg6; OWZRA: $qlsNo[$aBBJK] = $vdcnq[$aBBJK]; goto g9OTW; FFYQB: } goto l7tq3; YbMtA: $MiA3G = array_keys($vdcnq); goto kVpgK; qV1YP: $iN1U7 = null; goto t2ydz; DUwA3: $x2g3c = DB::table($UV7E3)->create($vdcnq); goto gU1dH; azY7C: goto KY0bS; goto neiht; zCnPE: kucfw: goto gLl34; l7tq3: rMnko: goto r3Fir; pGZvx: geTJe: goto B7gk8; neiht: X5448: goto XC2DA; ltvb0: $mzalK = $yRfta->create($QV1pg); goto sDI25; yMwBe: $yRfta = DB::table($zZJ5p); goto UC2Zy; PVi4c: $au2v4 = get_primary_key($UV7E3); goto wZ0ks; UC2Zy: if (DB::table($zZJ5p)->where($QV1pg)->exists()) { goto k4gjA; } goto ltvb0; Rgou6: r_zdT: goto fWO1w; OG539: $tovRs[] = $x2g3c; goto q2FjE; ogLdB: $QV1pg = [$s0O3d => $GabDK, $PBmCF => $x2g3c]; goto yMwBe; WrW0i: $IS0i6 = null; goto qV1YP; r3Fir: if (empty($qlsNo)) { goto RJYZr; } goto Go1W_; T3EWF: $qlsNo = []; goto d9Uei; CgsGQ: if ($EbL9S) { goto geTJe; } goto dd6DP; Go1W_: $EbL9S = DB::table($UV7E3)->find($IS0i6)->exists(); goto CgsGQ; r6JoX: } goto rOLAo; P1DZy: oY3JS: goto VzLL4; rOLAo: PfnyY: goto P1DZy; VzLL4: WXvqQ: goto J2F5k; OIzW5: $MiA3G = []; goto tcn6a; ETbFy: BX3rd: goto OIzW5; Nh520: goto oY3JS; goto ETbFy; IjIiw: if (is_array($UZIuW[0])) { goto BX3rd; } goto Nh520; J2F5k: } goto fETLl; aVHCd: $zZJ5p = $aJfO5["\142\162\151\144\x67\x65"] ?? null; goto NWWeV; hSooK: G9Al3: goto XiBnu; vlXKb: JHIBQ: goto yYeYG; zJARI: $vss_M = $aJfO5["\146\x6b\x73"]; goto Oggh2; A7qyM: $gK9hD = array_key_first($UZIuW); goto bg6Oe; Oggh2: if (!(count($vss_M) > 2)) { goto QuZbV; } goto ivzW7; ZN2_w: $iVJAI = array_diff(array_values($rzOHs), array_values($UZIuW)); goto gzCdB; bg6Oe: if (is_int($gK9hD) && isset($UZIuW[$gK9hD]) && is_array($UZIuW[$gK9hD])) { goto VDM6V; } goto GzJvp; GzJvp: if (!($wNzIw == false)) { goto kQspb; } goto ZN2_w; bqaTU: rThcD: goto yfPRA; XiBnu: goto OVyXP; goto mz8pB; OKjTH: $eFvpD = DB::table($zZJ5p); goto YTLrV; sY4m4: if (empty($iVJAI)) { goto MW579; } goto Ctm6J; hqfXG: unset($vss_M[$this->table_name]); goto wzyCL; SArCc: $aJfO5 = get_pivot([$this->table_name, $UV7E3]); goto aVHCd; NWWeV: if (!($zZJ5p === null)) { goto VxVoq; } goto XfYWk; TueMg: $GcLy3 = []; goto yz0Na; PNUot: if (!($wNzIw == false)) { goto JHIBQ; } goto lMKzr; yYeYG: $CzhX7 = array_diff(array_values($uRrQy), array_values($rzOHs)); goto DZiBv; gPVMU: goto huaZb; goto y30yZ; gzCdB: kQspb: goto sTZb_; DZiBv: huaZb: goto M9hL7; Ctm6J: $eFvpD = DB::table($zZJ5p); goto nny_9; sTZb_: $CzhX7 = array_diff(array_values($UZIuW), array_values($rzOHs)); goto gPVMU; tgRVd: $CzhX7 = []; goto A7qyM; G4Lw_: D0wSo: goto TySqX; HphS8: rm2HK: goto bqaTU; XfYWk: throw new \Exception("\x42\162\151\x64\x67\145\x20\164\141\x62\154\x65\x20\x6e\157\164\40\146\157\x75\x6e\x64\x20\x66\157\x72\x20{$this->table_name}\x20\141\x6e\x64\x20{$UV7E3}"); goto uKF3q; mz8pB: } goto musKP; QAQBr: } goto tnAFL; dG_WU: if (empty(static::$connect_to)) { goto XZ3Xe; } goto tiCQz; bWtfU: $this->instance->fill([$this->instance->updatedBy()]); goto HbfsS; zfmnr: } catch (InvalidValidationException $aU1Pp) { Factory::response()->sendError("\126\x61\154\151\144\141\x74\x69\157\156\40\105\162\162\157\x72", 400, json_decode($aU1Pp->getMessage())); } catch (\PDOException $aU1Pp) { Factory::response()->sendError("\x45\x72\x72\x6f\x72\x3a\x20\143\162\145\141\164\151\x6f\x6e\40\157\x66\40\x72\145\163\157\x75\x72\143\145\x20\x66\141\151\154\x73\x3a\x20" . $aU1Pp->getMessage(), 500); } catch (\Exception $aU1Pp) { Factory::response()->sendError("\105\162\162\157\162\40\x64\165\162\x69\156\x67\40\120\x41\x54\x43\x48\40\146\157\x72\x20\x69\144\75{$GabDK}\x20\x77\x69\164\x68\x20\155\145\x73\x73\x61\x67\x65\72\40{$aU1Pp->getMessage()}"); } goto yOl_M; pu0fc: Llch9: goto TRV6k; Yy4ID: response()->sendError("\111\x6e\166\141\x6c\x69\144\40\x4a\x53\117\116", 400); goto hMMS_; DOfEg: $wNzIw = request()->shiftQuery("\x5f\x61\160\160\x65\156\x64", false); goto TyRrl; wb3SE: response()->sendError("\115\x69\x73\163\151\x6e\x67\40\151\144", 400); goto pu0fc; h8JNX: $this->id = $GabDK; goto h6L5K; YNYiG: if (!empty($wYHZM)) { goto aGUWB; } goto Yy4ID; IzXF0: sbX0d: goto h8JNX; jl2Hb: $wNzIw = false; goto IzXF0; TRV6k: $wYHZM = request()->getBody(false); goto YNYiG; hMMS_: aGUWB: goto DOfEg; h6L5K: $this->folder = $this->folder = $wYHZM["\x66\x6f\154\144\x65\x72"] ?? null; goto H5ZdE; yOl_M: } function put($GabDK = null) { $this->modify($GabDK, true); } function patch($GabDK = NULL) { $this->modify($GabDK); } function delete($GabDK = NULL) { goto PHra3; u9SE3: $wYHZM = Factory::request()->getBody(false); goto jMOl3; l6uWX: PgLr3: goto u9SE3; Otx4G: Factory::response()->sendError("\x4d\151\163\x73\x69\156\x67\40\x69\144", 400); goto l6uWX; VmP1G: $this->folder = $this->folder = $wYHZM["\146\x6f\154\x64\145\x72"] ?? null; goto hRH70; jMOl3: $this->id = $GabDK; goto VmP1G; PHra3: if (!($GabDK == NULL)) { goto PgLr3; } goto Otx4G; hRH70: try { goto wGigK; zSKyq: $ReDgq = $this->instance->get(); goto sM2No; jwWcn: if (empty($this->folder)) { goto AySiM; } goto lQhWL; yV3ba: cxa9o: goto x1QfX; UBMa1: Cjm9R: goto gfNVk; hd5dm: Factory::response()->sendError("\x55\x6e\144\x65\146\x69\x6e\x65\x64\x20\x66\x6f\154\x64\x65\x72\x20\x66\151\145\x6c\x64", 403); goto yV3ba; ziPdt: if (!(count($Igg2P->where([$n2MyZ => $GabDK, static::$folder_field => $this->folder_name])->get()) == 0)) { goto zwmnn; } goto De1o9; wSHl0: Factory::response()->sendJson("\x4f\x4b"); goto Y12Re; vtBjJ: if ($Zs7OL) { goto oDw3c; } goto tTEbZ; x1QfX: $this->onDeletingFolderBeforeCheck($GabDK, $this->folder); goto SicPV; M1LXi: oDm9e: goto Citar; IKWyj: if ($this->folder !== null) { goto oDm9e; } goto PH0R6; Wjdcv: goto nfG4H; goto M1LXi; gf0Q0: $Igg2P = $this->getModelInstance(); goto ziPdt; WsbHo: $qPuRL = $aBBJK->where([$n2MyZ => $this->folder])->get(); goto pOghr; hSSuw: $this->onDeletingBeforeCheck($GabDK); goto zSKyq; V40bL: $this->onDeleted($GabDK, $Zs7OL); goto vG77R; Z_YLL: $wYHZM["\x62\x65\x6c\x6f\x6e\x67\x73\137\164\157"] = $qPuRL[0][$this->instance->belongsTo()]; goto g80qO; wGigK: $this->instance = $this->getModelInstance(); goto FK5U7; iIrt4: $Zs7OL = $this->instance->delete($eIqNO); goto vtBjJ; XM9hi: $n2MyZ = $this->instance->getIdName(); goto H9_lB; Sq0Yu: Factory::response()->sendError("\x4c\x6f\143\x6b\x65\x64\40\142\171\x20\x41\x64\155\151\156", 403); goto yuYaU; pOghr: if (!(count($qPuRL) == 0 || $qPuRL[0]["\x74\x62"] != $this->table_name)) { goto Gf9ay; } goto ukxDT; tTEbZ: Factory::response()->sendError("\x52\x65\x63\x6f\162\x64\40\x6e\x6f\x74\x20\x66\x6f\165\x6e\144", 404); goto TmTjW; Blzw0: unset($wYHZM["\x66\x6f\154\144\145\162"]); goto w1AbT; sM2No: if (!(count($ReDgq) == 0)) { goto h2JRg; } goto W9pj_; sZgRj: MxOrB: goto Wjdcv; UzrmU: if (!($Eg_QQ && $UXkBP)) { goto qQFUG; } goto CEyO8; ZtceI: $eIqNO = array_merge($eIqNO, [$this->instance->isLocked() => 1]); goto UBMa1; De1o9: Factory::response()->code(404)->sendError("\122\145\147\x69\163\x74\x65\x72\x20\146\157\x72\40{$n2MyZ}\x3d{$GabDK}\x20\x64\x6f\145\163\x6e\47\164\40\145\x78\151\x73\164"); goto s4D2v; TmTjW: goto WQO1b; goto sb3Lz; SMH_n: if (!($qPuRL[0][$this->instance->belongsTo()] != Acl::getCurrentUid() && !FoldersAclExtension::hasFolderPermission($this->folder, "\x77"))) { goto r3ltZ; } goto jPYxF; SicPV: $aBBJK = DB::table("\146\157\154\x64\x65\162\x73")->assoc(); goto WsbHo; S6yDb: $eIqNO = []; goto IIDvI; H9_lB: $ZNlZO = $this->instance->inSchema([$this->instance->belongsTo()]); goto ntsHd; w1AbT: $wYHZM[static::$folder_field] = $qPuRL[0]["\156\x61\155\145"]; goto Z_YLL; vG77R: $this->webhook("\x64\x65\154\x65\164\x65", [], $GabDK); goto wSHl0; yuYaU: IjWCx: goto wVlVi; Citar: if (!empty(static::$folder_field)) { goto cxa9o; } goto hd5dm; NrDZm: qQFUG: goto jwWcn; s4D2v: zwmnn: goto Blzw0; Y12Re: WQO1b: goto TtBOw; mS8CP: Gf9ay: goto SMH_n; gfNVk: LzLaN: goto IBW16; Hmg3L: if (!$this->instance->inSchema([$this->instance->isLocked()])) { goto Cjm9R; } goto ZtceI; mWsHT: AySiM: goto nmn94; GtfaU: r3ltZ: goto cStW2; W9pj_: Factory::response()->code(404)->sendError("\x52\x65\x67\x69\163\164\x65\x72\x20\x66\x6f\162\x20{$n2MyZ}\x3d{$GabDK}\x20\x64\x6f\x65\163\156\47\164\x20\145\170\151\163\x74"); goto mPqlc; ukxDT: Factory::response()->sendError("\x46\157\154\x64\145\x72\40\156\x6f\x74\40\146\x6f\165\x6e\x64", 404); goto mS8CP; FK5U7: $this->instance->assoc()->fill([$this->instance->deletedBy()]); goto XM9hi; mPqlc: h2JRg: goto IKWyj; g80qO: nfG4H: goto S6yDb; CEyO8: $eIqNO = array_merge($eIqNO, [$this->instance->deletedBy() => $this->impersonated_by != null ? $this->impersonated_by : Acl::getCurrentUid()]); goto NrDZm; cW4BY: $this->onDeletingAfterCheck($GabDK); goto iIrt4; PH0R6: if (!($ZNlZO && !$this->acl->hasSpecialPermission("\167\x72\151\164\145\x5f\x61\x6c\x6c") && $ReDgq[0]["\x62\145\x6c\x6f\x6e\147\x73\x5f\x74\x6f"] != Acl::getCurrentUid())) { goto MxOrB; } goto LaJ6G; lQhWL: $this->onDeletingFolderAfterCheck($GabDK, $this->folder); goto mWsHT; sWplK: DVOLF: goto V40bL; CNd7o: HO4Vw: goto Hmg3L; IIDvI: if ($this->acl->hasSpecialPermission("\x6c\157\x63\153")) { goto HO4Vw; } goto g3ayO; nmn94: $this->instance->setSoftDelete($Eg_QQ && static::$soft_delete); goto cW4BY; xFJLc: $UXkBP = $this->instance->inSchema([$this->instance->deletedBy()]); goto UzrmU; ntsHd: $ReDgq = $this->instance->where([$n2MyZ, $GabDK]); goto hSSuw; cStW2: $this->folder_name = $qPuRL[0]["\x6e\x61\155\145"]; goto gf0Q0; LaJ6G: Factory::response()->sendError("\106\157\162\x62\151\x64\x64\145\x6e", 403, "\131\x6f\165\x20\x61\x72\x65\40\x6e\x6f\164\x20\164\x68\x65\x20\157\167\x6e\x65\x72"); goto sZgRj; zse3v: if (!($this->folder !== null)) { goto DVOLF; } goto Zw3Go; Zw3Go: $this->onDeletedFolder($GabDK, $Zs7OL, $this->folder); goto sWplK; g3ayO: if (!(isset($ReDgq[0][$this->instance->isLocked()]) && $ReDgq[0][$this->instance->isLocked()] == 1)) { goto IjWCx; } goto Sq0Yu; wVlVi: goto LzLaN; goto CNd7o; jPYxF: Factory::response()->sendError("\131\x6f\165\x20\150\141\166\145\x20\x6e\157\x74\40\x70\145\x72\x6d\x69\163\x73\151\157\156\40\x66\x6f\x72\40\164\150\x65\x20\146\x6f\154\144\x65\162\40{$this->folder}", 403); goto GtfaU; IBW16: $Eg_QQ = $this->instance->inSchema([$this->instance->deletedAt()]); goto xFJLc; sb3Lz: oDw3c: goto zse3v; TtBOw: } catch (\Exception $aU1Pp) { Factory::response()->sendError("\x45\162\x72\157\x72\x20\x64\165\162\151\x6e\147\x20\104\x45\114\105\124\105\40\146\157\162\x20{$n2MyZ}\75{$GabDK}\x20\x77\x69\164\x68\40\155\145\163\x73\141\x67\145\72\40{$aU1Pp->getMessage()}"); } goto YEHvQ; YEHvQ: } public static function hasSoftDelete() { return static::$soft_delete; } protected function onGettingBeforeCheck($GabDK) { } protected function onGettingAfterCheck($GabDK) { } protected function onGettingAfterCheck2($GabDK) { } protected function onGot($GabDK, ?int $AEszk) { } protected function onDeletingBeforeCheck($GabDK) { } protected function onDeletingAfterCheck($GabDK) { } protected function onDeleted($GabDK, ?int $Zs7OL) { } protected function onPostingBeforeCheck($GabDK, array &$wYHZM) { } protected function onPuttingBeforeCheck2($GabDK, array &$wYHZM) { } protected function onPostingAfterCheck($GabDK, array &$wYHZM) { } protected function onPost($GabDK, array &$wYHZM) { } protected function onPuttingBeforeCheck($GabDK, array &$wYHZM) { } protected function onPuttingAfterCheck($GabDK, array &$wYHZM) { } protected function onPut($GabDK, array &$wYHZM, ?int $Zs7OL) { } protected function webhook(string $MrHHt, $wYHZM, $GabDK = null) { goto LbQKC; i6TFb: foreach ($BCs8a as $lPYTS) { goto B_JxP; Epmxa: goto txDXW; goto ZJBEX; Zyb79: $M0995["\167\x65\x62\150\157\x6f\153\x5f\x69\144"] = $lPYTS["\151\144"]; goto CwIug; ZWtCy: $tiuQn = DB::table($this->table_name)->assoc()->find($GabDK)->deleted()->first(); goto CnU44; TuqWL: $M0995["\x64\141\164\x61"] = array_merge($tiuQn, $M0995["\144\x61\164\x61"]); goto bUHXG; CTdx3: parse_str($lPYTS["\143\157\x6e\x64\151\164\x69\157\156\x73"], $ydkX8); goto ukvUl; lYT7S: goto zyvaZ; goto ymynJ; uvgWA: $tiuQn = DB::table($this->table_name)->assoc()->find($GabDK)->deleted()->first(); goto TuqWL; OwJKE: if (!($MrHHt != "\154\x69\x73\x74")) { goto gZOVn; } goto LCfsv; cu4Ta: if (empty($lPYTS["\143\157\x6e\144\x69\x74\x69\157\156\x73"])) { goto dsgVx; } goto OwJKE; W1Ljm: if (!($tiuQn === null)) { goto yho2S; } goto uvgWA; ZJBEX: dsgVx: goto xtV2z; EemYG: DMsFr: goto NcYgJ; CCbzz: $M0995["\x64\141\x74\141"] = array_merge($tiuQn, $M0995["\x64\141\x74\141"]); goto TM2g4; ucp2e: $ZvgY1 = array_keys($ydkX8); goto aX3r4; L2PJo: gZOVn: goto Epmxa; xbgIe: txDXW: goto TS4ji; CmSpF: if (!Strings::filter($M0995["\x64\x61\164\141"], $ydkX8)) { goto DMsFr; } goto W1Ljm; TRwO3: wJEo2: goto CCbzz; jtaIv: if (!($tiuQn === null)) { goto wJEo2; } goto ZWtCy; R5ebl: $Zm1F6 = array_keys($M0995["\144\x61\x74\x61"]); goto EQd48; EQd48: if (!(count(array_diff($ZvgY1, $Zm1F6)) == 0)) { goto nc8qY; } goto CmSpF; NcYgJ: nc8qY: goto lYT7S; TS4ji: zyvaZ: goto mJX9e; bUHXG: yho2S: goto tj63U; Hqzrd: if (!($MrHHt == "\165\x70\x64\x61\164\x65" && !empty($lPYTS["\x63\157\x6e\144\151\164\151\157\x6e\x73"]))) { goto miW4E; } goto ucp2e; LCfsv: if (!Strings::filter($M0995["\x64\141\164\x61"], $ydkX8)) { goto bKix6; } goto jqt8_; ymynJ: miW4E: goto jtaIv; aX3r4: $ZvgY1 = array_unique($ZvgY1); goto R5ebl; jqt8_: Url::consume_api($lPYTS["\x63\141\154\x6c\142\141\x63\x6b"], "\120\117\123\124", $M0995); goto V66z3; TM2g4: uUCNa: goto cu4Ta; V66z3: bKix6: goto L2PJo; xtV2z: Url::consume_api($lPYTS["\143\x61\154\154\x62\x61\143\x6b"], "\x50\x4f\x53\x54", $M0995); goto xbgIe; tj63U: Url::consume_api($lPYTS["\x63\x61\x6c\154\x62\141\x63\153"], "\120\x4f\x53\x54", $M0995); goto EemYG; B_JxP: if (empty($lPYTS["\143\x6f\x6e\x64\151\164\151\157\x6e\163"])) { goto jLImd; } goto CTdx3; CnU44: $M0995["\x64\141\164\x61"] = array_merge($tiuQn, $M0995["\x64\x61\164\141"]); goto TRwO3; ukvUl: jLImd: goto Zyb79; CwIug: if (!($MrHHt == "\x75\x70\x64\x61\164\x65" || $MrHHt == "\144\145\154\x65\x74\x65" || $MrHHt == "\163\x68\x6f\167" && !empty(Factory::request()->getQuery("\x66\151\145\x6c\x64\x73")))) { goto uUCNa; } goto Hqzrd; mJX9e: } goto Og6UG; bTZFH: DB::getDefaultConnection(); goto libJm; LbQKC: if (in_array($MrHHt, ["\x73\150\x6f\167", "\x6c\x69\x73\x74", "\x63\162\145\141\164\145", "\x75\x70\144\x61\x74\x65", "\x64\145\154\145\x74\x65"])) { goto J_P23; } goto IN0OS; pkiAv: J_P23: goto bTZFH; libJm: $BCs8a = DB::table("\x77\145\x62\x68\x6f\x6f\x6b\x73")->where(["\x6f\160" => $MrHHt, "\x65\x6e\x74\151\x74\171" => $this->table_name])->get(); goto ndRg_; Og6UG: ff4SW: goto dXrIH; KC0Ku: $tiuQn = null; goto i6TFb; IN0OS: throw new \InvalidArgumentException("\x49\156\x76\x61\154\x69\144\x20\167\145\142\x68\157\157\x6b\x20\x6f\160\x65\162\x61\x74\151\x6f\x6e\x20\146\157\x72\x20{$MrHHt}"); goto pkiAv; ndRg_: $M0995 = ["\x77\x65\x62\150\157\x6f\153\x5f\x69\x64" => null, "\145\x76\x65\x6e\x74\x5f\x74\171\160\145" => $MrHHt, "\145\156\x74\151\x74\171" => $this->table_name, "\x69\144" => $GabDK, "\x64\141\164\141" => $wYHZM, "\165\x73\145\162\137\151\144" => Acl::getCurrentUid(), "\141\x74" => date("\x59\55\x6d\55\144\x20\x48\x3a\x69\x3a\x73", time())]; goto KC0Ku; dXrIH: } protected function onGettingFolderBeforeCheck($GabDK, $IYYL1) { } protected function onGettingFolderAfterCheck($GabDK, $IYYL1) { } protected function onGotFolder($GabDK, ?int $AEszk, $IYYL1) { } protected function onDeletingFolderBeforeCheck($GabDK, $IYYL1) { } protected function onDeletingFolderAfterCheck($GabDK, $IYYL1) { } protected function onDeletedFolder($GabDK, ?int $Zs7OL, $IYYL1) { } protected function onPostingFolderBeforeCheck($GabDK, array &$wYHZM, $IYYL1) { } protected function onPostingFolderAfterCheck($GabDK, array &$wYHZM, $IYYL1) { } protected function onPostFolder($GabDK, array $wYHZM, $IYYL1) { } protected function onPuttingFolderBeforeCheck($GabDK, array &$wYHZM, $IYYL1) { } protected function onPuttingFolderAfterCheck($GabDK, array &$wYHZM, $IYYL1) { } protected function onPutFolder($GabDK, array $wYHZM, ?int $Zs7OL, $IYYL1) { } }
