# SimpleRest Framework Packager Specification

## Overview
This document specifies the functionality of a PHP script that creates a clean distribution copy of the SimpleRest framework from the development environment to a destination directory, preparing it for distribution via GitHub/composer while removing development-specific configurations.

## Objective
Create a PHP script that copies the SimpleRest framework from the development directory (`D:\laragon\www\simplerest`) to a clean distribution directory (`D:\laragon\www\simplerest-pack`), preparing it for distribution while removing development-specific configurations.

## Script Name
`pack_framework.php`

## Source and Destination
- **Source Directory**: `D:\laragon\www\simplerest`
- **Destination Directory**: `D:\laragon\www\simplerest-pack`

## Required Directory Structure Creation
The script must create the following directory structure in the destination if it doesn't exist:
```
D:\laragon\www\simplerest-pack/
├── database/
│   ├── migrations/
│   └── seeders/
├── config/
├── scripts/
├── etc/
├── app/
├── logs/
```

## Copy Operations

### 1. Recursive Copy of `src/` Directory
- Copy the entire `src/` directory from source to destination recursively
- Source: `D:\laragon\www\simplerest\src\`
- Destination: `D:\laragon\www\simplerest-pack\src\`

### 2. Copy First-Level Contents of `app/` Directory
Copy all first-level subdirectories from the source `app/` directory to the destination `app/` directory:
- `Background`
- `Commands`
- `Controllers`
- `DTO`
- `Helpers`
- `Interfaces`
- `Libs`
- `Locale`
- `Middlewares`
- `Models`
- `Modules`
- `Pages`
- `Schemas`
- `Traits`
- `Transformers`
- `Views`
- `Widgets`

### 3. Copy Configuration Files
- Copy all files from `D:\laragon\www\simplerest\config\` to `D:\laragon\www\simplerest-pack\config\`
- Process configuration files to remove/replace development-specific values
- Special attention to `databases.php` and other sensitive config files

### 4. Copy Essential Root Files
Copy the following essential files from source root to destination root:
- `composer.json` (processed to remove development-specific paths)
- `README.md`
- `LICENSE`
- `index.php`
- `app.php`
- `.htaccess`
- `.gitignore`
- `CHANGELOG.txt`
- `.env.example` (processed to remove sensitive information)

## Configuration Processing

### .env.example Processing
The script must process the `.env.example` file to replace actual credentials with generic placeholders:
- Replace all database connection details with generic placeholders
- Replace email credentials with generic placeholders
- Replace OAuth credentials with generic placeholders
- Replace token secret keys with generic placeholders

### composer.json Processing
The script must process `composer.json` to:
- Remove development-specific repositories
- Remove path repositories pointing to local packages
- Ensure package name, description, and metadata are appropriate for distribution
- Maintain all necessary dependencies for the framework to function

## Exclusions
The script must exclude the following files/directories from copying:
- `.git/` directory
- `vendor/` directory (to be regenerated by composer install)
- `node_modules/` directory
- `logs/` directory contents (should remain empty in distribution)
- `storage/` directory contents (should remain empty in distribution)
- `backups/` directory
- `docker/` directory
- `docs/` directory (unless essential for distribution)
- `examples/` directory
- `exports/` directory
- `test-results/` directory
- `tests/` directory
- `webautomation/` directory
- `yakpro-po/` directory
- Any temporary or debug files (e.g., `test_*.php`, `debug*.php`, etc.)
- Any files containing sensitive information

## Security and Privacy Requirements
- Ensure no sensitive information is copied (passwords, tokens, API keys, etc.)
- Replace any hardcoded credentials with placeholders
- Sanitize configuration files to remove personal/development information
- Validate that no personal files or temporary files are included in the distribution

## Validation Steps
After copying, the script should validate:
1. All essential directories were created in the destination
2. All required files were copied successfully
3. The destination directory structure matches the expected format
4. Configuration files have been properly sanitized
5. The copied framework is ready for composer packaging

## Error Handling
The script should include proper error handling for:
- Source directory not accessible
- Destination directory creation failure
- File copy failures
- Insufficient disk space
- Permission issues

## Logging
The script should provide logging/output indicating:
- Progress of the copy operation
- Files being processed
- Any exclusions applied
- Success or failure status
- Time taken for the operation

## Expected Outcome
Upon successful execution, the script should create a clean, distributable version of the SimpleRest framework in `D:\laragon\www\simplerest-pack` that:
- Contains all necessary framework code
- Has sanitized configuration files without sensitive information
- Is ready for packaging with composer
- Can be uploaded to GitHub for distribution
- Maintains all functionality of the original framework