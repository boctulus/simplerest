<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.13  |
    |              on 2022-01-16 10:43:12              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 declare (strict_types=1); namespace simplerest\core\libs; use simplerest\core\Model; use simplerest\core\libs\Strings; use simplerest\core\libs\Schema; class DB { protected static $connections = []; protected static $current_id_conn; protected static $model_instance; protected static $raw_sql; protected static $values = []; protected static $tb_name; protected static $inited_transaction = false; protected function __construct() { } public static function setConnection(string $K_Amd) { goto CZwVP; UCSMa: QgOOz: goto iU0WI; iU0WI: static::$current_id_conn = $K_Amd; goto s71VL; CZwVP: if (!($K_Amd === null)) { goto RyC0Z; } goto dqyyg; dqyyg: throw new \InvalidArgumentException("\x43\157\x6e\156\x65\x63\x74\x69\x6f\156\x20\151\144\x65\x6e\x74\151\x66\x69\145\162\x20\143\141\156\x20\x6e\157\x74\40\142\145\x20\x4e\x55\114\x4c"); goto HJ3TC; BDvSE: if (isset(config()["\x64\x62\x5f\x63\157\x6e\156\145\143\x74\x69\x6f\156\x73"][$K_Amd])) { goto QgOOz; } goto vacwm; vacwm: throw new \InvalidArgumentException("\125\x6e\162\x65\x67\151\x73\x74\145\x72\145\144\40\x63\x6f\156\156\145\143\x74\151\157\156\40\x69\144\x65\156\164\151\x66\x69\x65\x72\x20\146\x6f\x72\40\x27{$K_Amd}\x27"); goto UCSMa; HJ3TC: RyC0Z: goto BDvSE; s71VL: } public static function getConnection(string $iDJ5X = null) { goto IwJAO; fof6K: if ($FMoe6 == 1) { goto ta_5T; } goto AETx2; iUZI_: if (!($FMoe6 == 0)) { goto uQf3b; } goto O_EeU; s_cNk: if ($iDJ5X != null) { goto FHzvc; } goto IuO9L; hqJZf: $aQXCf = config()["\144\142\x5f\x63\157\x6e\x6e\x65\x63\164\x69\157\x6e\x73"][static::$current_id_conn]["\x68\157\x73\x74"] ?? "\154\x6f\143\141\154\150\157\x73\x74"; goto mAWlf; F2xYw: goto PQ80B; goto z2o_Q; O_EeU: throw new \Exception("\116\157\40\x64\141\x74\x61\x62\x61\x73\x65"); goto flsEg; orNi2: gHEL0: goto bdAUq; MwH4q: $LKnlJ = config()["\144\142\x5f\143\157\156\x6e\145\143\164\x69\x6f\156\163"][static::$current_id_conn]["\160\157\162\x74"] ?? NULL; goto y9oOw; wYodK: PQ80B: goto R2UrN; VsRgO: goto Vt0r0; goto iL2bh; mP1gH: $CFR28 = config()["\x64\x62\137\143\157\156\x6e\x65\143\164\151\x6f\156\x73"][static::$current_id_conn]["\x70\x64\157\x5f\x6f\160\x74\151\x6f\156\163"] ?? NULL; goto tNv6x; tI2y3: static::$current_id_conn = config()["\144\x62\137\143\x6f\156\x6e\x65\143\164\151\x6f\156\x5f\x64\145\x66\x61\x75\154\x74"]; goto wYodK; y9oOw: $HTD8s = config()["\x64\142\137\143\157\x6e\156\145\x63\164\151\157\x6e\x73"][static::$current_id_conn]["\144\x62\x5f\156\x61\x6d\145"]; goto pWX8z; B5rnn: heip0: goto uKVIp; qaf3N: try { goto AN1uG; jEjKP: YEq7R: goto VsfVX; AEXGp: if (!($LlWWs != null)) { goto AMtqr; } goto khpoL; V8Y6d: Z2si_: goto jEjKP; LnQL7: AMtqr: goto D3gRY; AN1uG: switch ($d7qD3) { case "\x6d\x79\163\161\x6c": self::$connections[static::$current_id_conn] = new \PDO("{$d7qD3}\72\x68\x6f\163\x74\75{$aQXCf}\73\x64\142\x6e\x61\155\145\x3d{$HTD8s}\73\x70\157\x72\164\x3d{$LKnlJ}", $w_1qA, $uxMnj, $CFR28); goto YEq7R; case "\x73\161\x6c\151\164\x65": goto W2OUt; QAPJv: goto YEq7R; goto gzaKg; WUdGQ: self::$connections[static::$current_id_conn] = new \PDO("\163\x71\x6c\151\164\x65\x3a{$G0_3L}", null, null, $CFR28); goto QAPJv; W2OUt: $G0_3L = Strings::contains(DIRECTORY_SEPARATOR, $HTD8s) ? $HTD8s : STORAGE_PATH . $HTD8s; goto WUdGQ; gzaKg: case "\x70\147\163\161\154": self::$connections[static::$current_id_conn] = new \PDO("\x70\147\x73\161\154\72\150\157\163\164\x3d{$aQXCf}\x3b\x64\x62\x6e\141\155\145\x3d{$HTD8s}\73\x70\157\x72\x74\x3d{$LKnlJ}", $w_1qA, $uxMnj, $CFR28); goto YEq7R; case "\x6d\x73\x73\161\x6c": self::$connections[static::$current_id_conn] = new \PDO("\x73\x71\x6c\163\162\x76\x3a\x53\145\162\x76\x65\162\x3d{$aQXCf}\x2c{$LKnlJ}\73\x44\x61\x74\x61\142\141\x73\145\x3d{$HTD8s}", $w_1qA, $uxMnj, $CFR28); goto YEq7R; default: throw new \Exception("\104\162\151\x76\x65\162\40\x27{$d7qD3}\x27\40\156\x6f\164\x20\163\x75\x70\x70\157\x72\164\x65\x64\40\x2f\x20\x74\145\163\x74\x65\144\x2e"); } goto V8Y6d; khpoL: switch (DB::driver()) { case "\155\171\x73\x71\x6c": case "\160\x67\x73\x71\x6c": goto iqeXy; GrCVc: $g1S8o = "\123\x45\x54\40\x4e\x41\115\x45\123\x20\x27{$LlWWs}\x27"; goto r4dtZ; iqeXy: $LlWWs = str_replace("\x2d", '', $LlWWs); goto GrCVc; r4dtZ: goto h3_RF; goto yp2ED; yp2ED: case "\x73\x71\154\151\164\145": goto z7nnf; ayyYl: $g1S8o = "\x50\x52\x41\x47\x4d\x41\40\145\156\143\x6f\x64\x69\156\x67\x20\75\x20\47{$LlWWs}\47"; goto w0PSY; w0PSY: goto h3_RF; goto OE70p; z7nnf: $LlWWs = preg_replace("\x2f\x55\124\106\x28\133\60\x2d\71\x5d\173\61\x2c\62\175\51\x2f\151", "\x55\124\106\55\x24\x31", $LlWWs); goto ayyYl; OE70p: case "\x73\x71\x6c\x73\x72\166": goto CB23j; tX9mh: goto h3_RF; goto ok6E6; LF396: $yJSr9->setAttribute(\PDO::q0SuU, \PDO::e7NcV); goto XaaJ0; CB23j: if (!($LlWWs == "\x55\x54\x46\70" || $LlWWs == "\x55\x54\x46\55\70")) { goto uFERP; } goto LF396; XaaJ0: uFERP: goto tX9mh; ok6E6: } goto jGsQV; VsfVX: $yJSr9 =& self::$connections[static::$current_id_conn]; goto AEXGp; Qz__H: h3_RF: goto bLVuC; bLVuC: $yJSr9->exec($g1S8o); goto LnQL7; jGsQV: enW3N: goto Qz__H; D3gRY: } catch (\PDOException $alz2W) { throw new \PDOException("\x50\104\117\40\105\170\x63\145\x70\164\x69\x6f\156\72\x20" . $alz2W->getMessage()); } catch (\Exception $alz2W) { throw new \Exception($alz2W->getMessage()); } goto UaCwL; ltzRF: LaQOA: goto z4cww; tNv6x: $LlWWs = config()["\144\142\x5f\x63\157\156\156\145\x63\164\151\x6f\x6e\163"][static::$current_id_conn]["\x63\150\x61\162\x73\145\x74"] ?? NULL; goto dKmBi; o5MOd: static::$current_id_conn = $iDJ5X; goto itz3K; e38pr: throw new \InvalidArgumentException("\x49\x6e\166\141\154\x69\x64\x20\x64\x61\x74\x61\142\x61\163\145\40\x73\145\154\x65\x63\x74\145\144\40\x66\x6f\x72\x20" . static::$current_id_conn); goto W48fh; W48fh: D7KwY: goto hqJZf; bdAUq: if (!($d7qD3 == "\x70\157\163\x74\x67\x72\x65\x73")) { goto heip0; } goto onbP4; IuO9L: if (!(static::$current_id_conn == null)) { goto vXTj5; } goto fof6K; CVzpH: throw new \InvalidArgumentException("\x4e\157\40\144\141\x74\x61\x62\141\x73\x65\40\x73\145\154\x65\x63\x74\x65\x64"); goto vONPq; R2UrN: vXTj5: goto VsRgO; LB3QH: return self::$connections[static::$current_id_conn]; goto ltzRF; AETx2: if (!empty(config()["\144\142\137\x63\x6f\x6e\x6e\145\x63\164\151\157\156\137\x64\x65\146\141\165\154\164"])) { goto rc0x1; } goto CVzpH; vONPq: goto PQ80B; goto ZbX_B; UaCwL: return self::$connections[static::$current_id_conn]; goto mgPXB; eT7fY: $uxMnj = config()["\144\142\137\x63\x6f\x6e\156\x65\143\x74\151\x6f\x6e\163"][static::$current_id_conn]["\160\x61\163\163"] ?? ''; goto mP1gH; HjOyM: if (!isset(self::$connections[static::$current_id_conn])) { goto LaQOA; } goto LB3QH; zhXNN: static::$current_id_conn = array_keys(config()["\144\142\x5f\x63\x6f\x6e\156\x65\x63\x74\151\x6f\156\x73"])[0]; goto F2xYw; IwJAO: $FMoe6 = count(config()["\144\142\x5f\143\x6f\x6e\156\x65\143\164\151\157\x6e\x73"]); goto iUZI_; z4cww: if (isset(config()["\144\x62\x5f\x63\x6f\156\x6e\145\x63\x74\151\x6f\x6e\163"][static::$current_id_conn])) { goto D7KwY; } goto e38pr; dKmBi: if (!($d7qD3 == "\155\141\162\151\141\x64\x62")) { goto gHEL0; } goto cklTo; iL2bh: FHzvc: goto o5MOd; A2IBL: BoJn6: goto qaf3N; ZbX_B: ta_5T: goto zhXNN; onbP4: $d7qD3 = "\160\147\163\161\154"; goto B5rnn; flsEg: uQf3b: goto s_cNk; z2o_Q: rc0x1: goto tI2y3; itz3K: Vt0r0: goto HjOyM; pWX8z: $w_1qA = config()["\144\x62\137\x63\157\x6e\x6e\145\143\x74\151\157\156\163"][static::$current_id_conn]["\165\x73\145\162"] ?? "\162\157\x6f\x74"; goto eT7fY; XYq3K: $d7qD3 = "\155\163\x73\161\154"; goto A2IBL; uKVIp: if (!($d7qD3 == "\x73\x71\154\x73\x72\x76")) { goto BoJn6; } goto XYq3K; mAWlf: $d7qD3 = config()["\x64\142\x5f\x63\157\x6e\156\x65\x63\x74\x69\x6f\x6e\x73"][static::$current_id_conn]["\x64\x72\x69\x76\145\x72"]; goto MwH4q; cklTo: $d7qD3 = "\155\171\x73\161\x6c"; goto orNi2; mgPXB: } static function getDefaultConnectionId() { return config()["\144\x62\x5f\x63\x6f\x6e\x6e\x65\143\x74\x69\157\156\137\144\x65\146\141\165\154\x74"]; } static function getDefaultConnection() { return self::getConnection(config()["\x64\x62\137\143\x6f\156\156\145\x63\x74\151\x6f\156\x5f\144\x65\x66\x61\x75\x6c\164"]); } static function closeConnection(string $iDJ5X = null) { goto jOn1Y; chUpv: goto MAaWd; goto kDm79; kDm79: ut0Q0: goto D2s7s; D2s7s: unset(static::$connections[static::$current_id_conn]); goto P8YiM; Q0j6Z: static::$connections[$iDJ5X] = null; goto chUpv; cNjfL: MAaWd: goto JesVM; jOn1Y: if ($iDJ5X == null) { goto ut0Q0; } goto Q0j6Z; P8YiM: static::$current_id_conn = NULL; goto cNjfL; JesVM: } static function getConnectionConfig() { return config()["\x64\142\x5f\143\x6f\x6e\156\x65\143\x74\151\x6f\x6e\x73"]; } static function closeAllConnections() { static::$connections = null; } public function __destruct() { static::closeAllConnections(); } static function countConnections() { return count(static::$connections ?? []); } public static function getAllConnectionIds() { return array_keys(config()["\144\142\x5f\x63\x6f\x6e\156\x65\143\x74\151\x6f\x6e\163"]); } public static function getConnectionIds() { return static::getAllConnectionIds(); } public static function getCurrentConnectionId(bool $zHZmJ = false) { goto IsAXn; EvKWp: AlCfE: goto xO5Zm; kvvcz: DB::getConnection(); goto EvKWp; xO5Zm: return static::$current_id_conn; goto Ifv13; IsAXn: if (!($zHZmJ && !static::$current_id_conn)) { goto AlCfE; } goto kvvcz; Ifv13: } public static function getCurrent() { goto sl1q6; c_Iuh: gDeoP: goto bWZcl; HQwbl: return null; goto c_Iuh; bWZcl: return config()["\x64\x62\137\x63\157\x6e\156\145\143\164\151\x6f\156\163"][static::$current_id_conn]; goto USVQe; sl1q6: if (!(static::$current_id_conn === null)) { goto gDeoP; } goto HQwbl; USVQe: } public static function database() { goto oAF1w; tGkxc: if (!($PpfFO === null)) { goto Z_XDJ; } goto WmB8L; oAF1w: $PpfFO = self::getCurrent(); goto tGkxc; pdrc6: Z_XDJ: goto vF_H9; WmB8L: return null; goto pdrc6; vF_H9: return self::getCurrent()["\x64\x62\137\156\141\155\x65"]; goto iVfnn; iVfnn: } public static function getCurrentDB() { return self::database(); } public static function getTableName() { return static::$tb_name; } public static function getAllTenantRepresentants(array $BH5Gm = []) { goto bS1zi; bS1zi: $oLXxD = DB::getDatabasesGroupedByTenantGroup(true); goto o6Z9o; V8tTl: foreach ($oLXxD as $i4eDT => $HTD8s) { goto AGFNt; GlpNH: if (!isset($BH5Gm[$i4eDT])) { goto keOa2; } goto xlqlO; joCrE: $EoRTh[] = $ArfUf; goto CsrMg; AGFNt: $ArfUf = $HTD8s[0]; goto h0mah; CsrMg: hgf97: goto kW74U; xlqlO: $ArfUf = $BH5Gm[$i4eDT]; goto FH7nx; FH7nx: keOa2: goto vf_c6; h0mah: if (!(isset($BH5Gm) && !empty($BH5Gm))) { goto BiipG; } goto GlpNH; vf_c6: BiipG: goto joCrE; kW74U: } goto C3UzM; o6Z9o: $EoRTh = []; goto V8tTl; C3UzM: GDBy5: goto aEOP_; aEOP_: return $EoRTh; goto jgGSi; jgGSi: } public static function driver() { return self::getCurrent()["\x64\162\151\x76\145\x72"] ?? NULL; } public static function driverVersion(bool $XEwzy = false) { goto Aa3pI; WFtXV: return Strings::matchOrFail($lT8K0, "\x2f\136\x28\x5b\136\55\x5d\x2b\x29\57"); goto rWf3O; xnF3u: return $lT8K0; goto DYJr3; Aa3pI: $yJSr9 = self::$connections[static::$current_id_conn] ?? null; goto KgPo2; rWf3O: XMr3t: goto xnF3u; HNfE8: return false; goto xfQgP; KgPo2: if (!($yJSr9 === null)) { goto SWXOg; } goto HNfE8; xbyTV: $lT8K0 = $yJSr9->getAttribute(\PDO::ATTR_SERVER_VERSION); goto ua797; xfQgP: SWXOg: goto xbyTV; ua797: if (!$XEwzy) { goto XMr3t; } goto WFtXV; DYJr3: } public static function isMariaDB() { goto Q_Bhy; h4oq5: return $DkIUt[$iDJ5X]; goto YIdFF; J2C3g: if (!isset($DkIUt[$iDJ5X])) { goto JKzPO; } goto LJVZ2; LJVZ2: return $DkIUt[$iDJ5X]; goto VibfQ; xXiAU: $DkIUt[$iDJ5X] = Strings::contains("\x4d\141\x72\151\x61\x44\102", $lT8K0); goto h4oq5; Q_Bhy: static $DkIUt; goto QPjf2; M2U2j: $DkIUt = []; goto xXiAU; QPjf2: $iDJ5X = self::getCurrentConnectionId(); goto J2C3g; tapOF: $lT8K0 = self::driverVersion(); goto M2U2j; VibfQ: JKzPO: goto tapOF; YIdFF: } public static function schema() { return self::getCurrent()["\x73\x63\150\145\155\141"] ?? NULL; } static function getTenantGroupNames() : array { goto sDlK_; XR5Jk: iNujU: goto mADEC; mADEC: return array_keys(config()["\x74\x65\x6e\x74\141\x6e\x74\x5f\147\162\x6f\x75\160\163"]); goto cJyOb; sDlK_: if (isset(config()["\x74\145\156\164\141\156\164\x5f\147\x72\157\165\160\x73"])) { goto iNujU; } goto JtFjR; JtFjR: throw new \Exception("\x46\151\x6c\145\x20\143\x6f\156\146\151\147\56\x70\150\x70\40\151\x73\x20\157\165\164\144\x61\x74\145\144\x2e\40\x4c\x61\x63\x6b\x73\40\x27\164\145\156\x74\x61\156\164\137\147\x72\157\x75\x70\163\x27\x20\x73\x65\143\x74\x69\157\x6e"); goto XR5Jk; cJyOb: } static function getTenantGroupName(string $Jcugm) : ?string { goto AiHrX; JM3Wg: foreach (config()["\164\x65\x6e\164\x61\156\164\x5f\147\x72\x6f\x75\x70\163"] as $i4eDT => $OBkRb) { goto EVYY4; tyV2o: ldQbe: goto jTNCN; o8bU2: jhwrz: goto tyV2o; EVYY4: foreach ($OBkRb as $pb6_V) { goto GQv3l; EFw4g: return $VTaH8[$Jcugm]; goto OY26n; QuMCf: $VTaH8[$Jcugm] = $i4eDT; goto EFw4g; GQv3l: if (!preg_match("\57{$pb6_V}\x2f", $Jcugm)) { goto Q0bnd; } goto QuMCf; OY26n: Q0bnd: goto Np2Tl; Np2Tl: Hma8s: goto ZSNm4; ZSNm4: } goto o8bU2; jTNCN: } goto kQ_S6; AiHrX: static $VTaH8; goto p1TCZ; HouPC: if (!in_array($Jcugm, $VTaH8)) { goto VYr8d; } goto d4CyO; OUuQu: return $VTaH8[$Jcugm]; goto WqvvR; cDe7d: $VTaH8[$Jcugm] = false; goto OUuQu; oDGYG: $VTaH8 = []; goto xO8as; sQJYf: VYr8d: goto TOxyh; TOxyh: if (isset(config()["\x74\145\156\x74\x61\156\164\137\x67\x72\157\x75\160\x73"])) { goto xqXdn; } goto Yg23p; JYQkd: xqXdn: goto JM3Wg; p1TCZ: if (!is_null($VTaH8)) { goto FW5WQ; } goto oDGYG; d4CyO: return $VTaH8[$Jcugm]; goto sQJYf; Yg23p: throw new \Exception("\x46\x69\x6c\x65\x20\x63\x6f\x6e\146\151\147\x2e\x70\150\160\40\151\163\40\157\165\164\x64\x61\164\x65\x64\56\40\114\141\143\153\163\x20\47\164\145\x6e\164\x61\156\164\x5f\147\162\x6f\165\160\x73\x27\x20\x73\145\143\x74\151\x6f\156"); goto JYQkd; kQ_S6: B2_AK: goto cDe7d; xO8as: FW5WQ: goto HouPC; WqvvR: } static function getGroupedDatabases(bool $wKZGk = false) { goto xqJPz; Qup9J: return $jYwgD; goto fOLSi; dFnxK: if (!$wKZGk) { goto MBV_s; } goto mHlN0; xVdHx: MBV_s: goto Qup9J; GQdjs: foreach ($u2MZz as $VY5s6) { goto O8Vkg; ilTgu: goto mJtm_; goto yMitu; tFpSA: if ($yYXa8) { goto YaKfL; } goto ilTgu; CHkb0: if (isset($jYwgD[$yYXa8])) { goto TZoof; } goto FVBGJ; FVBGJ: $jYwgD[$yYXa8] = []; goto D79dh; j6CK0: $jYwgD[$yYXa8][] = $VY5s6; goto UvKpY; O8Vkg: $yYXa8 = DB::getTenantGroupName($VY5s6); goto tFpSA; yMitu: YaKfL: goto CHkb0; D79dh: TZoof: goto j6CK0; UvKpY: mJtm_: goto mOrpJ; mOrpJ: } goto smnrl; gd6Ab: $u2MZz = Schema::getDatabases(); goto GQdjs; smnrl: YuM1G: goto dFnxK; mHlN0: $zH4E7 = get_default_connection_id(); goto n0pSb; xqJPz: $jYwgD = []; goto gd6Ab; n0pSb: $jYwgD[$zH4E7] = [$zH4E7]; goto xVdHx; fOLSi: } static function getDatabasesGroupedByTenantGroup(bool $wKZGk = false) { return static::getGroupedDatabases($wKZGk); } static function getUngroupedDatabases(bool $GRSoq = true) { goto tvtse; QwY8f: $rFxKO = array_diff($rFxKO, [get_default_connection_id()]); goto zn8EB; zn8EB: h2yMG: goto C1Bzq; C1Bzq: return $rFxKO; goto H1Ari; tvtse: $OM4B3 = DB::getAllConnectionIds(); goto rSmWq; XDOEO: if (!$GRSoq) { goto h2yMG; } goto QwY8f; COrrW: $YK5ir = []; goto Dz4K_; Dz4K_: foreach ($oLXxD as $i21RI => $ZKaOL) { goto x0YfC; dFxoV: SCd2m: goto AGlkn; AGlkn: LIIH7: goto Tq0LT; x0YfC: foreach ($ZKaOL as $YWIgK) { $YK5ir[] = $YWIgK; FGUlS: } goto dFxoV; Tq0LT: } goto rQpdT; gIPNj: $rFxKO = array_diff($OM4B3, $YK5ir); goto XDOEO; rQpdT: C5UMS: goto gIPNj; rSmWq: $oLXxD = DB::getGroupedDatabases(); goto COrrW; H1Ari: } public static function setModelInstance(object $SEWII) { static::$model_instance = $SEWII; } public static function setRawSql(string $uZHcT) { static::$raw_sql = $uZHcT; } public static function getRawSql() { return static::$raw_sql; } public static function getLog() { goto iGqv2; J2PR0: return $uZHcT; goto NOVL9; p9OpQ: $uZHcT = Arrays::str_replace_array("\77", static::$values, static::$raw_sql); goto rgxBF; NOVL9: GeU2d: goto yPRY0; Cw6zP: return static::$model_instance->getLog(); goto ytshN; yPRY0: if (!(static::$model_instance != NULL)) { goto qYZ2I; } goto Cw6zP; iGqv2: if (is_null(static::$raw_sql)) { goto GeU2d; } goto p9OpQ; ytshN: qYZ2I: goto t83dg; rgxBF: $uZHcT = trim(preg_replace("\41\134\x73\53\41", "\40", $uZHcT)) . "\73"; goto J2PR0; t83dg: } static function disableAutoCommit() { static::getConnection()->setAttribute(\PDO::ATTR_AUTOCOMMIT, false); } static function enableAutoCommit() { static::getConnection()->setAttribute(\PDO::ATTR_AUTOCOMMIT, true); } public static function table($MICry, $QSFmL = NULL, bool $dZ2tn = true) { goto poeUz; pZj7j: fvUbu: goto yz7vX; HiH0r: static::$model_instance = new Model($dZ2tn); goto FFaLa; DzMbu: jv7rK: goto HiH0r; alSpp: return $uaY8s; goto I1BSq; rRPHF: static::$tb_name = static::$model_instance->getTableName(); goto X8KdQ; S2Vbr: if (!($QSFmL != null)) { goto fvUbu; } goto wg1mk; F3kSk: $uaY8s = static::$model_instance->fromRaw($MICry); goto alSpp; QihQ5: $LbUlj = get_model_name($MICry); goto GxICA; FFaLa: static::$tb_name = static::$model_instance->getTableName(); goto F3kSk; wg1mk: $pKo3B->setTableAlias($QSFmL); goto pZj7j; GxICA: $pKo3B = new $LbUlj($dZ2tn); goto S2Vbr; poeUz: if (Strings::contains("\40\x46\122\x4f\x4d\40", $MICry)) { goto jv7rK; } goto zRLXB; zRLXB: $SEWII = Strings::camelToSnake($MICry); goto QihQ5; X8KdQ: return $pKo3B; goto DzMbu; yz7vX: static::$model_instance = $pKo3B; goto rRPHF; I1BSq: } public static function beginTransaction() { goto aSPOJ; jABOF: static::$inited_transaction = true; goto LDohn; UFNRr: bAcG1: goto MQScx; aSPOJ: if (!static::$inited_transaction) { goto bAcG1; } goto cpAVm; MQScx: static::getConnection()->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION); goto ZBpu0; ZBpu0: static::getConnection()->beginTransaction(); goto jABOF; cpAVm: return; goto UFNRr; LDohn: } public static function commit() { goto t_Si8; rJk8j: static::getConnection()->commit(); goto A63zd; UUcoM: Q8qBt: goto rJk8j; t_Si8: if (static::$inited_transaction) { goto Q8qBt; } goto f6oDi; A63zd: static::$inited_transaction = false; goto NNx6A; f6oDi: return; goto UUcoM; NNx6A: } public static function rollback() { goto lrurc; lrurc: if (static::$inited_transaction) { goto au31f; } goto yN30l; wkiQT: static::$inited_transaction = false; goto bADvx; yN30l: return; goto QG6kO; FPtK4: static::getConnection()->rollback(); goto wkiQT; QG6kO: au31f: goto FPtK4; bADvx: } public static function transaction(\Closure $hkC0I) { goto ROeoR; Oxxpj: return $xxYNh; goto GM5Bt; ROeoR: if (!static::$inited_transaction) { goto J3HE0; } goto lwGFf; a5rXw: J3HE0: goto fNAFX; R9WhG: try { $xxYNh = $hkC0I(); static::commit(); } catch (\Exception $alz2W) { static::rollBack(); throw $alz2W; } goto Oxxpj; lwGFf: return; goto a5rXw; fNAFX: static::beginTransaction(); goto R9WhG; GM5Bt: } public static function select(string $V3YVg, ?array $PJ1Xr = null, $EKYHd = "\x41\x53\123\x4f\x43", ?string $Jcugm = null) { goto NlvhN; TXWvK: $PJ1Xr = $SnGZ1; goto T_oc5; x7aTm: kCZlZ: goto wCBqB; T_oc5: K1uP1: goto SIwUy; Mu2SR: t0nzt: goto TXWvK; Nmw3E: $yJSr9 = DB::getConnection($Jcugm); goto IhhMv; PGKmv: return $xxYNh; goto UUJpx; vdUS5: foreach ($PJ1Xr as $lYE47 => $V6Md3) { goto vc5Qv; QCLzA: $XP73l++; goto PRdip; gi_hy: Aknob: goto tRPEO; UGGXy: $Gg6Yz = Strings::replaceNth("\x3f", "\x4e\125\x4c\x4c", $Gg6Yz, $lYE47 + 1 - $XP73l); goto QCLzA; Z2qxz: if (DB::driver() == "\160\147\x73\x71\154" && is_float($V6Md3)) { goto Aknob; } goto ZwcxY; vc5Qv: if ($V6Md3 === NULL) { goto j1rFU; } goto Z2qxz; ZwcxY: $SnGZ1[] = $V6Md3; goto qpCTK; tE9qY: $XP73l++; goto ZPq_L; tRPEO: $Gg6Yz = Strings::replaceNth("\77", "\x43\x41\123\124\x28\77\x20\x41\123\40\104\117\125\x42\x4c\x45\x20\x50\122\105\x43\111\123\x49\x4f\x4e\x29", $Gg6Yz, $lYE47 + 1 - $XP73l); goto tE9qY; GiNC3: r3AJv: goto JAvTK; PRdip: goto r3AJv; goto gi_hy; qpCTK: goto r3AJv; goto iomi1; JAvTK: I1zCp: goto sNPeJ; iomi1: j1rFU: goto UGGXy; ZPq_L: $SnGZ1[] = $V6Md3; goto GiNC3; sNPeJ: } goto Mu2SR; DZOEO: $SnGZ1 = []; goto vHZ5V; kaguK: $EKYHd = "\x41\x53\x53\117\103"; goto QWpsz; SIwUy: $misGA = DB::getCurrentConnectionId(); goto Nmw3E; dsQCq: if (!empty($EKYHd)) { goto NrDYd; } goto kaguK; NlvhN: if (!($PJ1Xr === null)) { goto kCZlZ; } goto HhMzy; IhhMv: try { goto KMNa6; dT8kz: $ezzHQ = constant("\x5c\120\104\x4f\72\x3a\106\x45\x54\103\110\x5f{$EKYHd}"); goto etvWx; etvWx: $xxYNh = $uaY8s->fetchAll($ezzHQ); goto QtO8w; m0Yh2: C246B: goto hnpvb; c0ykC: foreach ($PJ1Xr as $lYE47 => $V6Md3) { goto AnVaA; Xu5hh: $uaY8s->bindValue($lYE47 + 1, $V6Md3, $ao_1G); goto rZc2n; lPRiR: mypE7: goto odDWz; T0_82: goto lfCPr; goto Mo1Mi; OeCzW: if (is_array($V6Md3)) { goto hebdV; } goto Vp_sI; Mo1Mi: BiG9g: goto Mi8Nw; An8Nu: lfCPr: goto Xu5hh; Chcp0: $ao_1G = \PDO::PARAM_BOOL; goto T0_82; WVZgV: nQ66r: goto SgWPq; UNo6e: $ao_1G = \PDO::PARAM_NULL; goto stx1t; KU4dR: if (is_int($V6Md3)) { goto oTeVw; } goto W_0GR; hw7gJ: goto Spvh8; goto m0bq9; Vp_sI: var_dump($V6Md3); goto SegId; DpXS4: goto lfCPr; goto lPRiR; EtKz0: goto lfCPr; goto Ie5OM; rZc2n: I8S7N: goto dp5Ef; W_0GR: if (is_bool($V6Md3)) { goto rq1RE; } goto Wjx_c; m0bq9: vEGep: goto MD_5W; plVcX: oTeVw: goto A9R3M; stx1t: goto lfCPr; goto plVcX; m0P96: if (is_float($V6Md3)) { goto nQ66r; } goto yYqua; mbz6X: rq1RE: goto Chcp0; Ie5OM: hebdV: goto JHkB4; Mi8Nw: if (mb_strlen($V6Md3) < 4000) { goto vEGep; } goto GRWP9; GRWP9: $ao_1G = \PDO::PARAM_LOB; goto hw7gJ; r_Nkf: goto lfCPr; goto FdF6W; odDWz: $ao_1G = \PDO::PARAM_LOB; goto EtKz0; AnVaA: if (is_null($V6Md3)) { goto dCbAE; } goto KU4dR; MD_5W: $ao_1G = \PDO::PARAM_STR; goto cILH4; SgWPq: $ao_1G = \PDO::PARAM_STR; goto DpXS4; yYqua: if (is_resource($V6Md3)) { goto mypE7; } goto OeCzW; rGmzt: goto lfCPr; goto mbz6X; Wjx_c: if (is_string($V6Md3)) { goto BiG9g; } goto m0P96; SegId: throw new \Exception("\x55\156\x73\x75\160\160\x6f\x72\x74\145\x64\40\164\x79\x70\145"); goto r_Nkf; FdF6W: dCbAE: goto UNo6e; T3K9m: goto lfCPr; goto WVZgV; cILH4: Spvh8: goto T3K9m; A9R3M: $ao_1G = \PDO::PARAM_INT; goto rGmzt; JHkB4: throw new \Exception("\167\150\x65\162\145\x20\166\141\154\165\x65\40\x63\x61\x6e\40\x6e\157\164\40\x62\145\x20\141\x6e\x20\141\162\x72\141\171\41"); goto An8Nu; dp5Ef: } goto m0Yh2; KMNa6: $uaY8s = $yJSr9->prepare($Gg6Yz); goto c0ykC; hnpvb: $uaY8s->execute(); goto dT8kz; QtO8w: } finally { if (empty($misGA)) { goto uLZEN; } DB::setConnection($misGA); uLZEN: } goto PGKmv; GOQfT: static::$values = $PJ1Xr; goto dsQCq; wCBqB: static::$raw_sql = $Gg6Yz = $V3YVg; goto GOQfT; utnaY: if (empty($PJ1Xr)) { goto K1uP1; } goto DZOEO; HhMzy: $PJ1Xr = []; goto x7aTm; vHZ5V: $XP73l = 0; goto vdUS5; QWpsz: NrDYd: goto utnaY; UUJpx: } public static function insert(string $V3YVg, array $PJ1Xr = [], ?string $Jcugm = null) { goto Xsr6B; xJNkc: $misGA = DB::getCurrentConnectionId(); goto k5A3E; Xsr6B: static::$raw_sql = $Gg6Yz = $V3YVg; goto T3wPD; k5A3E: $yJSr9 = DB::getConnection($Jcugm); goto N6Ue4; T3wPD: static::$values = $PJ1Xr; goto F9e6U; F9e6U: $Gg6Yz = $V3YVg; goto xJNkc; N6Ue4: try { goto y7uCS; pmrZq: $EYLCK = null; goto W1Nta; BKN_Y: aZf8b: goto m4X2u; UnufE: $AXlA0 = Strings::match($V3YVg, "\57\151\x6e\163\145\x72\x74\133\40\x5d\53\x28\151\147\x6e\157\162\145\133\40\x5d\53\51\x3f\151\156\x74\157\x5b\x20\135\x2b\133\x60\x5d\x3f\50\133\141\55\172\x5f\135\x2b\x5b\141\55\x7a\60\55\71\135\x3f\51\133\140\135\77\40\57\151", 2); goto BEXig; dcfIz: wQfdN: goto MQtUL; wAheY: $FtgLP = false; goto dNgkk; ryrK4: if ($xxYNh) { goto aZf8b; } goto wAheY; g_0Tk: vwqo9: goto UnufE; sIU5U: arCUa: goto vec7v; BEXig: if (!empty($AXlA0)) { goto arCUa; } goto pmrZq; UE310: $FtgLP = $muySU[$RpTQp]; goto utqhh; m4X2u: $RpTQp = $EYLCK != NULL ? $EYLCK["\x69\144\137\x6e\141\155\145"] : "\151\144"; goto wZ6qF; dNgkk: goto i0yge; goto BKN_Y; tASxY: K9gr1: goto UE310; AJiUo: if (isset($xxYNh)) { goto vwqo9; } goto DF2sp; wZ6qF: if (isset($muySU[$RpTQp])) { goto K9gr1; } goto YjCxD; IWJuP: Zm9U0: goto wt4jq; npHyj: EYqfI: goto ryrK4; y7uCS: $uaY8s = $yJSr9->prepare($Gg6Yz); goto UoRzF; UoRzF: if (!is_null($PJ1Xr)) { goto Zm9U0; } goto pYKsS; YjCxD: $FtgLP = $yJSr9->lastInsertId(); goto wdZH0; CzG2O: i0yge: goto k6jGi; utqhh: xB1v2: goto CzG2O; vec7v: $EYLCK = get_schema($AXlA0); goto npHyj; W1Nta: goto EYqfI; goto sIU5U; wt4jq: foreach ($PJ1Xr as $lYE47 => $V6Md3) { goto x9fEV; tjmbv: $ao_1G = \PDO::PARAM_LOB; goto VSEDS; mG3tt: AwY0a: goto O66aR; cW9VZ: goto IMF6G; goto ssZn6; zxdNj: c_E_t: goto gi4vr; MBy6s: var_dump($V6Md3); goto zhjTd; FuxNV: goto IMF6G; goto zxdNj; Oy0o3: IMF6G: goto REmhP; IjYul: $ao_1G = \PDO::PARAM_LOB; goto fuBFi; qaDRH: if (is_float($V6Md3)) { goto lo2do; } goto Mf8Mw; ie_tb: if (is_string($V6Md3)) { goto wmN_u; } goto qaDRH; s1i0S: tUkvE: goto sMM0P; r8dGw: lo2do: goto ATRf_; sMM0P: $ao_1G = \PDO::PARAM_STR; goto FlGlb; iWlPa: goto IMF6G; goto r8dGw; zhjTd: throw new \Exception("\125\x6e\x73\165\160\x70\157\x72\164\145\x64\x20\x74\x79\160\x65"); goto cW9VZ; ssZn6: NPtk6: goto feaVy; gPStz: goto IMF6G; goto yaDJM; yaDJM: WMUr9: goto IjYul; uBZO6: goto IMF6G; goto Ov9oB; O66aR: throw new \Exception("\x77\x68\145\x72\145\x20\x76\x61\x6c\x75\x65\40\x63\141\x6e\x20\156\157\164\x20\x62\x65\40\141\156\40\x61\x72\x72\x61\x79\41"); goto Oy0o3; Mf8Mw: if (is_resource($V6Md3)) { goto WMUr9; } goto ar3lV; ATRf_: $ao_1G = \PDO::PARAM_STR; goto gPStz; Ov9oB: fyxAg: goto jcpR3; fuBFi: goto IMF6G; goto mG3tt; d_jtF: if (is_bool($V6Md3)) { goto fyxAg; } goto ie_tb; jcpR3: $ao_1G = \PDO::PARAM_BOOL; goto SuGjt; gi4vr: $ao_1G = \PDO::PARAM_INT; goto uBZO6; REmhP: $uaY8s->bindValue($lYE47 + 1, $V6Md3, $ao_1G); goto CJ1Cl; FmQoK: if (mb_strlen($V6Md3) < 4000) { goto tUkvE; } goto tjmbv; VSEDS: goto ueWDw; goto s1i0S; CJ1Cl: L0BRE: goto xvdrV; feaVy: $ao_1G = \PDO::PARAM_NULL; goto FuxNV; x9fEV: if (is_null($V6Md3)) { goto NPtk6; } goto resCK; xsxDe: wmN_u: goto FmQoK; ar3lV: if (is_array($V6Md3)) { goto AwY0a; } goto MBy6s; resCK: if (is_int($V6Md3)) { goto c_E_t; } goto d_jtF; SuGjt: goto IMF6G; goto xsxDe; FlGlb: ueWDw: goto iWlPa; xvdrV: } goto dcfIz; wdZH0: goto xB1v2; goto tASxY; MQtUL: $xxYNh = $uaY8s->execute(); goto AJiUo; pYKsS: $PJ1Xr = []; goto IWJuP; DF2sp: return; goto g_0Tk; k6jGi: } finally { if (!empty(!$misGA)) { goto YdJ07; } DB::setConnection($misGA); YdJ07: } goto c7hcS; c7hcS: return $FtgLP; goto EUABT; EUABT: } public static function statement(string $V3YVg, array $PJ1Xr = [], ?string $Jcugm = null) { goto QCypI; oWH_y: try { goto mIcO8; mIcO8: $uaY8s = $yJSr9->prepare($Gg6Yz); goto BIIEN; rXbNb: foluS: goto ikxFp; bp2Sl: $PJ1Xr = []; goto qYYid; qYYid: BVrw5: goto nh4OW; hHB7m: COY84: goto Rx0f6; nh4OW: foreach ($PJ1Xr as $lYE47 => $V6Md3) { goto dGusk; ISrh6: lLpmK: goto lBKfv; Xh3zg: $ao_1G = \PDO::PARAM_LOB; goto IzpZs; IJmWX: $ao_1G = \PDO::PARAM_STR; goto b6iuf; GOnAj: $uaY8s->bindValue($lYE47 + 1, $V6Md3, $ao_1G); goto dKNjK; QQAdn: $ao_1G = \PDO::PARAM_BOOL; goto cTYvw; IzpZs: goto P4jgY; goto i5MkQ; qO3YD: if (is_resource($V6Md3)) { goto ANffL; } goto BkNEz; qcTho: goto DP0e7; goto oa6ZX; SETj2: goto DP0e7; goto bL0c5; VZBzi: AhsjB: goto WSTnJ; ym6qf: var_dump($V6Md3); goto Y9ItY; oa6ZX: lZtOZ: goto jvtl1; nafYT: ANffL: goto Q9Zti; LKXl8: goto DP0e7; goto ISrh6; jvtl1: $ao_1G = \PDO::PARAM_STR; goto UVP1G; i5MkQ: LQ6rv: goto IJmWX; YhHgt: DP0e7: goto GOnAj; BkNEz: if (is_array($V6Md3)) { goto lLpmK; } goto ym6qf; UVP1G: goto DP0e7; goto nafYT; Y9ItY: throw new \Exception("\125\x6e\x73\x75\160\x70\x6f\x72\164\x65\144\x20\x74\171\x70\145"); goto SETj2; qJMrb: if (is_int($V6Md3)) { goto AhsjB; } goto Ss16q; Ss16q: if (is_bool($V6Md3)) { goto bAADU; } goto eHSgG; lBKfv: throw new \Exception("\x77\150\145\x72\x65\40\x76\141\x6c\x75\145\x20\143\141\x6e\40\x6e\157\164\x20\x62\x65\x20\x61\156\40\x61\x72\x72\141\171\41"); goto YhHgt; hMNk_: C8fNE: goto B39v5; bL0c5: oDqt_: goto Re7dh; eHSgG: if (is_string($V6Md3)) { goto C8fNE; } goto fJ5Lz; fJ5Lz: if (is_float($V6Md3)) { goto lZtOZ; } goto qO3YD; UiO1u: bAADU: goto QQAdn; Q9Zti: $ao_1G = \PDO::PARAM_LOB; goto LKXl8; dGusk: if (is_null($V6Md3)) { goto oDqt_; } goto qJMrb; dKNjK: d00dA: goto YjLbi; WSTnJ: $ao_1G = \PDO::PARAM_INT; goto LCpi2; LCpi2: goto DP0e7; goto UiO1u; zyz6m: goto DP0e7; goto VZBzi; cTYvw: goto DP0e7; goto hMNk_; Re7dh: $ao_1G = \PDO::PARAM_NULL; goto zyz6m; b6iuf: P4jgY: goto qcTho; B39v5: if (mb_strlen($V6Md3) < 4000) { goto LQ6rv; } goto Xh3zg; YjLbi: } goto rXbNb; ikxFp: if ($uaY8s->execute()) { goto COY84; } goto mKnTH; Rx0f6: $MCV2T = $uaY8s->rowCount(); goto FWc8W; FWc8W: LGoSU: goto tQARs; BIIEN: if (!is_null($PJ1Xr)) { goto BVrw5; } goto bp2Sl; mKnTH: $MCV2T = false; goto S_s_q; S_s_q: goto LGoSU; goto hHB7m; tQARs: } finally { if (empty($misGA)) { goto G9hJ2; } DB::setConnection($misGA); G9hJ2: } goto pSpJT; beACo: static::$values = $PJ1Xr; goto Pwl48; S7IKB: $misGA = DB::getCurrentConnectionId(); goto Ai1yk; Ai1yk: $yJSr9 = DB::getConnection($Jcugm); goto oWH_y; Pwl48: $Gg6Yz = $V3YVg; goto S7IKB; pSpJT: return $MCV2T; goto MfbC3; QCypI: static::$raw_sql = $Gg6Yz = $V3YVg; goto beACo; MfbC3: } public static function update(string $V3YVg, array $PJ1Xr = [], ?string $Jcugm = null) { return static::statement($V3YVg, $PJ1Xr, $Jcugm); } public static function delete(string $V3YVg, array $PJ1Xr = [], ?string $Jcugm = null) { return static::statement($V3YVg, $PJ1Xr, $Jcugm); } public static function disableForeignKeyConstraints() { return Schema::disableForeignKeyConstraints(); } public static function enableForeignKeyConstraints() { return Schema::enableForeignKeyConstraints(); } }
