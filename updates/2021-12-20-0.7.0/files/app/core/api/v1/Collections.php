<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.13  |
    |              on 2022-01-15 18:27:55              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace simplerest\core\api\v1; use simplerest\controllers\MyApiController; use simplerest\core\libs\Factory; use simplerest\core\Acl; use simplerest\core\libs\Strings; use simplerest\core\libs\DB; use simplerest\libs\Debug; use simplerest\core\libs\Validator; use simplerest\core\exceptions\InvalidValidationException; use simplerest\core\libs\Url; class Collections extends MyApiController { protected $forbidden_tables = array("\146\157\154\144\x65\162\137\157\x74\x68\x65\162\137\x70\x65\162\x6d\x69\x73\x73\x69\x6f\x6e\163", "\146\157\x6c\x64\x65\162\x5f\x70\x65\162\x6d\x69\x73\163\151\x6f\x6e\163", "\146\157\154\x64\145\x72\x73", "\x72\x6f\x6c\145\x73", "\165\x73\145\162\137\x72\157\154\145\163", "\x73\x70\x5f\160\145\x72\x6d\151\x73\163\x69\x6f\156\163", "\x75\163\x65\162\137\163\x70\x5f\x70\145\x72\x6d\x69\163\163\x69\x6f\156\x73", "\165\163\x65\x72\x5f\164\142\x5f\160\145\162\x6d\151\x73\x73\151\x6f\x6e\163"); function __construct() { goto q30Yc; oeFjJ: if (!(Factory::request()->authMethod() !== NULL)) { goto Z9bii; } goto dStE0; q30Yc: $this->forbidden_tables[] = $this->users_table; goto oeFjJ; xS8YG: Z9bii: goto UUU3D; UUU3D: parent::__construct(); goto dwYQm; cJI3R: $this->is_listable = true; goto wR6Mi; wR6Mi: $this->is_retrievable = true; goto xS8YG; dStE0: $this->callable = ["\x67\x65\x74", "\160\157\163\164", "\160\165\x74", "\160\x61\x74\143\x68", "\x64\145\154\x65\x74\x65"]; goto cJI3R; dwYQm: } function post() { goto Z3aLa; kRoUY: Factory::response()->sendError("\120\141\162\141\155\145\164\145\162\x20\162\x65\x66\x73\x20\151\163\x20\x72\x65\161\x75\151\162\x65\144", 400); goto ubFm0; TpMc3: XXA86: goto QSe1N; qk8ax: if (!in_array(strtolower($BgRX2), $this->forbidden_tables)) { goto LU2SW; } goto ogdpe; ogdpe: Factory::response()->sendError("\x46\157\162\142\151\144\144\145\x6e", 403, "\x54\x61\142\154\145\x20\x27" . $BgRX2 . "\47\x20\x69\x73\x20\x6e\157\x74\40\x61\166\x61\x69\154\141\x62\154\x65\x20\x66\157\x72\40\143\157\x6c\x6c\x65\143\x74\x69\157\156\163"); goto A3oy_; Z3aLa: $VriIQ = Factory::request()->getBody(false); goto u4nzN; U9N4H: Factory::response()->sendError("\x50\x61\162\141\155\x65\x74\145\x72\40\145\x6e\x74\x69\164\x79\40\151\x73\40\x72\145\x71\x75\151\162\x65\x64", 400); goto RsRn1; iOgIY: if (!empty($VriIQ["\x72\145\x66\163"])) { goto rtbjA; } goto kRoUY; uZT3N: $P19iw = $VriIQ["\162\x65\146\x73"]; goto qk8ax; RsRn1: dUVHJ: goto iOgIY; u4nzN: if (!empty($VriIQ)) { goto XXA86; } goto PGzMk; A3oy_: LU2SW: goto D6cDj; D6cDj: try { goto WsxG_; FyAaL: LzzHa: goto nHjGe; UL9Wq: lRW8O: goto WdYwv; y4QFZ: Factory::response()->sendError("\x45\162\x72\x6f\162\x3a\x20\143\162\145\x61\164\x69\157\156\40\x6f\146\40\x63\x6f\154\x6c\x65\143\x74\x69\x6f\x6e\x20\146\141\x69\x6c\x73\41"); goto qXMrn; ngJZ6: Factory::response()->send(["\151\x64" => $z4JuR], 201); goto UL9Wq; Vzek_: ELy5I: goto ngJZ6; C36CK: $RtBE1 = "\134\x73\x69\155\160\x6c\145\x72\x65\x73\164\134\143\157\156\x74\162\157\x6c\154\145\x72\163\134\141\160\151\134" . ucfirst($BgRX2); goto uURsl; NjnmA: $S8an1 = ucfirst($BgRX2) . "\x4d\157\x64\x65\x6c"; goto YvLjV; Z9IiB: $DDBZ8 = "\163\151\155\x70\x6c\x65\x72\x65\163\x74\134\155\157\x64\145\154\163\x5c" . $S8an1; goto C36CK; qXMrn: goto lRW8O; goto Vzek_; WG3Mr: if ($z4JuR !== false) { goto ELy5I; } goto y4QFZ; WsxG_: $BgRX2 = Strings::snakeToCamel($BgRX2); goto NjnmA; nHjGe: $z4JuR = DB::table("\x63\157\x6c\154\x65\143\164\x69\x6f\x6e\x73")->create(["\145\x6e\x74\151\x74\x79" => $lxJL8, "\162\x65\146\x73" => json_encode($P19iw), "\x62\145\x6c\x6f\x6e\147\x73\x5f\x74\x6f" => Acl::getCurrentUid()]); goto WG3Mr; CNxp6: Factory::response()->sendError("\105\156\164\x69\x74\171\40{$BgRX2}\x20\144\157\x65\x73\156\x27\x74\40\x65\170\151\x73\x74", 400); goto FyAaL; uURsl: if (class_exists($DDBZ8)) { goto LzzHa; } goto CNxp6; YvLjV: $lxJL8 = strtolower($BgRX2); goto Z9IiB; WdYwv: } catch (\Exception $h8_p5) { Factory::response()->sendError($h8_p5->getMessage()); } goto QpvO4; PGzMk: Factory::response()->sendError("\111\156\x76\x61\154\151\144\40\112\x53\117\x4e", 400); goto TpMc3; o3LvF: $BgRX2 = $VriIQ["\x65\156\x74\x69\164\x79"]; goto uZT3N; ubFm0: rtbjA: goto o3LvF; QSe1N: if (!empty($VriIQ["\145\156\x74\151\x74\171"])) { goto dUVHJ; } goto U9N4H; QpvO4: } protected function modify($z4JuR = NULL, bool $kJxk4 = false) { goto sE5g_; O_IPj: if (!empty($VriIQ)) { goto szLLW; } goto qyYmP; sE5g_: if (!($z4JuR == null)) { goto vOjLU; } goto kEJfi; zqXWO: $VriIQ = Factory::request()->getBody(false); goto O_IPj; wf8cX: vOjLU: goto zqXWO; yEU52: szLLW: goto O6rqW; qyYmP: Factory::response()->sendError("\x49\156\x76\141\154\151\x64\40\x4a\x53\x4f\116", 400); goto yEU52; kEJfi: Factory::response()->code(400)->sendError("\x4d\x69\163\x73\151\156\147\x20\x69\x64"); goto wf8cX; O6rqW: try { goto zF4up; nVUZF: unset($VriIQ["\162\145\x66\163"]); goto BnP3S; exEZV: $vRTUO = Factory::acl()->hasSpecialPermission("\x77\162\x69\x74\x65\137\x61\x6c\x6c\137\143\157\154\x6c\x65\x63\164\x69\x6f\x6e\x73"); goto WC9XX; BnP3S: foreach ($VriIQ as $E2cds => $rYWj0) { goto CQ4Cd; InqoG: aI5qX: goto xYn3L; s_HPo: $VriIQ[$E2cds] = NULL; goto InqoG; CQ4Cd: if (!(strtoupper($rYWj0) == "\116\x55\114\x4c" && $ycnSe->isNullable($E2cds))) { goto aI5qX; } goto s_HPo; xYn3L: pV09w: goto LNq09; LNq09: } goto HnYbh; SKLrA: $BgRX2 = Strings::snakeToCamel($EHbDe["\x65\x6e\164\x69\164\x79"]); goto AjnB0; BOBd9: $rodTX = (new Validator())->setRequired($kJxk4)->validate($ycnSe->getRules(), $VriIQ); goto WgZwE; sc050: $ycnSe->where([$ycnSe->belongsTo() => Acl::getCurrentUid()]); goto IzjeL; ifDuo: Ud53S: goto z7bzc; p_iN3: Factory::response()->sendError("\106\157\162\x62\151\144\144\x65\156", 403, "\x59\x6f\x75\40\141\162\145\40\x6e\157\x74\x20\164\150\x65\x20\157\x77\x6e\x65\x72"); goto yO6hW; WC9XX: if (!(!$vRTUO && $EHbDe["\142\145\x6c\157\156\x67\x73\137\164\x6f"] != Acl::getCurrentUid())) { goto YSelk; } goto p_iN3; BuOCJ: if ($vRTUO) { goto hmpvb; } goto cITZH; yO6hW: YSelk: goto SKLrA; YZdJJ: Factory::response()->sendError(_("\103\x6f\154\x6c\145\x63\164\x69\157\x6e\x73\40\x61\162\145\40\156\x6f\164\x20\x61\166\x61\x69\154\x61\142\x6c\145\40\164\x6f\x20\164\x68\151\x73\x20\x72\145\x73\157\x75\x72\x63\145")); goto VBwe_; Ej7_H: $ycnSe = new $DDBZ8(true); goto nVUZF; UaAPr: if ($EHbDe) { goto uFpG2; } goto wqida; qrzR_: $EHbDe = DB::table("\143\x6f\154\x6c\145\143\164\151\157\156\x73")->where(["\151\x64", $z4JuR])->first(); goto UaAPr; eN08q: ygJuH: goto gXpDa; RAgKD: xQ_Rh: goto ggI6u; Z2U3K: goto VtlQM; goto eN08q; M5sQN: wJUK8: goto bq3ZY; cITZH: if ($ycnSe->inSchema([$ycnSe->belongsTo()])) { goto ihkOR; } goto YZdJJ; wqida: Factory::response()->code(404)->sendError("\103\x6f\154\x6c\x65\x63\164\x69\157\x6e\40\146\x6f\x72\x20\x69\144\75{$z4JuR}\x20\x64\157\145\163\156\x27\164\x20\145\x78\151\163\x74"); goto WB9fH; kVHei: $DDBZ8 = "\x73\151\x6d\x70\154\x65\162\145\163\x74\x5c\155\157\x64\x65\154\x73\134" . $S8an1; goto OrtuX; mB2l8: Factory::response()->send(["\141\x66\146\145\143\x74\x65\144\137\x72\157\167\163" => $I2ngX]); goto Z2U3K; OrtuX: $RtBE1 = "\x5c\163\151\x6d\160\x6c\x65\x72\x65\163\164\134\143\157\x6e\164\x72\157\x6c\154\x65\162\163\x5c\141\x70\151\x5c" . ucfirst($BgRX2); goto UHgOd; UHgOd: if (class_exists($DDBZ8)) { goto YsABI; } goto kZWuI; bq3ZY: if (!$ycnSe->inSchema(["\165\x70\144\141\x74\145\144\137\142\171"])) { goto xQ_Rh; } goto fct1s; ggI6u: $P19iw = json_decode($EHbDe["\162\145\146\x73"]); goto ppD13; AjnB0: $S8an1 = ucfirst($BgRX2) . "\x4d\x6f\144\145\x6c"; goto Xy7VD; IzjeL: hmpvb: goto BOBd9; gXpDa: if (DB::table("\x63\x6f\x6c\x6c\x65\x63\x74\151\x6f\x6e\163")->where(["\x69\x64", $z4JuR])->delete()) { goto Ud53S; } goto Ynue4; ByARl: Factory::response()->sendError(_("\x44\141\x74\141\40\166\x61\154\151\144\x61\x74\151\x6f\x6e\x20\x65\162\x72\x6f\162"), 400, $rodTX); goto M5sQN; VRFAb: goto uwY0J; goto ifDuo; Xy7VD: $lxJL8 = strtolower($BgRX2); goto kVHei; zF4up: if (!empty($VriIQ["\162\x65\x6d\x6f\x76\145"]) && strtolower($VriIQ["\x72\x65\155\157\166\145"]) == "\164\162\x75\145") { goto ygJuH; } goto qrzR_; z7bzc: Factory::response()->sendOK(); goto l90bU; ppD13: $I2ngX = 0; goto iv3tA; WB9fH: uFpG2: goto exEZV; iv3tA: DB::transaction(function () use($ycnSe, $P19iw, &$I2ngX, $VriIQ, $z4JuR) { $I2ngX = $ycnSe->whereIn("\x69\x64", $P19iw)->update($VriIQ); DB::table("\x63\x6f\154\154\x65\143\x74\151\157\x6e\x73")->where(["\x69\x64" => $z4JuR])->delete(); }); goto mB2l8; VBwe_: ihkOR: goto sc050; kZWuI: Factory::response()->sendError("\105\x6e\x74\x69\164\171\40{$BgRX2}\40\x64\x6f\145\163\156\47\x74\40\x65\x78\151\163\164", 400); goto vz63J; WgZwE: if (!($rodTX !== true)) { goto wJUK8; } goto ByARl; HnYbh: zqvLo: goto BuOCJ; fct1s: $VriIQ["\x75\160\144\141\164\145\x64\137\142\171"] = Acl::getCurrentUid(); goto RAgKD; fOhhi: VtlQM: goto tPDsB; vz63J: YsABI: goto Ej7_H; Ynue4: Factory::response()->sendError("\x43\157\x6c\145\143\x74\x69\x6f\156\40\x6e\x6f\x74\40\146\x6f\165\156\x64", 404); goto VRFAb; l90bU: uwY0J: goto fOhhi; tPDsB: } catch (\Exception $h8_p5) { Factory::response()->sendError("\105\162\x72\x6f\162\x20\144\165\x72\151\x6e\x67\x20\x75\x70\144\141\164\x65\x20\146\x6f\x72\x20\143\157\x6c\145\x63\x74\x69\x6f\x6e\40{$z4JuR}\x20\x77\151\164\x68\x20\155\x65\x73\163\x61\x67\x65\72\x20{$h8_p5->getMessage()}"); } goto vugZf; vugZf: } function delete($z4JuR = NULL) { goto SD3dX; MhCfk: N1smf: goto shyZW; SD3dX: if (!($z4JuR == NULL)) { goto N1smf; } goto HOXpp; ftp3x: try { goto hVlSw; rBFku: $S8an1 = ucfirst($BgRX2) . "\115\157\144\145\154"; goto LVQrI; DvDbF: szvun: goto lphfD; b5oK2: qnpyq: goto ZXnZE; AyNlN: $P19iw = json_decode($EHbDe["\162\x65\146\163"]); goto sDmAF; x6ZAV: if ($vRTUO) { goto xGXPn; } goto uhAG_; NvMGC: DB::transaction(function () use($ycnSe, $RtBE1, $P19iw, $z4JuR, &$I2ngX) { $I2ngX = $ycnSe->whereIn("\151\x64", $P19iw)->delete(); DB::table("\143\157\154\154\x65\143\164\151\157\156\163")->where(["\x69\x64" => $z4JuR])->delete(); }); goto kjlhG; g3Xvv: xGXPn: goto AyNlN; Lv8cI: Factory::response()->sendError("\x46\x6f\x72\x62\151\x64\144\145\x6e", 403, "\131\x6f\165\x20\x61\x72\145\40\x6e\x6f\x74\x20\x74\x68\x65\40\x6f\167\156\x65\162"); goto DvDbF; nJBEE: if (!(!$vRTUO && $EHbDe["\142\145\154\x6f\x6e\x67\x73\137\164\157"] != Acl::getCurrentUid())) { goto szvun; } goto Lv8cI; rTkjn: if ($EHbDe) { goto AZH69; } goto ZCv_D; aRe7M: AZH69: goto jm96A; hVlSw: $EHbDe = DB::table("\143\x6f\154\x6c\145\143\x74\151\x6f\x6e\x73")->where(["\151\144", $z4JuR])->first(); goto rTkjn; kjlhG: Factory::response()->send(["\141\146\146\x65\143\x74\145\x64\x5f\x72\157\167\163" => $I2ngX]); goto tlD13; jm96A: $vRTUO = Factory::acl()->hasSpecialPermission("\167\x72\151\164\x65\137\141\154\x6c\137\x63\x6f\154\x6c\145\x63\164\151\x6f\156\163"); goto nJBEE; aCt1q: if (class_exists($DDBZ8)) { goto qnpyq; } goto ZmdCL; uhAG_: $ycnSe->where(["\142\x65\154\x6f\156\x67\x73\137\x74\157" => Acl::getCurrentUid()]); goto g3Xvv; Rg_os: $RtBE1 = "\134\163\x69\155\x70\154\145\x72\145\x73\164\x5c\x63\157\x6e\164\x72\157\154\x6c\145\162\163\x5c\141\x70\x69\134" . ucfirst($BgRX2); goto aCt1q; LVQrI: $lxJL8 = strtolower($BgRX2); goto w1mbs; w1mbs: $DDBZ8 = "\x73\x69\x6d\x70\154\x65\162\x65\x73\164\134\x6d\x6f\144\145\x6c\163\134" . $S8an1; goto Rg_os; ZCv_D: Factory::response()->code(404)->sendError("\x43\157\154\154\145\x63\164\151\157\156\x20\x66\x6f\x72\40\151\144\75{$z4JuR}\40\144\157\x65\x73\x6e\47\164\40\145\x78\151\163\x74"); goto aRe7M; ZmdCL: Factory::response()->sendError("\105\x6e\164\x69\x74\x79\40{$BgRX2}\40\x64\x6f\145\163\x6e\47\x74\x20\x65\170\151\x73\x74", 400); goto b5oK2; sDmAF: $I2ngX = 0; goto NvMGC; ZXnZE: $ycnSe = new $DDBZ8(true); goto x6ZAV; lphfD: $BgRX2 = Strings::snakeToCamel($EHbDe["\145\x6e\x74\151\164\x79"]); goto rBFku; tlD13: } catch (\Exception $h8_p5) { Factory::response()->sendError("\105\x72\162\x6f\x72\x20\144\165\162\151\x6e\x67\x20\104\x45\x4c\x45\x54\x45\x20\x66\x6f\x72\40\x63\157\x6c\154\145\x63\x74\x69\157\x6e\40{$z4JuR}\x20\167\x69\x74\x68\40\x6d\x65\163\163\x61\x67\145\x3a\40{$h8_p5->getMessage()}"); } goto Iooi0; shyZW: $VriIQ = Factory::request()->getBody(); goto ftp3x; HOXpp: Factory::response()->sendError("\114\141\143\x6b\x73\x20\151\144\x20\146\x6f\x72\x20\x43\x6f\x6c\x6c\145\143\x74\151\x6f\x6e\40\151\x6e\x20\x72\145\161\165\145\x73\x74", 400); goto MhCfk; Iooi0: } }
